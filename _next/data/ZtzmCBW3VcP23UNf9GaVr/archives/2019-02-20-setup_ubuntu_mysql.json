{"pageProps":{"post":{"slug":"2019-02-20-setup_ubuntu_mysql","title":"Install MySQL on EC2","categories":["memo"],"image":"https://koka831.github.io/img/icon.png","tags":["AWS","installation","MySQL"],"content":"<h2 id=\"install-ubuntu-mysql-on-ec2\"><a href=\"#install-ubuntu-mysql-on-ec2\">install ubuntu mysql on ec2</a></h2>\n<p>install <code>mysql-server</code> and setup mysql privillege table via <code>mysql_secure_installation</code>.</p>\n<div class=\"remark-highlight\"><pre class=\"language-sh\"><code class=\"language-sh\">sudo apt install nginx mysql-server\nsudo mysql_secure_installation\n</code></pre></div>\n<h2 id=\"step2-create-a-new-user\"><a href=\"#step2-create-a-new-user\">step.2 create a new user</a></h2>\n<p>create a database and a user for the database with minimum permission.</p>\n<div class=\"remark-container tip\"><p>Note: set charset to <code>UTF8mb4</code> to store emoji</p></div>\n<div class=\"remark-highlight\"><pre class=\"language-sql\"><code class=\"language-sql\">sudo mysql <span class=\"token operator\">-</span>u root <span class=\"token operator\">-</span>p\n\n<span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">USER</span> <span class=\"token string\">'username'</span><span class=\"token variable\">@'localhost'</span> IDENTIFIED <span class=\"token keyword\">BY</span> <span class=\"token string\">'password'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">DATABASE</span> <span class=\"token string\">'database'</span> <span class=\"token keyword\">character</span> <span class=\"token keyword\">set</span> UTF8mb4 <span class=\"token keyword\">collate</span> utf8mb4_bin<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">GRANT</span> <span class=\"token keyword\">ALL</span> <span class=\"token keyword\">PRIVILEGES</span> <span class=\"token keyword\">ON</span> <span class=\"token keyword\">database</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span> <span class=\"token keyword\">TO</span> <span class=\"token string\">'username'</span><span class=\"token variable\">@'localhost'</span> <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">GRANT</span> <span class=\"token keyword\">OPTION</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h2 id=\"step3-install-php\"><a href=\"#step3-install-php\">step.3 install php</a></h2>\n<div class=\"remark-highlight\"><pre class=\"language-sh\"><code class=\"language-sh\">sudo apt install php-curl php-gd php-mbstring php-xml php-xmlrpc php-soap php-intl php-zip</code></pre></div>\n<h2 id=\"step4-download-wordpress\"><a href=\"#step4-download-wordpress\">step.4 download wordpress</a></h2>\n<div class=\"remark-highlight\"><pre class=\"language-unknown\"><code class=\"language-unknown\">cd /tmp\ncurl -O https://wordpress.org/latest.tar.gz\nmv wp-config-sample.php wp-config.php\n\n## open the link below to generate salt\nchrome https://api.wordpress.org/secret-key/1.1/salt/</code></pre></div>\n<h2 id=\"step5-setup-nginx\"><a href=\"#step5-setup-nginx\">step.5 setup nginx</a></h2>\n<ul>\n<li>default.conf</li>\n<li>php-fpm unix domain socket</li>\n</ul>\n<h2 id=\"ref\"><a href=\"#ref\">ref</a></h2>\n<p><a href=\"https://stackoverflow.com/questions/25774975/unable-to-start-php-fpm-cannot-get-uid-for-user-apache\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://stackoverflow.com/questions/25774975/unable-to-start-php-fpm-cannot-get-uid-for-user-apache</a></p>","description":"procedure memo","commits":[{"title":"update remark-custom-container to 1.2.0","date":"2022-11-27 00:25:35","hash":"897b048f","diff":"<div class=\"remark-highlight\"><pre data-file=\"897b048f.patch\" class=\"language-git  language-diff\"><code class=\"language-git\"><span class=\"token commit-sha1\">commit 897b048fe31450b5d4f6545855125b76492f9066</span>\nAuthor: koka &#x26;<a href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\">lt;koka.code@gmail.com</a>&#x26;gt;\nDate:   Sun Nov 27 00:25:35 2022 +0900\n\n  update remark-custom-container to 1.2.0\n  \n  fix\n\ndiff --git a/_posts/2019-02-20-setup_ubuntu_mysql.md b/_posts/2019-02-20-setup_ubuntu_mysql.md\nindex 77b7437..01e440f 100644\n<span class=\"token deleted\">--- a/_posts/2019-02-20-setup_ubuntu_mysql.md</span>\n<span class=\"token inserted\">+++ b/_posts/2019-02-20-setup_ubuntu_mysql.md</span>\n@@ -24,7 +24,9 @@ sudo mysql_secure_installation\ncreate a database and a user for the database with minimum permission.\n\n::: tip\n<span class=\"token inserted\">+</span>\nNote: set charset to `UTF8mb4` to store emoji\n<span class=\"token inserted\">+</span>\n:::\n\n\\```sql\n</code></pre></div>"},{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"<div class=\"remark-highlight\"><pre data-file=\"35b550ae.patch\" class=\"language-git  language-diff\"><code class=\"language-git\"><span class=\"token commit-sha1\">commit 35b550ae83af4efaeadf33471c8ca8a32c1079c8</span>\nAuthor: koka &#x26;<a href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\">lt;koka.code@gmail.com</a>&#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2019-02-20-setup_ubuntu_mysql.md b/_posts/2019-02-20-setup_ubuntu_mysql.md\nnew file mode 100644\nindex 0000000..77b7437\n<span class=\"token deleted\">--- /dev/null</span>\n<span class=\"token inserted\">+++ b/_posts/2019-02-20-setup_ubuntu_mysql.md</span>\n<span class=\"token coord\">@@ -0,0 +1,63 @@</span>\n<span class=\"token inserted\">+---</span>\n<span class=\"token inserted\">+title: 'Install MySQL on EC2'</span>\n<span class=\"token inserted\">+date: 2019-02-20</span>\n<span class=\"token inserted\">+categories:</span>\n<span class=\"token inserted\">+  - memo</span>\n<span class=\"token inserted\">+tags:</span>\n<span class=\"token inserted\">+  - AWS</span>\n<span class=\"token inserted\">+  - installation</span>\n<span class=\"token inserted\">+  - MySQL</span>\n<span class=\"token inserted\">+description: procedure memo</span>\n<span class=\"token inserted\">+---</span>\n<span class=\"token inserted\">+</span>\n<span class=\"token inserted\">+## install ubuntu mysql on ec2</span>\n<span class=\"token inserted\">+install `mysql-server` and setup mysql privillege table via `mysql_secure_installation`.</span>\n<span class=\"token inserted\">+</span>\n<span class=\"token inserted\">+\\```sh</span>\n<span class=\"token inserted\">+sudo apt install nginx mysql-server</span>\n<span class=\"token inserted\">+sudo mysql_secure_installation</span>\n<span class=\"token inserted\">+</span>\n<span class=\"token inserted\">+\\```</span>\n<span class=\"token inserted\">+</span>\n<span class=\"token inserted\">+</span>\n<span class=\"token inserted\">+## step.2 create a new user</span>\n<span class=\"token inserted\">+create a database and a user for the database with minimum permission.</span>\n<span class=\"token inserted\">+</span>\n<span class=\"token inserted\">+::: tip</span>\n<span class=\"token inserted\">+Note: set charset to `UTF8mb4` to store emoji</span>\n<span class=\"token inserted\">+:::</span>\n<span class=\"token inserted\">+</span>\n<span class=\"token inserted\">+\\```sql</span>\n<span class=\"token inserted\">+sudo mysql -u root -p</span>\n<span class=\"token inserted\">+</span>\n<span class=\"token inserted\">+CREATE USER 'username'@'localhost' IDENTIFIED BY 'password';</span>\n<span class=\"token inserted\">+</span>\n<span class=\"token inserted\">+CREATE DATABASE 'database' character set UTF8mb4 collate utf8mb4_bin;</span>\n<span class=\"token inserted\">+</span>\n<span class=\"token inserted\">+GRANT ALL PRIVILEGES ON database.* TO 'username'@'localhost' WITH GRANT OPTION;</span>\n<span class=\"token inserted\">+\\```</span>\n<span class=\"token inserted\">+</span>\n<span class=\"token inserted\">+## step.3 install php</span>\n<span class=\"token inserted\">+</span>\n<span class=\"token inserted\">+\\```sh</span>\n<span class=\"token inserted\">+sudo apt install php-curl php-gd php-mbstring php-xml php-xmlrpc php-soap php-intl php-zip</span>\n<span class=\"token inserted\">+\\```</span>\n<span class=\"token inserted\">+</span>\n<span class=\"token inserted\">+## step.4 download wordpress</span>\n<span class=\"token inserted\">+</span>\n<span class=\"token inserted\">+\\```</span>\n<span class=\"token inserted\">+cd /tmp</span>\n<span class=\"token inserted\">+curl -O https://wordpress.org/latest.tar.gz</span>\n<span class=\"token inserted\">+mv wp-config-sample.php wp-config.php</span>\n<span class=\"token inserted\">+</span>\n<span class=\"token inserted\">+## open the link below to generate salt</span>\n<span class=\"token inserted\">+chrome https://api.wordpress.org/secret-key/1.1/salt/</span>\n<span class=\"token inserted\">+\\```</span>\n<span class=\"token inserted\">+</span>\n<span class=\"token inserted\">+## step.5 setup nginx</span>\n<span class=\"token inserted\">+- default.conf</span>\n<span class=\"token inserted\">+- php-fpm unix domain socket</span>\n<span class=\"token inserted\">+</span>\n<span class=\"token inserted\">+</span>\n<span class=\"token inserted\">+## ref</span>\n<span class=\"token inserted\">+https://stackoverflow.com/questions/25774975/unable-to-start-php-fpm-cannot-get-uid-for-user-apache</span>\n</code></pre></div>"}],"publishedAt":"2019-02-20","updatedAt":"2022-11-27"}},"__N_SSG":true}