<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta name="description" content="cat /var/log/koka &gt; /dev/null"/><meta name="theme-color" content="#ddd4bb"/><meta property="og:type" content="website"/><meta property="og:title" content="/var/log/koka"/><meta property="og:url" content="https://koka831.github.io"/><meta property="og:description" content="cat /var/log/koka &gt; /dev/null"/><meta property="og:site_name" content="/var/log/koka"/><meta property="og:image" content="https://koka831.github.io/img/icon.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="/var/log/koka"/><meta name="twitter:site" content="@k_0ka"/><meta name="twitter:description" content="cat /var/log/koka &gt; /dev/null"/><link rel="alternate" type="application/rss+xml" href="https://koka831.github.io/feed.xml" title="/var/log/koka RSS2.0"/><meta property="title" content="Archives"/><title>Archives | /var/log/koka</title><meta name="next-head-count" content="17"/><link rel="preload" href="/_next/static/css/3b95598d126ea80c3aba.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3b95598d126ea80c3aba.css" data-n-g=""/><link rel="preload" href="/_next/static/css/9c2097a27a61a545a7a5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9c2097a27a61a545a7a5.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-90a60b87fd0d5fc150f2.js" defer=""></script><script src="/_next/static/chunks/framework-2191d16384373197bc0a.js" defer=""></script><script src="/_next/static/chunks/main-7c56bfc6d8ecbcc62d76.js" defer=""></script><script src="/_next/static/chunks/pages/_app-bd023273eebc14b656bf.js" defer=""></script><script src="/_next/static/chunks/cb1608f2-13e86362beaa0dcfd98b.js" defer=""></script><script src="/_next/static/chunks/935-9adc676da7ae634c9229.js" defer=""></script><script src="/_next/static/chunks/pages/archives-5faaa5234de784498a5d.js" defer=""></script><script src="/_next/static/70uKKhuowIQ3lJ7eUOIUA/_buildManifest.js" defer=""></script><script src="/_next/static/70uKKhuowIQ3lJ7eUOIUA/_ssgManifest.js" defer=""></script></head><body><div id="__next"><nav class="Header_navigation__container__3D5xg"><div class="Header_navigation__16lxy"><a href="/">/var/log/koka</a></div><div><a href="/archives">archive</a></div></nav><main class="Layout_container__QVNsN"><div class="archives_posts__d2IED"><div class="archives_posts__wrapper__1RjYI"><div itemscope="" class="ArticleHeader_header__container__AO3KC"><a class="ArticleHeader_post__title__2ujta" href="/archives/2021-04-25-nextjs-from-vuepress">Renewal Blog</a><p>scratch new blog with Next.js; switched from VuePress</p><div class="ArticleHeader_flex__36wQ5"><div class="ArticleHeader_post__tags__18geI"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 ArticleHeader_tags__icon__3kOkK" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><p class="Tag_tag__FntIt">Diary</p></div><div class="ArticleHeader_post__dates__s80K2"><time dateTime="2021-04-26" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">published: <!-- -->2021-04-26</time><time dateTime="2021-04-27" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">updated: 2021-04-27</time></div></div></div><div itemscope="" class="ArticleHeader_header__container__AO3KC"><a class="ArticleHeader_post__title__2ujta" href="/archives/2020-06-05-install-arch-linux">Install Arch Linux</a><p>log</p><div class="ArticleHeader_flex__36wQ5"><div class="ArticleHeader_post__tags__18geI"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 ArticleHeader_tags__icon__3kOkK" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><p class="Tag_tag__FntIt">Linux</p></div><div class="ArticleHeader_post__dates__s80K2"><time dateTime="2020-06-05" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">published: <!-- -->2020-06-05</time><time dateTime="2021-10-13" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">updated: 2021-10-13</time></div></div></div><div itemscope="" class="ArticleHeader_header__container__AO3KC"><a class="ArticleHeader_post__title__2ujta" href="/archives/2019-11-18-abc132-e">Hopscotch Addict</a><p>グラフの構築</p><div class="ArticleHeader_flex__36wQ5"><div class="ArticleHeader_post__tags__18geI"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 ArticleHeader_tags__icon__3kOkK" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><p class="Tag_tag__FntIt">AtCoder</p><p class="Tag_tag__FntIt">Graph</p></div><div class="ArticleHeader_post__dates__s80K2"><time dateTime="2019-11-18" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">published: <!-- -->2019-11-18</time><time dateTime="2021-10-14" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">updated: 2021-10-14</time></div></div></div><div itemscope="" class="ArticleHeader_header__container__AO3KC"><a class="ArticleHeader_post__title__2ujta" href="/archives/2019-10-06-nuxt-sharing-component">Nuxt.js: sharing components</a><p>simple way to share components between multiple projects</p><div class="ArticleHeader_flex__36wQ5"><div class="ArticleHeader_post__tags__18geI"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 ArticleHeader_tags__icon__3kOkK" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><p class="Tag_tag__FntIt">Vue</p></div><div class="ArticleHeader_post__dates__s80K2"><time dateTime="2019-10-06" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">published: <!-- -->2019-10-06</time><time dateTime="2021-01-30" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">updated: 2021-01-30</time></div></div></div><div itemscope="" class="ArticleHeader_header__container__AO3KC"><a class="ArticleHeader_post__title__2ujta" href="/archives/2019-08-12-abc110-d">Modular multiplicative inverse</a><p>考察</p><div class="ArticleHeader_flex__36wQ5"><div class="ArticleHeader_post__tags__18geI"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 ArticleHeader_tags__icon__3kOkK" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><p class="Tag_tag__FntIt">AtCoder</p><p class="Tag_tag__FntIt">組み合わせ</p></div><div class="ArticleHeader_post__dates__s80K2"><time dateTime="2019-08-12" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">published: <!-- -->2019-08-12</time><time dateTime="2021-01-30" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">updated: 2021-01-30</time></div></div></div><div itemscope="" class="ArticleHeader_header__container__AO3KC"><a class="ArticleHeader_post__title__2ujta" href="/archives/2019-08-08-autolock-with-yubikey">Linux: Login/sudo with Yubikey</a><p>Yubikeyを自宅に忘れて１敗</p><div class="ArticleHeader_flex__36wQ5"><div class="ArticleHeader_post__tags__18geI"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 ArticleHeader_tags__icon__3kOkK" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><p class="Tag_tag__FntIt">Linux</p><p class="Tag_tag__FntIt">udev</p><p class="Tag_tag__FntIt">yubikey</p></div><div class="ArticleHeader_post__dates__s80K2"><time dateTime="2019-08-08" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">published: <!-- -->2019-08-08</time><time dateTime="2021-04-10" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">updated: 2021-04-10</time></div></div></div><div itemscope="" class="ArticleHeader_header__container__AO3KC"><a class="ArticleHeader_post__title__2ujta" href="/archives/2019-07-27-linux-usergroup">Linux: 画面の明るさを変更できなくなった</a><p>バルス</p><div class="ArticleHeader_flex__36wQ5"><div class="ArticleHeader_post__tags__18geI"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 ArticleHeader_tags__icon__3kOkK" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><p class="Tag_tag__FntIt">Linux</p><p class="Tag_tag__FntIt">udev</p></div><div class="ArticleHeader_post__dates__s80K2"><time dateTime="2019-07-27" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">published: <!-- -->2019-07-27</time><time dateTime="2021-01-30" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">updated: 2021-01-30</time></div></div></div><div itemscope="" class="ArticleHeader_header__container__AO3KC"><a class="ArticleHeader_post__title__2ujta" href="/archives/2019-07-15-internal-vue">Internal Vue.js 1</a><p>internal Vue.js &amp; read how Vue compiler works</p><div class="ArticleHeader_flex__36wQ5"><div class="ArticleHeader_post__tags__18geI"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 ArticleHeader_tags__icon__3kOkK" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><p class="Tag_tag__FntIt">Vue</p><p class="Tag_tag__FntIt">Virtual DOM</p></div><div class="ArticleHeader_post__dates__s80K2"><time dateTime="2019-07-15" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">published: <!-- -->2019-07-15</time><time dateTime="2021-01-30" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">updated: 2021-01-30</time></div></div></div><div itemscope="" class="ArticleHeader_header__container__AO3KC"><a class="ArticleHeader_post__title__2ujta" href="/archives/2019-06-07-lie-algebra">Lie Algebra</a><p>リー環論完全に理解した</p><div class="ArticleHeader_flex__36wQ5"><div class="ArticleHeader_post__tags__18geI"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 ArticleHeader_tags__icon__3kOkK" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><p class="Tag_tag__FntIt">Lie Algebra</p></div><div class="ArticleHeader_post__dates__s80K2"><time dateTime="2019-06-07" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">published: <!-- -->2019-06-07</time><time dateTime="2021-01-30" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">updated: 2021-01-30</time></div></div></div><div itemscope="" class="ArticleHeader_header__container__AO3KC"><a class="ArticleHeader_post__title__2ujta" href="/archives/2019-05-20-abc126">ABC126</a><p>考察</p><div class="ArticleHeader_flex__36wQ5"><div class="ArticleHeader_post__tags__18geI"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 ArticleHeader_tags__icon__3kOkK" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><p class="Tag_tag__FntIt">AtCoder</p><p class="Tag_tag__FntIt">TODO</p></div><div class="ArticleHeader_post__dates__s80K2"><time dateTime="2019-05-20" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">published: <!-- -->2019-05-20</time><time dateTime="2021-01-30" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">updated: 2021-01-30</time></div></div></div><div itemscope="" class="ArticleHeader_header__container__AO3KC"><a class="ArticleHeader_post__title__2ujta" href="/archives/2019-03-15-candy-distribution">ABC105-D: Candy Distribution</a><p>余りの累積和</p><div class="ArticleHeader_flex__36wQ5"><div class="ArticleHeader_post__tags__18geI"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 ArticleHeader_tags__icon__3kOkK" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><p class="Tag_tag__FntIt">累積和</p></div><div class="ArticleHeader_post__dates__s80K2"><time dateTime="2019-03-15" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">published: <!-- -->2019-03-15</time><time dateTime="2021-01-30" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">updated: 2021-01-30</time></div></div></div><div itemscope="" class="ArticleHeader_header__container__AO3KC"><a class="ArticleHeader_post__title__2ujta" href="/archives/2019-03-08-unionfind">UnionFind</a><p>rankしかもってなかった</p><div class="ArticleHeader_flex__36wQ5"><div class="ArticleHeader_post__tags__18geI"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 ArticleHeader_tags__icon__3kOkK" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><p class="Tag_tag__FntIt">Graph</p><p class="Tag_tag__FntIt">TODO</p></div><div class="ArticleHeader_post__dates__s80K2"><time dateTime="2019-03-08" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">published: <!-- -->2019-03-08</time><time dateTime="2021-01-30" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">updated: 2021-01-30</time></div></div></div><div itemscope="" class="ArticleHeader_header__container__AO3KC"><a class="ArticleHeader_post__title__2ujta" href="/archives/2019-02-20-setup_ubuntu_mysql">Install MySQL on EC2</a><p>procedure memo</p><div class="ArticleHeader_flex__36wQ5"><div class="ArticleHeader_post__tags__18geI"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 ArticleHeader_tags__icon__3kOkK" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><p class="Tag_tag__FntIt">AWS</p><p class="Tag_tag__FntIt">installation</p><p class="Tag_tag__FntIt">MySQL</p></div><div class="ArticleHeader_post__dates__s80K2"><time dateTime="2019-02-20" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">published: <!-- -->2019-02-20</time><time dateTime="2021-01-30" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">updated: 2021-01-30</time></div></div></div><div itemscope="" class="ArticleHeader_header__container__AO3KC"><a class="ArticleHeader_post__title__2ujta" href="/archives/2019-02-09-minpro2019">みんなのプロコン 2019</a><p>考察</p><div class="ArticleHeader_flex__36wQ5"><div class="ArticleHeader_post__tags__18geI"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 ArticleHeader_tags__icon__3kOkK" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><p class="Tag_tag__FntIt">AtCoder</p><p class="Tag_tag__FntIt">TODO</p></div><div class="ArticleHeader_post__dates__s80K2"><time dateTime="2019-02-09" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">published: <!-- -->2019-02-09</time><time dateTime="2021-01-30" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">updated: 2021-01-30</time></div></div></div><div itemscope="" class="ArticleHeader_header__container__AO3KC"><a class="ArticleHeader_post__title__2ujta" href="/archives/2019-02-03-renewal">Renewal</a><p>jekyllからVuePressに移行した</p><div class="ArticleHeader_flex__36wQ5"><div class="ArticleHeader_post__tags__18geI"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 ArticleHeader_tags__icon__3kOkK" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><p class="Tag_tag__FntIt">Vue</p></div><div class="ArticleHeader_post__dates__s80K2"><time dateTime="2019-02-04" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">published: <!-- -->2019-02-04</time><time dateTime="2021-01-30" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">updated: 2021-01-30</time></div></div></div><div itemscope="" class="ArticleHeader_header__container__AO3KC"><a class="ArticleHeader_post__title__2ujta" href="/archives/2019-02-03-abc117">ABC117</a><p>考察</p><div class="ArticleHeader_flex__36wQ5"><div class="ArticleHeader_post__tags__18geI"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 ArticleHeader_tags__icon__3kOkK" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><p class="Tag_tag__FntIt">AtCoder</p><p class="Tag_tag__FntIt">TODO</p></div><div class="ArticleHeader_post__dates__s80K2"><time dateTime="2019-02-03" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">published: <!-- -->2019-02-03</time><time dateTime="2021-01-30" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">updated: 2021-01-30</time></div></div></div><div itemscope="" class="ArticleHeader_header__container__AO3KC"><a class="ArticleHeader_post__title__2ujta" href="/archives/2019-01-17-hello2nand">Hello2NAND</a><p>勉強会やってみた</p><div class="ArticleHeader_flex__36wQ5"><div class="ArticleHeader_post__tags__18geI"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 ArticleHeader_tags__icon__3kOkK" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><p class="Tag_tag__FntIt">発表資料</p><p class="Tag_tag__FntIt">Python</p></div><div class="ArticleHeader_post__dates__s80K2"><time dateTime="2019-01-17" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">published: <!-- -->2019-01-17</time><time dateTime="2021-01-30" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">updated: 2021-01-30</time></div></div></div><div itemscope="" class="ArticleHeader_header__container__AO3KC"><a class="ArticleHeader_post__title__2ujta" href="/archives/2018-12-22-caddi2018b">CADDi2018</a><p>考察</p><div class="ArticleHeader_flex__36wQ5"><div class="ArticleHeader_post__tags__18geI"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 ArticleHeader_tags__icon__3kOkK" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><p class="Tag_tag__FntIt">AtCoder</p></div><div class="ArticleHeader_post__dates__s80K2"><time dateTime="2018-12-15" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">published: <!-- -->2018-12-15</time><time dateTime="2021-01-30" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">updated: 2021-01-30</time></div></div></div><div itemscope="" class="ArticleHeader_header__container__AO3KC"><a class="ArticleHeader_post__title__2ujta" href="/archives/2018-12-15-agc029">AGC029</a><p>考察</p><div class="ArticleHeader_flex__36wQ5"><div class="ArticleHeader_post__tags__18geI"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 ArticleHeader_tags__icon__3kOkK" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><p class="Tag_tag__FntIt">AtCoder</p></div><div class="ArticleHeader_post__dates__s80K2"><time dateTime="2018-12-15" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">published: <!-- -->2018-12-15</time><time dateTime="2021-01-30" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">updated: 2021-01-30</time></div></div></div><div itemscope="" class="ArticleHeader_header__container__AO3KC"><a class="ArticleHeader_post__title__2ujta" href="/archives/2018-11-11-influxdb">InfluxDB</a><p>色々と必要になったのでまとめ</p><div class="ArticleHeader_flex__36wQ5"><div class="ArticleHeader_post__tags__18geI"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 ArticleHeader_tags__icon__3kOkK" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><p class="Tag_tag__FntIt">database</p><p class="Tag_tag__FntIt">時系列データ</p></div><div class="ArticleHeader_post__dates__s80K2"><time dateTime="2018-11-11" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">published: <!-- -->2018-11-11</time><time dateTime="2021-01-30" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">updated: 2021-01-30</time></div></div></div><div itemscope="" class="ArticleHeader_header__container__AO3KC"><a class="ArticleHeader_post__title__2ujta" href="/archives/2018-10-14-code-festival-b">Code Festival 2018 qual B</a><p>考察</p><div class="ArticleHeader_flex__36wQ5"><div class="ArticleHeader_post__tags__18geI"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 ArticleHeader_tags__icon__3kOkK" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><p class="Tag_tag__FntIt">AtCoder</p><p class="Tag_tag__FntIt">Grid</p></div><div class="ArticleHeader_post__dates__s80K2"><time dateTime="2017-11-29" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">published: <!-- -->2017-11-29</time><time dateTime="2021-01-30" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">updated: 2021-01-30</time></div></div></div><div itemscope="" class="ArticleHeader_header__container__AO3KC"><a class="ArticleHeader_post__title__2ujta" href="/archives/2018-10-06-abc112">ABC112</a><p>考察</p><div class="ArticleHeader_flex__36wQ5"><div class="ArticleHeader_post__tags__18geI"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 ArticleHeader_tags__icon__3kOkK" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><p class="Tag_tag__FntIt">AtCoder</p></div><div class="ArticleHeader_post__dates__s80K2"><time dateTime="2018-10-06" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">published: <!-- -->2018-10-06</time><time dateTime="2021-01-30" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">updated: 2021-01-30</time></div></div></div><div itemscope="" class="ArticleHeader_header__container__AO3KC"><a class="ArticleHeader_post__title__2ujta" href="/archives/2018-01-11-reading-futures-await">memo:reading futures-await</a><p>memo</p><div class="ArticleHeader_flex__36wQ5"><div class="ArticleHeader_post__tags__18geI"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 ArticleHeader_tags__icon__3kOkK" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><p class="Tag_tag__FntIt">Rust</p></div><div class="ArticleHeader_post__dates__s80K2"><time dateTime="2018-01-11" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">published: <!-- -->2018-01-11</time><time dateTime="2021-01-30" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">updated: 2021-01-30</time></div></div></div><div itemscope="" class="ArticleHeader_header__container__AO3KC"><a class="ArticleHeader_post__title__2ujta" href="/archives/2018-01-09-reading-wordpress">reading wordpress</a><p>How to read source code with an example</p><div class="ArticleHeader_flex__36wQ5"><div class="ArticleHeader_post__tags__18geI"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 ArticleHeader_tags__icon__3kOkK" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><p class="Tag_tag__FntIt">Wordpress</p></div><div class="ArticleHeader_post__dates__s80K2"><time dateTime="2018-01-09" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">published: <!-- -->2018-01-09</time><time dateTime="2021-04-22" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">updated: 2021-04-22</time></div></div></div><div itemscope="" class="ArticleHeader_header__container__AO3KC"><a class="ArticleHeader_post__title__2ujta" href="/archives/2017-11-07-github-api">memo:GitHub API &amp; Serde.rs</a><p>
Rusk/Task Manager in Rust の作成log.

Rust とTask から命名
## &lt;span class=&quot;olive&quot;&gt;Motivation&lt;/span&gt;
Googleカ...</p><div class="ArticleHeader_flex__36wQ5"><div class="ArticleHeader_post__tags__18geI"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 ArticleHeader_tags__icon__3kOkK" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><p class="Tag_tag__FntIt">Rust</p><p class="Tag_tag__FntIt">GitHub</p></div><div class="ArticleHeader_post__dates__s80K2"><time dateTime="2017-11-07" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">published: <!-- -->2017-11-07</time><time dateTime="2021-01-30" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">updated: 2021-01-30</time></div></div></div><div itemscope="" class="ArticleHeader_header__container__AO3KC"><a class="ArticleHeader_post__title__2ujta" href="/archives/2017-10-03-boot">boot</a><p>init.</p><div class="ArticleHeader_flex__36wQ5"><div class="ArticleHeader_post__tags__18geI"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 ArticleHeader_tags__icon__3kOkK" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg></div><div class="ArticleHeader_post__dates__s80K2"><time dateTime="2017-10-03" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">published: <!-- -->2017-10-03</time><time dateTime="2021-03-05" itemProp="datePublished" class="PublishDate_post__date__2Kcmg">updated: 2021-03-05</time></div></div></div></div></div></main><footer class="Footer_footer__cAlbN"><small>Code snippets licensed under MIT, unless otherwise noted.</small></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"posts":[{"slug":"2021-04-25-nextjs-from-vuepress","title":"Renewal Blog","categories":["Diary"],"image":"https://koka831.github.io/img/icon.png","tags":["Diary"],"content":"\u003cp\u003e1年ぶりになります．今年もよろしくお願いします．\u003c/p\u003e\n\u003cp\u003e最近は紅茶コーディネータになるべく日々精進しています\u003csup id=\"fnref-tea\"\u003e\u003ca href=\"#fn-tea\" class=\"footnote-ref\"\u003etea\u003c/a\u003e\u003c/sup\u003e．\u003c/p\u003e\n\u003ch2 id=\"tldr\"\u003e\u003ca href=\"#tldr\"\u003eTL;DR\u003c/a\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://vuepress.vuejs.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eVuePress\u003c/a\u003eのアルファ版を使っていて，メンテが辛くなった\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://nextjs.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eNext.js\u003c/a\u003e + \u003ca href=\"https://github.com/remarkjs/remark\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eremark\u003c/a\u003eでMarkdown-\u003eHTMLのSSGを構築した\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/koka831/koka831.github.io\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eできたもの\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"about\"\u003e\u003ca href=\"#about\"\u003eAbout\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eブログを書こうと思い立って，以前構築したブログを久々に確認した.\n今つかってるパソコンにブログのソースコードを持ってきていなかったので，\u003ccode\u003enpm install\u003c/code\u003eすると脆弱性の嵐.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"terminal\" class=\"language-shell-session\"\u003e\u003ccode class=\"language-shell-session\"\u003e\u003cspan class=\"token output\"\u003e$npm i\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eremoved 22 packages, changed 14 packages, and audited 1090 packages in 8s\u003c/span\u003e\n\u003cspan class=\"token output\"\u003e\u003c/span\u003e\n\u003cspan class=\"token output\"\u003e33 vulnerabilities (7 low, 15 moderate, 11 high)\u003c/span\u003e\n\u003cspan class=\"token output\"\u003e\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eTo address issues that do not require attention, run:\u003c/span\u003e\n\u003cspan class=\"token output\"\u003e  npm audit fix\u003c/span\u003e\n\u003cspan class=\"token output\"\u003e\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eTo address all issues, run:\u003c/span\u003e\n\u003cspan class=\"token output\"\u003e  npm audit fix --force\u003c/span\u003e\n\u003cspan class=\"token output\"\u003e\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eRun `npm audit` for details.\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eまた，ブログシステムのベースに使っているVuePressが0.xから1.8までバージョンアップしていたので，これは追従しよう.\u003c/p\u003e\n\u003cp\u003eしかし早々に更新を断念. デザインをフルスクラッチでやるためにVuePressのソースを\u003ccode\u003eeject\u003c/code\u003eしていたため，追従をすべて手でやる必要があった.\u003c/p\u003e\n\u003cp\u003eブログ自体のメンテにはそこまでコストをかけてられないので，今度は\u003ccode\u003eeject\u003c/code\u003eしなくてもデザインを触れるライブラリを選定することにした.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e開発言語自体にはこだわりはないが，型システムはほしい\u003c/li\u003e\n\u003cli\u003eマークダウンで書ける\u003c/li\u003e\n\u003cli\u003eサーバ管理は避けたいので，GitHub Pagesに載せられるもの\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eを探した.最終的には次の2つから選んだ. \u003cdel\u003e結局相当のyak shavingが発生した.\u003c/del\u003e\u003c/p\u003e\n\u003ch3 id=\"gatsbyjs\"\u003e\u003ca href=\"#gatsbyjs\"\u003eGatsby.js\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://www.gatsbyjs.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eGatsby.js\u003c/a\u003eはReact.jsをベースにしたリッチなCMSフレームワーク.バックエンドとはGraphQLで連携し，コンテンツの取得は\u003ca href=\"https://www.contentful.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003econtentful\u003c/a\u003e+Markdownだったりと選定の自由度が高い.\u003c/p\u003e\n\u003cp\u003eSSGのプロセスについてもAPIの呼び出し回数は全ページに対して1回で済む(ようなquery buildをする必要はある)ようなので，productionでの利用をするならGatsby.jsを選ぶと思う.\u003c/p\u003e\n\u003ch3 id=\"nextjs\"\u003e\u003ca href=\"#nextjs\"\u003eNext.js\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://nextjs.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eNext.js\u003c/a\u003eはGatsby.jsと比べると薄いフレームワークで，ビルドやルーティング等ベースとなる機能の提供がメインになっている.\nServer-Side Generationの仕組みはあるが，Gatsby.jsほどの最適化は行われていない感じ.\u003c/p\u003e\n\u003cp\u003eしたがってCMSとして使うためにはそれ相当の機能の実装が必要となるため，\u003cdel\u003eコストは高い\u003c/del\u003e面白そう.\u003c/p\u003e\n\u003ch2 id=\"artifacts\"\u003e\u003ca href=\"#artifacts\"\u003eArtifacts\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://koka831.github.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eこれ\u003c/a\u003eができた.\u003c/p\u003e\n\u003ch3 id=\"architecture\"\u003e\u003ca href=\"#architecture\"\u003eArchitecture\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eNext.jsの\u003ca href=\"https://nextjs.org/docs/basic-features/data-fetching#getstaticprops-static-generation\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003ccode\u003egetStaticProps\u003c/code\u003e\u003c/a\u003eと\u003ca href=\"https://nextjs.org/docs/basic-features/data-fetching#getstaticpaths-static-generation\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003ccode\u003egetStaticPaths\u003c/code\u003e\u003c/a\u003eを用いて一覧・詳細ページをSSG.\nコンテンツはMarkdownで記述し，\u003ca href=\"https://github.com/remarkjs/remark\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eremark\u003c/a\u003eを用いてHTMLを生成している．\nNext.js側でも\u003ca href=\"https://nextjs.org/blog/markdown\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eMDX\u003c/a\u003e(Markdown+React Component)を描画できる仕組みがあったけど，内部で呼ばれているコンパイラに手を加えるのに難儀したため，情報の多いremarkを選んだ.\u003c/p\u003e\n\u003cp\u003e(\u003ca href=\"https://github.com/mizchi/amdx\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eamdx\u003c/a\u003eはマジですごいと思う)\u003c/p\u003e\n\u003cp\u003eremarkはMarkdownを入力として，指定した形式での出力を行うプロセッサで，fig.1のように\u003ccode\u003eParser\u003c/code\u003e，\u003ccode\u003eTransformer\u003c/code\u003eや\u003ccode\u003eCompiler\u003c/code\u003eといったプラグインを処理に挟むことができる.\n受け取ったMarkdownは\u003ca href=\"https://github.com/syntax-tree/mdast\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003emdast\u003c/a\u003e\u003csup id=\"fnref-1\"\u003e\u003ca href=\"#fn-1\" class=\"footnote-ref\"\u003e1\u003c/a\u003e\u003c/sup\u003eという形式のastに変換され，プラグインはmdastを受取りmdastを返すよう要求される.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"process\" class=\"language-asciidoc\"\u003e\u003ccode class=\"language-asciidoc\"\u003e| ........................ process ........................... |\n| .......... parse ... | ... run ... | ... stringify ..........|\n\n          \u003cspan class=\"token inline\"\u003e\u003cspan class=\"token punctuation\"\u003e+\u003c/span\u003e--------\u003cspan class=\"token punctuation\"\u003e+\u003c/span\u003e\u003c/span\u003e                     \u003cspan class=\"token inline\"\u003e\u003cspan class=\"token punctuation\"\u003e+\u003c/span\u003e----------\u003cspan class=\"token punctuation\"\u003e+\u003c/span\u003e\u003c/span\u003e\nInput -\u003e- | Parser | -\u003e- Syntax Tree -\u003e- | Compiler | -\u003e- Output\n          \u003cspan class=\"token inline\"\u003e\u003cspan class=\"token punctuation\"\u003e+\u003c/span\u003e--------\u003cspan class=\"token punctuation\"\u003e+\u003c/span\u003e\u003c/span\u003e          |          \u003cspan class=\"token inline\"\u003e\u003cspan class=\"token punctuation\"\u003e+\u003c/span\u003e----------\u003cspan class=\"token punctuation\"\u003e+\u003c/span\u003e\u003c/span\u003e\n                              X\n                              |\n                       \u003cspan class=\"token inline\"\u003e\u003cspan class=\"token punctuation\"\u003e+\u003c/span\u003e--------------\u003cspan class=\"token punctuation\"\u003e+\u003c/span\u003e\u003c/span\u003e\n                       | Transformers |\n                       \u003cspan class=\"token inline\"\u003e\u003cspan class=\"token punctuation\"\u003e+\u003c/span\u003e--------------\u003cspan class=\"token punctuation\"\u003e+\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003cstrong\u003efig.1 remarkの変換プロセス. 図はベースとなるunifiedから. [\u003ca href=\"https://github.com/unifiedjs/unified#description\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e出典\u003c/a\u003e]\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eこのブログではそこそこプラグインを使っていて，中には自作したものもある\u003csup id=\"fnref-2\"\u003e\u003ca href=\"#fn-2\" class=\"footnote-ref\"\u003e2\u003c/a\u003e\u003c/sup\u003e.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"interpreter.ts\" class=\"language-typescript  line-numbers\"\u003e\u003ccode class=\"language-typescript\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e markdownToHtml \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003emarkdown\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estring\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003ePromise\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token builtin\"\u003estring\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e result \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"token function\"\u003eremark\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003euse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003egfm\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// remark-gfm\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003euse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003emath\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// remark-math\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003euse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eemoji\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// remark-emoji\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003euse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003econtainer\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 自作 | VuePressで使っていたCustom Container記法に対応\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003euse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecaption\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 自作 | Markdown中の画像に対して通し番号+figcaptionを付与\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003euse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eprism\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// remark-prism\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003euse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eexternalLink\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// remark-external-links\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003euse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eslug\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// remark-slug\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003euse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eheadings\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e behavior\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"wrap\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// remark-autolink-headings\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003euse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003efootnotes\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// remark-footnotes\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003euse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eremark2rehype\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// remark-rehype | mdastからhast形式へ変換\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003euse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ekatex\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// rehype-katex | remark-mathで変換したmarkdownでの数式をkatex記法へ変換\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003euse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003estringify\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// rehype-stringify\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eprocess\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003emarkdown\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e result\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003etoString\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\u003cspan aria-hidden=\"true\" class=\"line-numbers-rows\"\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003cstrong\u003efig.2 プラグイン一覧\u003c/strong\u003e\u003c/p\u003e\n\u003ch3 id=\"remark-plugin\"\u003e\u003ca href=\"#remark-plugin\"\u003eremark plugin\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e実際作ってみると結構簡単に実装できる. READMEにあるサンプルだと型情報がなかったりで結構辛いけど，fig.1と\u003ca href=\"https://unifiedjs.com/learn/guide/create-a-plugin/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eguide\u003c/a\u003eが参考になる.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eremark-container\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eもともと使っていたVuePressでは，Custom Containersと呼ばれるMarkdownの拡張記法が使える\u003csup id=\"fnref-3\"\u003e\u003ca href=\"#fn-3\" class=\"footnote-ref\"\u003e3\u003c/a\u003e\u003c/sup\u003e.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"custom-container.md\" class=\"language-markdown\"\u003e\u003ccode class=\"language-markdown\"\u003e::: info Custom Title\nCustom Container Body\n:::\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003cstrong\u003efig.3 これがこうじゃ\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"remark-container info\"\u003e\u003cdiv class=\"remark-container__title\"\u003eCustom Title\u003c/div\u003eCustom Container Body\u003c/div\u003e\u003c/p\u003e\n\u003cp\u003eremark版を探すといくつか見つかったけど，どれも動かなかったので作ることにした.\u003c/p\u003e\n\u003cp\u003e実装は正規表現でdirectiveにマッチした行のastを書き換えるもので，単純なため対応してないケースもある(directive内のcode blockとかnodeが分割されるケース).\nこれらの対応は\u003ca href=\"https://github.com/remarkjs/remark-directive\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eremark-directive\u003c/a\u003eを用いて後々やりたい.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eremark-image-caption\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eimg要素のようなself-closing tagについては\u003ccode\u003e::before\u003c/code\u003e等の疑似要素が使えないため，例えばMarkdownで記述した画像のタイトルをCSSのみで抽出・表示するといったことができない．\u003c/p\u003e\n\u003cp\u003e画像に対してcaptionを付与するプラグインは動作するいくつか見つかったけど，画像に対して連番を振ってくれるようなものは見当たらなかった.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"image.md\" class=\"language-markdown\"\u003e\u003ccode class=\"language-markdown\"\u003e\u003cspan class=\"token url\"\u003e\u003cspan class=\"token operator\"\u003e!\u003c/span\u003e[\u003cspan class=\"token content\"\u003ealt text\u003c/span\u003e](\u003cspan class=\"token url\"\u003eimage.png\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"image title\"\u003c/span\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003cfigure\u003e\u003cimg src=\"/img/icon.png\" alt=\"alt text\" title=\"image title\"\u003e\u003cfigcaption\u003eimg.1 image title\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\u003cp\u003e今回作成したプラグインでは，画像を\u003ccode\u003e\u0026#x3C;figure\u003e\u003c/code\u003eタグで囲んでタイトルを\u003ccode\u003e\u0026#x3C;figcaption\u003e\u003c/code\u003eに設定するようにした.\nただ，この手法は例えばtableのようなMarkdown記法でタイトルを付与できない要素に対しては使えないため，画像やコード，テーブル等の直下の\u003ccode\u003eem\u003c/code\u003eや\u003ccode\u003estrong\u003c/code\u003eをcaptionとみなすといったやり方に移行すると思う.\u003c/p\u003e\n\u003ch3 id=\"commit-log\"\u003e\u003ca href=\"#commit-log\"\u003eCommit Log\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e各記事の編集履歴を表示する\u003cstrong\u003eCommits\u003c/strong\u003eコンポーネント(↓の\u003cstrong\u003eCommits\u003c/strong\u003e).\u003c/p\u003e\n\u003cp\u003eやっていることは単純で，\u003ccode\u003egetStaticProps\u003c/code\u003e呼び出し時に該当するファイルに対してのGit履歴を取得しているだけ.\u003c/p\u003e\n\u003ch3 id=\"table-of-contents\"\u003e\u003ca href=\"#table-of-contents\"\u003eTable of Contents\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e現在のページにあるheadingsから目次を構築するコンポーネント(→の目次.表示されてない人は1200px以上の画面で見てね).\u003c/p\u003e\n\u003cp\u003eこれは単に実装したことがなかったから作った\u003csup id=\"fnref-4\"\u003e\u003ca href=\"#fn-4\" class=\"footnote-ref\"\u003e4\u003c/a\u003e\u003c/sup\u003e.\n原理は単純で，現在のスクロール位置を取得して，通り過ぎたheadingのうち最も近いものをhighlightしている.\n最初はmarkdownを与えてheadingを抽出するやり方にしていたけど，markdown外にあるCommitsやComments等，そのページにあるheadingを動的に抽出する方針に切り替えた.\u003c/p\u003e\n\u003ch3 id=\"comments\"\u003e\u003ca href=\"#comments\"\u003eComments\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eGitHub Issueと連携したコメントコンポーネント(↓の\u003cstrong\u003eComments\u003c/strong\u003e).\n\u003ca href=\"https://utteranc.es\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eutterances\u003c/a\u003eというサービスを利用した. ブログからコメントするにはGitHub AccountでのAuthが必要だけど，\u003ca href=\"https://github.com/koka831/blog/issues\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eIssues\u003c/a\u003eに直接コメントすることもできる.\u003c/p\u003e\n\u003ch2 id=\"これから\"\u003e\u003ca href=\"#%E3%81%93%E3%82%8C%E3%81%8B%E3%82%89\"\u003eこれから\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eフリーランスとしてのお仕事も現在は募集しておらず，自身の身の振り方については少なくとも今年いっぱいは考える予定.\nとりあえずプライベートではアルゴリズムやデータ構造等再度やっていこうと思う.\u003c/p\u003e\n\u003cp\u003e紅茶コーディネータについては年初からの受講なので，順調に行けば今年の秋ころには取れるかなあ，という感じ.\nミーハーなので今年のセカンドフラッシュを楽しみにしてたりする.\u003c/p\u003e\n\u003cdiv class=\"footnotes\"\u003e\n\u003chr\u003e\n\u003col\u003e\n\u003cli id=\"fn-tea\"\u003e余談だけど茶葉のテイスティングカップ，料理の際に調味料を混ぜる小さい容器に最適すぎる\u003ca href=\"#fnref-tea\" class=\"footnote-backref\"\u003e↩\u003c/a\u003e\u003c/li\u003e\n\u003cli id=\"fn-1\"\u003emdastは\u003ca href=\"https://github.com/syntax-tree/unist\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eunist\u003c/a\u003eという規格に従っていて，他にはHTMLのunist表記である\u003ca href=\"https://github.com/syntax-tree/hast\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ehast\u003c/a\u003eなどがある. またmdastのプロセッサ実装(remark)があるように，hastのプロセッサには\u003ca href=\"https://github.com/rehypejs/rehype\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003erehype\u003c/a\u003eがある.\u003ca href=\"#fnref-1\" class=\"footnote-backref\"\u003e↩\u003c/a\u003e\u003c/li\u003e\n\u003cli id=\"fn-2\"\u003eremark内部で使っている\u003ca href=\"https://github.com/remarkjs/remark/pull/536\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eライブラリの移行\u003c/a\u003eが2020後半にあって，npmに上がっているプラグインの中にも動作しないものが少なくない. 実際動作するプラグインの中には(This plugin is made for the new parser in remark (micromark, see remarkjs/remark#536).)のように注釈があったりする.\u003ca href=\"#fnref-2\" class=\"footnote-backref\"\u003e↩\u003c/a\u003e\u003c/li\u003e\n\u003cli id=\"fn-3\"\u003e大元は\u003ca href=\"https://talk.commonmark.org/t/generic-directives-plugins-syntax/444/155\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eこれ\u003c/a\u003eっぽい.\u003ca href=\"#fnref-3\" class=\"footnote-backref\"\u003e↩\u003c/a\u003e\u003c/li\u003e\n\u003cli id=\"fn-4\"\u003e今回UIコンポーネントライブラリは一切使わなかった. \u003cdel\u003eコストとは\u003c/del\u003e\u003ca href=\"#fnref-4\" class=\"footnote-backref\"\u003e↩\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e","description":"scratch new blog with Next.js; switched from VuePress","commits":[{"title":"add link to github","date":"2021-04-27 22:23:26","hash":"de03b5e2","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"de03b5e2.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit de03b5e21ad5799aed5d6ba2c87af059a6115aa2\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Tue Apr 27 22:23:26 2021 +0900\n\n  add link to github\n\ndiff --git a/_posts/2021-04-25-nextjs-from-vuepress.md b/_posts/2021-04-25-nextjs-from-vuepress.md\nindex f99a404..e2e9415 100644\n\u003cspan class=\"token deleted\"\u003e--- a/_posts/2021-04-25-nextjs-from-vuepress.md\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2021-04-25-nextjs-from-vuepress.md\u003c/span\u003e\n@@ -16,6 +16,7 @@ description: scratch new blog with Next.js; switched from VuePress\n\n\u003cspan class=\"token deleted\"\u003e- [VuePress][vuepress]のアルファ版を使っていて，メンテが辛くなった\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e- [Next.js][next] + [remark][remark]でMarkdown-\u0026#x26;gt;HTMLのSSGを構築した\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- [できたもの](https://github.com/koka831/koka831.github.io)\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e## About\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"},{"title":"add","date":"2021-04-27 16:59:33","hash":"ae6500c9","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"ae6500c9.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit ae6500c9b2a3b5fd76fbf543286171fd2fb60b3f\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Tue Apr 27 16:59:33 2021 +0900\n\n  add\n\ndiff --git a/_posts/2021-04-25-nextjs-from-vuepress.md b/_posts/2021-04-25-nextjs-from-vuepress.md\nnew file mode 100644\nindex 0000000..f99a404\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2021-04-25-nextjs-from-vuepress.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,211 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: 'Renewal Blog'\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2021-04-26\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Diary\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tags:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Diary\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+description: scratch new blog with Next.js; switched from VuePress\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+1年ぶりになります．今年もよろしくお願いします．\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+最近は紅茶コーディネータになるべく日々精進しています[^tea]．\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## TL;DR\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- [VuePress][vuepress]のアルファ版を使っていて，メンテが辛くなった\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- [Next.js][next] + [remark][remark]でMarkdown-\u0026#x26;gt;HTMLのSSGを構築した\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## About\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ブログを書こうと思い立って，以前構築したブログを久々に確認した.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+今つかってるパソコンにブログのソースコードを持ってきていなかったので，`npm install`すると脆弱性の嵐.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```shell-session[data-file=\"terminal\"]\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$npm i\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+removed 22 packages, changed 14 packages, and audited 1090 packages in 8s\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+33 vulnerabilities (7 low, 15 moderate, 11 high)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+To address issues that do not require attention, run:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  npm audit fix\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+To address all issues, run:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  npm audit fix --force\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Run `npm audit` for details.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+また，ブログシステムのベースに使っているVuePressが0.xから1.8までバージョンアップしていたので，これは追従しよう.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+しかし早々に更新を断念. デザインをフルスクラッチでやるためにVuePressのソースを`eject`していたため，追従をすべて手でやる必要があった.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ブログ自体のメンテにはそこまでコストをかけてられないので，今度は`eject`しなくてもデザインを触れるライブラリを選定することにした.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- 開発言語自体にはこだわりはないが，型システムはほしい\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- マークダウンで書ける\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- サーバ管理は避けたいので，GitHub Pagesに載せられるもの\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+を探した.最終的には次の2つから選んだ. ~結局相当のyak shavingが発生した.~\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### Gatsby.js\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[Gatsby.js][gatsby]はReact.jsをベースにしたリッチなCMSフレームワーク.バックエンドとはGraphQLで連携し，コンテンツの取得は[contentful][contentful]+Markdownだったりと選定の自由度が高い.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+SSGのプロセスについてもAPIの呼び出し回数は全ページに対して1回で済む(ようなquery buildをする必要はある)ようなので，productionでの利用をするならGatsby.jsを選ぶと思う.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### Next.js\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[Next.js][next]はGatsby.jsと比べると薄いフレームワークで，ビルドやルーティング等ベースとなる機能の提供がメインになっている.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Server-Side Generationの仕組みはあるが，Gatsby.jsほどの最適化は行われていない感じ.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+したがってCMSとして使うためにはそれ相当の機能の実装が必要となるため，~コストは高い~面白そう.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## Artifacts\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[これ][blog]ができた.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### Architecture\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Next.jsの[`getStaticProps`][getStaticProps]と[`getStaticPaths`][getStaticPaths]を用いて一覧・詳細ページをSSG.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+コンテンツはMarkdownで記述し，[remark][remark]を用いてHTMLを生成している．\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Next.js側でも[MDX][mdx](Markdown+React Component)を描画できる仕組みがあったけど，内部で呼ばれているコンパイラに手を加えるのに難儀したため，情報の多いremarkを選んだ.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+([amdx][amdx]はマジですごいと思う)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+remarkはMarkdownを入力として，指定した形式での出力を行うプロセッサで，fig.1のように`Parser`，`Transformer`や`Compiler`といったプラグインを処理に挟むことができる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+受け取ったMarkdownは[mdast][mdast][^1]という形式のastに変換され，プラグインはmdastを受取りmdastを返すよう要求される.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```asciidoc[data-file=\"process\"]\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+| ........................ process ........................... |\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+| .......... parse ... | ... run ... | ... stringify ..........|\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+          +--------+                     +----------+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Input -\u0026#x26;gt;- | Parser | -\u0026#x26;gt;- Syntax Tree -\u0026#x26;gt;- | Compiler | -\u0026#x26;gt;- Output\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+          +--------+          |          +----------+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+                              X\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+                              |\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+                       +--------------+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+                       | Transformers |\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+                       +--------------+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+**fig.1 remarkの変換プロセス. 図はベースとなるunifiedから. [[出典][unified-process]]**\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+このブログではそこそこプラグインを使っていて，中には自作したものもある[^2].\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```typescript[data-file=\"interpreter.ts\"][class=\"line-numbers\"]\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+const markdownToHtml = async (markdown: string): Promise\u0026#x26;lt;string\u0026#x26;gt; =\u0026#x26;gt; {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  const result = await remark()\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    .use(gfm) // remark-gfm\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    .use(math) // remark-math\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    .use(emoji) // remark-emoji\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    .use(container) // 自作 | VuePressで使っていたCustom Container記法に対応\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    .use(caption) // 自作 | Markdown中の画像に対して通し番号+figcaptionを付与\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    .use(prism) // remark-prism\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    .use(externalLink) // remark-external-links\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    .use(slug) // remark-slug\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    .use(headings, { behavior: \"wrap\" }) // remark-autolink-headings\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    .use(footnotes) // remark-footnotes\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    .use(remark2rehype) // remark-rehype | mdastからhast形式へ変換\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    .use(katex) // rehype-katex | remark-mathで変換したmarkdownでの数式をkatex記法へ変換\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    .use(stringify) // rehype-stringify\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    .process(markdown);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  return result.toString();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+};\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+**fig.2 プラグイン一覧**\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### remark plugin\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+実際作ってみると結構簡単に実装できる. READMEにあるサンプルだと型情報がなかったりで結構辛いけど，fig.1と[guide][unified-guide]が参考になる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+* **remark-container**\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+もともと使っていたVuePressでは，Custom Containersと呼ばれるMarkdownの拡張記法が使える[^3].\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```markdown[data-file=\"custom-container.md\"]\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+::: info Custom Title\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Custom Container Body\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+:::\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+**fig.3 これがこうじゃ**\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+::: info Custom Title\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Custom Container Body\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+:::\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+remark版を探すといくつか見つかったけど，どれも動かなかったので作ることにした.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+実装は正規表現でdirectiveにマッチした行のastを書き換えるもので，単純なため対応してないケースもある(directive内のcode blockとかnodeが分割されるケース).\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+これらの対応は[remark-directive][remark-directive]を用いて後々やりたい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+* **remark-image-caption**\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+img要素のようなself-closing tagについては`::before`等の疑似要素が使えないため，例えばMarkdownで記述した画像のタイトルをCSSのみで抽出・表示するといったことができない．\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+画像に対してcaptionを付与するプラグインは動作するいくつか見つかったけど，画像に対して連番を振ってくれるようなものは見当たらなかった.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```markdown[data-file=\"image.md\"]\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+![alt text](image.png \"image title\")\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+![alt text](/img/icon.png \"image title\")\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+今回作成したプラグインでは，画像を`\u0026#x26;lt;figure\u0026#x26;gt;`タグで囲んでタイトルを`\u0026#x26;lt;figcaption\u0026#x26;gt;`に設定するようにした.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ただ，この手法は例えばtableのようなMarkdown記法でタイトルを付与できない要素に対しては使えないため，画像やコード，テーブル等の直下の`em`や`strong`をcaptionとみなすといったやり方に移行すると思う.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### Commit Log\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+各記事の編集履歴を表示する**Commits**コンポーネント(↓の**Commits**).\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+やっていることは単純で，`getStaticProps`呼び出し時に該当するファイルに対してのGit履歴を取得しているだけ.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### Table of Contents\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+現在のページにあるheadingsから目次を構築するコンポーネント(→の目次.表示されてない人は1200px以上の画面で見てね).\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+これは単に実装したことがなかったから作った[^4].\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+原理は単純で，現在のスクロール位置を取得して，通り過ぎたheadingのうち最も近いものをhighlightしている.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+最初はmarkdownを与えてheadingを抽出するやり方にしていたけど，markdown外にあるCommitsやComments等，そのページにあるheadingを動的に抽出する方針に切り替えた.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### Comments\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+GitHub Issueと連携したコメントコンポーネント(↓の**Comments**).\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[utterances][utterances]というサービスを利用した. ブログからコメントするにはGitHub AccountでのAuthが必要だけど，[Issues][issues]に直接コメントすることもできる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## これから\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+フリーランスとしてのお仕事も現在は募集しておらず，自身の身の振り方については少なくとも今年いっぱいは考える予定.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+とりあえずプライベートではアルゴリズムやデータ構造等再度やっていこうと思う.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+紅茶コーディネータについては年初からの受講なので，順調に行けば今年の秋ころには取れるかなあ，という感じ.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ミーハーなので今年のセカンドフラッシュを楽しみにしてたりする.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[blog]: https://koka831.github.io/\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[vuepress]: https://vuepress.vuejs.org/\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[next]: https://nextjs.org/\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[remark]: https://github.com/remarkjs/remark\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[remark-directive]: https://github.com/remarkjs/remark-directive\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[gatsby]: https://www.gatsbyjs.com/\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[contentful]: https://www.contentful.com/\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[getStaticProps]: https://nextjs.org/docs/basic-features/data-fetching#getstaticprops-static-generation\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[getStaticPaths]: https://nextjs.org/docs/basic-features/data-fetching#getstaticpaths-static-generation\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[mdx]: https://nextjs.org/blog/markdown\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[amdx]: https://github.com/mizchi/amdx\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[unified-process]: https://github.com/unifiedjs/unified#description\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[unified-guide]: https://unifiedjs.com/learn/guide/create-a-plugin/\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[unist]: https://github.com/syntax-tree/unist\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[mdast]: https://github.com/syntax-tree/mdast\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[hast]: https://github.com/syntax-tree/hast\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[rehype]: https://github.com/rehypejs/rehype\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[remark#536]: https://github.com/remarkjs/remark/pull/536\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[utterances]: https://utteranc.es\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[issues]: https://github.com/koka831/blog/issues\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[^tea]: 余談だけど茶葉のテイスティングカップ，料理の際に調味料を混ぜる小さい容器に最適すぎる\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[^1]: mdastは[unist][unist]という規格に従っていて，他にはHTMLのunist表記である[hast][hast]などがある. またmdastのプロセッサ実装(remark)があるように，hastのプロセッサには[rehype][rehype]がある.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[^2]: remark内部で使っている[ライブラリの移行][remark#536]が2020後半にあって，npmに上がっているプラグインの中にも動作しないものが少なくない. 実際動作するプラグインの中には(This plugin is made for the new parser in remark (micromark, see remarkjs/remark#536).)のように注釈があったりする.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[^3]: 大元は[これ](https://talk.commonmark.org/t/generic-directives-plugins-syntax/444/155)っぽい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[^4]: 今回UIコンポーネントライブラリは一切使わなかった. ~コストとは~\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2021-04-26","updatedAt":"2021-04-27"},{"slug":"2020-06-05-install-arch-linux","title":"Install Arch Linux","categories":["Diary"],"image":"https://koka831.github.io/img/icon.png","tags":["Linux"],"content":"\u003ch2 id=\"0-partition-table\"\u003e\u003ca href=\"#0-partition-table\"\u003e0. Partition Table\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eインストール先のディスク名を調べる.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"terminal\" class=\"language-shell-session\"\u003e\u003ccode class=\"language-shell-session\"\u003e\u003cspan class=\"token output\"\u003e$fdisk -l\u003c/span\u003e\n\u003cspan class=\"token output\"\u003ebar\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"1-reset-partition\"\u003e\u003ca href=\"#1-reset-partition\"\u003e1. Reset Partition\u003c/a\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003ecgdisk/sgdiskを使う\n\u003cul\u003e\n\u003cli\u003ecgdiskがcursesベースなので使いやすい\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell-session\"\u003e\u003ccode class=\"language-shell-session\"\u003e\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003ecgdisk /dev/nvme0n1\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell-session\"\u003e\u003ccode class=\"language-shell-session\"\u003e\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e\u003cspan class=\"token function\"\u003els\u003c/span\u003e -la\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e最低限必要なpartitionは以下の3つ.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e/boot/efi: EFI\u003c/li\u003e\n\u003cli\u003e/boot    : Linux FS\u003c/li\u003e\n\u003cli\u003e/ (root) : Linux FS\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eブートセクタの開始領域がEFIになっている必要があるので、上から順に設定していく.\n/boot/efiが/bootに入れ子になっているが, mount時に調整する.\u003c/p\u003e\n\u003ch3 id=\"efi-partition\"\u003e\u003ca href=\"#efi-partition\"\u003eEFI partition\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e/boot/efi partition\n\u003cul\u003e\n\u003cli\u003eFirst Sector: Enter(default)\u003c/li\u003e\n\u003cli\u003eSize in sectors: 512M\u003c/li\u003e\n\u003cli\u003eHex code or GUID: ef00\u003c/li\u003e\n\u003cli\u003eEnter new partition name: EFI System\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"boot-partition\"\u003e\u003ca href=\"#boot-partition\"\u003eboot partition\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e/boot\n\u003cul\u003e\n\u003cli\u003eFirst Sector: Enter(default)\u003c/li\u003e\n\u003cli\u003eSize: 512M\u003c/li\u003e\n\u003cli\u003eHex: 8300\u003c/li\u003e\n\u003cli\u003eEnter new partition name: Linux filesystem\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"root-partition\"\u003e\u003ca href=\"#root-partition\"\u003eroot partition\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e/\n\u003cul\u003e\n\u003cli\u003eFirst Sector: Enter(default)\u003c/li\u003e\n\u003cli\u003eSize: Enter(default=max)\u003c/li\u003e\n\u003cli\u003eHex: 8300\u003c/li\u003e\n\u003cli\u003eEnter new partition name: Linux filesystem\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"result-of-partitioning\"\u003e\u003ca href=\"#result-of-partitioning\"\u003eResult of partitioning\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e512G SSDを対象に行うと以下のようになる.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell-session\"\u003e\u003ccode class=\"language-shell-session\"\u003e\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e\u003cspan class=\"token function\"\u003efdisk\u003c/span\u003e -l\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eDevice          Start   End             Sectors Size    Type\u003c/span\u003e\n\u003cspan class=\"token output\"\u003e/dev/nvme0n1p1  2048    1050623         1048576 512M    Efi system\u003c/span\u003e\n\u003cspan class=\"token output\"\u003e/dev/nvme0n1p2 1050624  2099199         1048576 512M    Linux filesystem\u003c/span\u003e\n\u003cspan class=\"token output\"\u003e/dev/nvme0n1p3  2099200 1000215182    998115983 476G    Linux filesystem\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"2-disk-format\"\u003e\u003ca href=\"#2-disk-format\"\u003e2. Disk Format\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003emkfsを用いて各partitionをフォーマットする.\u003cbr\u003e\nefi領域はFAT32指定、その他Linux filesystemの領域はext4等好みのファイルシステムを用いる.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell-session\"\u003e\u003ccode class=\"language-shell-session\"\u003e\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003emkfs.fat -F32 /dev/nvme0n1p1\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003emkfs.ext4 /dev/nvme0n1p2\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003emkfs.ext4 /dev/nvme0n1p3\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"3-mount-volume\"\u003e\u003ca href=\"#3-mount-volume\"\u003e3. Mount Volume\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e1, 2で作成したpartitionをboot USBからアクセスできるようにマウントする.\n1.で行ったパーティショニングとマウントの順番が異なるので注意(1敗).\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell-session\"\u003e\u003ccode class=\"language-shell-session\"\u003e\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e#\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e/root\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e\u003cspan class=\"token function\"\u003emount\u003c/span\u003e /dev/nvme0n1p3 /mnt\u003c/span\u003e\u003c/span\u003e\n\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e#\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e/boot\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e\u003cspan class=\"token function\"\u003emkdir\u003c/span\u003e /mnt/boot\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e\u003cspan class=\"token function\"\u003emount\u003c/span\u003e /dev/nvme0n1p2 /mnt/boot\u003c/span\u003e\u003c/span\u003e\n\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e#\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e/boot/efi\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e\u003cspan class=\"token function\"\u003emkdir\u003c/span\u003e /mnt/boot/efi\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e\u003cspan class=\"token function\"\u003emount\u003c/span\u003e /dev/nvme0n1p1 /mnt/boot/efi\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"4-install-linux-system\"\u003e\u003ca href=\"#4-install-linux-system\"\u003e4. Install Linux system\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"setup-repository-mirror\"\u003e\u003ca href=\"#setup-repository-mirror\"\u003eSetup repository mirror\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003ccode\u003e/etc/pacman.d/mirrorlist\u003c/code\u003eを編集し現在位置から距離の近いミラーを一番上にもってくる.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell-session\"\u003e\u003ccode class=\"language-shell-session\"\u003e\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e\u003cspan class=\"token function\"\u003evim\u003c/span\u003e /etc/pacman.d/mirrorlist\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e#\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003euse mirror \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e Japan\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3 id=\"install-base-system\"\u003e\u003ca href=\"#install-base-system\"\u003eInstall base system\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eマウントした\u003ccode\u003e/root\u003c/code\u003eに対してLinuxやその後の作業に必要な諸々をインストールする.\n後述する5.1でマウント領域に\u003ccode\u003echroot\u003c/code\u003eしたあとはboot USB内のデフォルトツール類が使えなくなるので, エディタはここでインストールしておく.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell-session\"\u003e\u003ccode class=\"language-shell-session\"\u003e\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e#\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003elinux base system\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token output\"\u003epacstrap /mnt base linux linux-firmware\u003c/span\u003e\n\u003cspan class=\"token output\"\u003e\u003c/span\u003e\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e#\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e\u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e wifi\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token output\"\u003epacstrap /mnt base-devel grub efibootmgr dosfstools netctl iw wpa_supplicant networkmanager dialog vim\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3 id=\"generate-fstab-file\"\u003e\u003ca href=\"#generate-fstab-file\"\u003egenerate fstab file\u003c/a\u003e\u003c/h3\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-sh\"\u003e\u003ccode class=\"language-sh\"\u003egenfstab -U /mnt \u0026#x26;gt;\u0026#x26;gt; /mnt/etc/fstab\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3 id=\"check-filesystem\"\u003e\u003ca href=\"#check-filesystem\"\u003echeck filesystem\u003c/a\u003e\u003c/h3\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell-session\"\u003e\u003ccode class=\"language-shell-session\"\u003e\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e\u003cspan class=\"token function\"\u003ecat\u003c/span\u003e /mnt/etc/fstab\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token output\"\u003e/dev/nvme0n1p3 /         ext4 rw,relatime 0 1\u003c/span\u003e\n\u003cspan class=\"token output\"\u003e/dev/nvme0n1p2 /boot     ext4 rw,relatime 0 2\u003c/span\u003e\n\u003cspan class=\"token output\"\u003e/dev/nvme0n1p1 /boot/efi vfat rw,relatime,fmask=0022,codepage=... 0 2\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"5-enter-arch\"\u003e\u003ca href=\"#5-enter-arch\"\u003e5 enter arch!\u003c/a\u003e\u003c/h2\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell-session\"\u003e\u003ccode class=\"language-shell-session\"\u003e\u003cspan class=\"token output\"\u003earch-chroot /mnt /bin/bash\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3 id=\"setup-localetimezone\"\u003e\u003ca href=\"#setup-localetimezone\"\u003eSetup locale/timezone\u003c/a\u003e\u003c/h3\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell-session\"\u003e\u003ccode class=\"language-shell-session\"\u003e\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e#\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003elocale\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e\u003cspan class=\"token function\"\u003evim\u003c/span\u003e /etc/locale.gen\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e#\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003euncomment en_US.UTF-8 and ja_JP.UTF-8\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003elocale-gen\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e\u003cspan class=\"token builtin class-name\"\u003eecho\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"LANG=en_US.UTF-8\"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e /etc/locale.conf\u003c/span\u003e\u003c/span\u003e\n\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e#\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003etimezone\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003etzselect \u003cspan class=\"token number\"\u003e4\u003c/span\u003e, \u003cspan class=\"token number\"\u003e19\u003c/span\u003e, \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003ehwclock --systohc --utc\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3 id=\"setup-bootloader\"\u003e\u003ca href=\"#setup-bootloader\"\u003eSetup bootloader\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003ebootloaderの作成.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell-session\"\u003e\u003ccode class=\"language-shell-session\"\u003e\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003emkinitcpio -p linux\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003egrub-install --target\u003cspan class=\"token operator\"\u003e=\u003c/span\u003ex86_64-efi --efi-directory\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e/boot/efi --bootloader-id\u003cspan class=\"token operator\"\u003e=\u003c/span\u003earch --boot-directory\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e/boot/efi/EFI --recheck\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e\u003cspan class=\"token function\"\u003egrub-mkconfig\u003c/span\u003e -o /boot/efi/EFI/grub/grub.cfg\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3 id=\"change-root-password--add-user\"\u003e\u003ca href=\"#change-root-password--add-user\"\u003eChange Root password \u0026#x26; add User\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e5.4にてリブートする前にユーザを作成しておく(1敗).\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell-session\"\u003e\u003ccode class=\"language-shell-session\"\u003e\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e\u003cspan class=\"token function\"\u003epasswd\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e\u003cspan class=\"token function\"\u003euseradd\u003c/span\u003e -m -g \u003cspan class=\"token function\"\u003eusers\u003c/span\u003e -G wheel -s /bin/bash koka\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e\u003cspan class=\"token function\"\u003epasswd\u003c/span\u003e koka\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003evisudo \u003cspan class=\"token comment\"\u003e# and uncomment %Wheel all=(all) all\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3 id=\"reboot--eject-usb\"\u003e\u003ca href=\"#reboot--eject-usb\"\u003eReboot \u0026#x26; eject USB\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eシャットダウンしてbootUSBを取り外し再起動する\u003c/p\u003e\n\u003ch2 id=\"6-setup-arch-linux\"\u003e\u003ca href=\"#6-setup-arch-linux\"\u003e6. Setup Arch Linux\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"network\"\u003e\u003ca href=\"#network\"\u003enetwork\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003ewifiの設定.\n\u003ccode\u003enmtui\u003c/code\u003eが好きなのでNetworkManagerを用いた.\nセットアップ後の開発において\u003ccode\u003esystemd-nspawn\u003c/code\u003eを使う場合, ネットワークアダプタは\u003ccode\u003esystemd-networkd\u003c/code\u003eなのでそっちの場合は\u003ccode\u003esystemd\u003c/code\u003eに統一しといたほうが後々楽.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell-session\"\u003e\u003ccode class=\"language-shell-session\"\u003e\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003esystemctl start NetworkManager\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003esystemctl \u003cspan class=\"token builtin class-name\"\u003eenable\u003c/span\u003e NetworkManager\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003enmtui\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3 id=\"setup-x-window-system\"\u003e\u003ca href=\"#setup-x-window-system\"\u003eSetup X Window System\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://wiki.archlinux.jp/index.php/Xorg\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eref\u003c/a\u003e\nCUIからGUIへ.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell-session\"\u003e\u003ccode class=\"language-shell-session\"\u003e\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003elspci \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token function\"\u003egrep\u003c/span\u003e -e VGA -e 3D\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e\u003cspan class=\"token comment\"\u003e# XとDMとしてlight DM(とログイン画面)をインストール\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003epacman -S xf86-video-intel xorg-server xorg-xrdb lightdm lightdm-gtk-greeter\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e\u003cspan class=\"token comment\"\u003e# terminal emulatorも入ってないので何かしらいれとく(1敗)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003epacman -S rxvt-unicode\u003c/span\u003e\u003c/span\u003e\n\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003esystemctl \u003cspan class=\"token builtin class-name\"\u003eenable\u003c/span\u003e lightdm\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e\u003cspan class=\"token comment\"\u003e# WMをインストール\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003epacman -S i3-gaps i3status dmenu\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e\u003cspan class=\"token comment\"\u003e# tlp/バッテリ最適化モジュール\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003epacman -S tlp\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e\u003cspan class=\"token comment\"\u003e# フォント\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e\u003cspan class=\"token comment\"\u003e# ブラウザやアプリはデフォだとシステム設定のフォント読まずに表示が汚くなるので、\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e\u003cspan class=\"token comment\"\u003e# デフォ指定に含まれているttf-dejavuを入れとく(Ubuntuのデフォフォント).\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003epacman -S ttf-fira-code oft-ipamjfont ttf-dejavu\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003epacman -S xorg-xbacklight \u003cspan class=\"token comment\"\u003e# 画面の明るさ\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003epacman -S pulseaudio-alsa alsa-utils alsa-plugins \u003cspan class=\"token comment\"\u003e# 音量\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","description":"log","commits":[{"title":"fix some","date":"2021-10-13 23:48:16","hash":"fc674d6b","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"fc674d6b.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit fc674d6b05dbbc38f77579f9120500b8c4a81926\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Wed Oct 13 23:48:16 2021 +0900\n\n  fix some\n\ndiff --git a/_posts/2020-06-05-install-arch-linux.md b/_posts/2020-06-05-install-arch-linux.md\nindex f71dd06..1e2b358 100644\n\u003cspan class=\"token deleted\"\u003e--- a/_posts/2020-06-05-install-arch-linux.md\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2020-06-05-install-arch-linux.md\u003c/span\u003e\n@@ -21,20 +21,7 @@ bar\n   - cgdiskがcursesベースなので使いやすい\n\n\\```shell-session\n\u003cspan class=\"token deleted\"\u003e-$echo $EDITOR\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-vim\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-$git checkout master\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-Switched to branch 'master'\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-Your branch is up-to-date with 'origin/master'\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-#foo\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-$git push\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-Everything up-to-date\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-[sudo] password for koka:\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-$echo 'All\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-\u0026#x26;gt; done!'\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-All\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-done!\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-$cgdisk /dev/nvme0n1\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ cgdisk /dev/nvme0n1\u003c/span\u003e\n\\```\n\n\\```shell-session\n@@ -78,7 +65,7 @@ $ ls -la\n\u003cspan class=\"token comment\"\u003e### Result of partitioning\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e- 512G SSDを対象に行うと以下のようになる.\u003c/span\u003e\n\n\u003cspan class=\"token deleted\"\u003e-\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```shell-session\u003c/span\u003e\n$ fdisk -l\nDevice          Start   End             Sectors Size    Type\n/dev/nvme0n1p1  2048    1050623         1048576 512M    Efi system\n@@ -90,10 +77,10 @@ Device          Start   End             Sectors Size    Type\nmkfsを用いて各partitionをフォーマットする.  \nefi領域はFAT32指定、その他Linux filesystemの領域はext4等好みのファイルシステムを用いる.\n\n\u003cspan class=\"token deleted\"\u003e-\\```sh\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-mkfs.fat -F32 /dev/nvme0n1p1\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-mkfs.ext4 /dev/nvme0n1p2\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-mkfs.ext4 /dev/nvme0n1p3\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```shell-session\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ mkfs.fat -F32 /dev/nvme0n1p1\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ mkfs.ext4 /dev/nvme0n1p2\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ mkfs.ext4 /dev/nvme0n1p3\u003c/span\u003e\n\\```\n\n\u003cspan class=\"token comment\"\u003e## 3. Mount Volume\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"},{"title":"fix","date":"2021-04-25 14:18:15","hash":"dae19db3","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"dae19db3.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit dae19db337b318bfe27a5713113f2e56341e0b2e\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sun Apr 25 14:18:15 2021 +0900\n\n  fix\n\ndiff --git a/_posts/2020-06-05-install-arch-linux.md b/_posts/2020-06-05-install-arch-linux.md\nindex 0bff7c6..f71dd06 100644\n\u003cspan class=\"token deleted\"\u003e--- a/_posts/2020-06-05-install-arch-linux.md\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2020-06-05-install-arch-linux.md\u003c/span\u003e\n@@ -16,13 +16,6 @@ $fdisk -l\nbar\n\\```\n\n\u003cspan class=\"token deleted\"\u003e-[[info | custom container]]\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-| content\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-| bar\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-multi line\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e## 1. Reset Partition\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e- cgdisk/sgdiskを使う\u003c/span\u003e\n   - cgdiskがcursesベースなので使いやすい\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"},{"title":"wip","date":"2021-03-05 18:48:41","hash":"70a0aff5","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"70a0aff5.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 70a0aff5a83d4332a8c3ccff3d2d3c1c84e46ef2\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Fri Mar 5 18:48:41 2021 +0900\n\n  wip\n\ndiff --git a/_posts/2020-06-05-install-arch-linux.md b/_posts/2020-06-05-install-arch-linux.md\nindex f71dd06..0bff7c6 100644\n\u003cspan class=\"token deleted\"\u003e--- a/_posts/2020-06-05-install-arch-linux.md\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2020-06-05-install-arch-linux.md\u003c/span\u003e\n@@ -16,6 +16,13 @@ $fdisk -l\nbar\n\\```\n\n\u003cspan class=\"token inserted\"\u003e+[[info | custom container]]\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+| content\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+| bar\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+multi line\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e## 1. Reset Partition\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e- cgdisk/sgdiskを使う\u003c/span\u003e\n   - cgdiskがcursesベースなので使いやすい\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"},{"title":"update","date":"2021-02-15 00:34:10","hash":"bd59f09a","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"bd59f09a.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit bd59f09a33181a1f762978251b6b4d7eb0095a09\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Mon Feb 15 00:34:10 2021 +0900\n\n  update\n\ndiff --git a/_posts/2020-06-05-install-arch-linux.md b/_posts/2020-06-05-install-arch-linux.md\nindex 30bf785..f71dd06 100644\n\u003cspan class=\"token deleted\"\u003e--- a/_posts/2020-06-05-install-arch-linux.md\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2020-06-05-install-arch-linux.md\u003c/span\u003e\n@@ -11,16 +11,34 @@ description: log\n\u003cspan class=\"token comment\"\u003e## 0. Partition Table\u003c/span\u003e\nインストール先のディスク名を調べる.\n\n\u003cspan class=\"token deleted\"\u003e-\\```sh\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-fdisk -l\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```shell-session[data-file=\"terminal\"]\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$fdisk -l\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+bar\u003c/span\u003e\n\\```\n\n\u003cspan class=\"token comment\"\u003e## 1. Reset Partition\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e- cgdisk/sgdiskを使う\u003c/span\u003e\n   - cgdiskがcursesベースなので使いやすい\n\n\u003cspan class=\"token deleted\"\u003e-\\```sh\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-cgdisk /dev/nvme0n1\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```shell-session\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$echo $EDITOR\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+vim\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$git checkout master\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Switched to branch 'master'\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Your branch is up-to-date with 'origin/master'\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+#foo\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$git push\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Everything up-to-date\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[sudo] password for koka:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$echo 'All\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;gt; done!'\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+All\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+done!\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$cgdisk /dev/nvme0n1\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```shell-session\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ ls -la\u003c/span\u003e\n\\```\n\n最低限必要なpartitionは以下の3つ. \n@@ -32,7 +50,7 @@ cgdisk /dev/nvme0n1\nブートセクタの開始領域がEFIになっている必要があるので、上から順に設定していく.\n/boot/efiが/bootに入れ子になっているが, mount時に調整する.\n\n\u003cspan class=\"token deleted\"\u003e-### 1.1 EFI partition\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### EFI partition\u003c/span\u003e\n\n\u003cspan class=\"token deleted\"\u003e- /boot/efi partition\u003c/span\u003e\n   - First Sector: Enter(default)\n@@ -40,7 +58,7 @@ cgdisk /dev/nvme0n1\n   - Hex code or GUID: ef00\n   - Enter new partition name: EFI System\n\n\u003cspan class=\"token deleted\"\u003e-### 1.2 boot partition\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### boot partition\u003c/span\u003e\n\n\u003cspan class=\"token deleted\"\u003e- /boot\u003c/span\u003e\n   - First Sector: Enter(default)\n@@ -48,7 +66,7 @@ cgdisk /dev/nvme0n1\n   - Hex: 8300\n   - Enter new partition name: Linux filesystem\n\n\u003cspan class=\"token deleted\"\u003e-### 1.3 root partition\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### root partition\u003c/span\u003e\n\n\u003cspan class=\"token deleted\"\u003e- /\u003c/span\u003e\n   - First Sector: Enter(default)\n@@ -57,7 +75,7 @@ cgdisk /dev/nvme0n1\n   - Enter new partition name: Linux filesystem\n\n\n\u003cspan class=\"token deleted\"\u003e-### 1.4 Result of partitioning\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### Result of partitioning\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e- 512G SSDを対象に行うと以下のようになる.\u003c/span\u003e\n\n\\```sh\n@@ -82,53 +100,52 @@ mkfs.ext4 /dev/nvme0n1p3\n1, 2で作成したpartitionをboot USBからアクセスできるようにマウントする.\n1.で行ったパーティショニングとマウントの順番が異なるので注意(1敗).\n\n\u003cspan class=\"token deleted\"\u003e-\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```shell-session\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e# /root\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-mount /dev/nvme0n1p3 /mnt\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ mount /dev/nvme0n1p3 /mnt\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e# /boot\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-mkdir /mnt/boot\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-mount /dev/nvme0n1p2 /mnt/boot\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ mkdir /mnt/boot\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ mount /dev/nvme0n1p2 /mnt/boot\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e# /boot/efi\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-mkdir /mnt/boot/efi\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-mount /dev/nvme0n1p1 /mnt/boot/efi\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ mkdir /mnt/boot/efi\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ mount /dev/nvme0n1p1 /mnt/boot/efi\u003c/span\u003e\n\\```\n\n\u003cspan class=\"token comment\"\u003e## 4. Install Linux system\u003c/span\u003e\n\n\u003cspan class=\"token deleted\"\u003e-### 4.1 Setup repository mirror\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### Setup repository mirror\u003c/span\u003e\n`/etc/pacman.d/mirrorlist`を編集し現在位置から距離の近いミラーを一番上にもってくる.\n\n\u003cspan class=\"token deleted\"\u003e-\\```sh\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-vim /etc/pacman.d/mirrorlist\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```shell-session\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ vim /etc/pacman.d/mirrorlist\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e# use mirror in Japan\u003c/span\u003e\n\\```\n\n\n\u003cspan class=\"token deleted\"\u003e-### 4.2 Install base system\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### Install base system\u003c/span\u003e\nマウントした`/root`に対してLinuxやその後の作業に必要な諸々をインストールする.\n後述する5.1でマウント領域に`chroot`したあとはboot USB内のデフォルトツール類が使えなくなるので, エディタはここでインストールしておく.\n\n\n\u003cspan class=\"token deleted\"\u003e-\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```shell-session\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e# linux base system\u003c/span\u003e\npacstrap /mnt base linux linux-firmware\n\u003cspan class=\"token comment\"\u003e# for wifi\u003c/span\u003e\npacstrap /mnt base-devel grub efibootmgr dosfstools netctl iw wpa_supplicant networkmanager dialog vim\n\\```\n\n\u003cspan class=\"token deleted\"\u003e-### 4.3 generate fstab file\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### generate fstab file\u003c/span\u003e\n\n\\```sh\ngenfstab -U /mnt \u0026#x26;gt;\u0026#x26;gt; /mnt/etc/fstab\n\\```\n\n\u003cspan class=\"token deleted\"\u003e-### 4.4 check filesystem\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### check filesystem\u003c/span\u003e\n\n\u003cspan class=\"token deleted\"\u003e-\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```shell-session\u003c/span\u003e\n$ cat /mnt/etc/fstab\n\u003cspan class=\"token deleted\"\u003e-\u003c/span\u003e\n/dev/nvme0n1p3 /         ext4 rw,relatime 0 1\n/dev/nvme0n1p2 /boot     ext4 rw,relatime 0 2\n/dev/nvme0n1p1 /boot/efi vfat rw,relatime,fmask=0022,codepage=... 0 2\n@@ -137,13 +154,13 @@ $ cat /mnt/etc/fstab\n\n\u003cspan class=\"token comment\"\u003e## 5 enter arch!\u003c/span\u003e\n\n\u003cspan class=\"token deleted\"\u003e-\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```shell-session\u003c/span\u003e\narch-chroot /mnt /bin/bash\n\\```\n\n\u003cspan class=\"token deleted\"\u003e-### 5.1 Setup locale/timezone\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### Setup locale/timezone\u003c/span\u003e\n\n\u003cspan class=\"token deleted\"\u003e-\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```shell-session\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e# locale\u003c/span\u003e\n$ vim /etc/locale.gen\n\u003cspan class=\"token comment\"\u003e# uncomment en_US.UTF-8 and ja_JP.UTF-8\u003c/span\u003e\n@@ -155,62 +172,60 @@ $ tzselect 4, 19, 1\n$ hwclock --systohc --utc\n\\```\n\n\u003cspan class=\"token deleted\"\u003e-### 5.2 Setup bootloader\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### Setup bootloader\u003c/span\u003e\nbootloaderの作成.\n\n\u003cspan class=\"token deleted\"\u003e-\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```shell-session\u003c/span\u003e\n$ mkinitcpio -p linux\n$ grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=arch --boot-directory=/boot/efi/EFI --recheck\n$ grub-mkconfig -o /boot/efi/EFI/grub/grub.cfg\n\\```\n\n\u003cspan class=\"token deleted\"\u003e-### 5.3 Change Root password \u0026#x26; add User\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### Change Root password \u0026#x26; add User\u003c/span\u003e\n5.4にてリブートする前にユーザを作成しておく(1敗).\n\n\u003cspan class=\"token deleted\"\u003e-\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```shell-session\u003c/span\u003e\n$ passwd\n$ useradd -m -g users -G wheel -s /bin/bash koka\n$ passwd koka\n$ visudo # and uncomment %Wheel all=(all) all\n\\```\n\u003cspan class=\"token deleted\"\u003e-### 5.4 Reboot \u0026#x26; eject USB\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### Reboot \u0026#x26; eject USB\u003c/span\u003e\nシャットダウンしてbootUSBを取り外し再起動する\n\n\u003cspan class=\"token comment\"\u003e## 6. Setup Arch Linux\u003c/span\u003e\n\n\u003cspan class=\"token deleted\"\u003e-### 6.1 network\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### network\u003c/span\u003e\nwifiの設定.\n`nmtui`が好きなのでNetworkManagerを用いた.\nセットアップ後の開発において`systemd-nspawn`を使う場合, ネットワークアダプタは`systemd-networkd`なのでそっちの場合は`systemd`に統一しといたほうが後々楽.\n\n\u003cspan class=\"token deleted\"\u003e-\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```shell-session\u003c/span\u003e\n$ systemctl start NetworkManager\n$ systemctl enable NetworkManager\n$ nmtui\n\\```\n\n\u003cspan class=\"token deleted\"\u003e-### 6.2 Setup X Window System\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### Setup X Window System\u003c/span\u003e\n[ref](\u003ca href=\"https://wiki.archlinux.jp/index.php/Xorg\" class=\"token url-link\"\u003ehttps://wiki.archlinux.jp/index.php/Xorg\u003c/a\u003e)\nCUIからGUIへ.\n\n\u003cspan class=\"token deleted\"\u003e-\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```shell-session\u003c/span\u003e\n$ lspci | grep -e VGA -e 3D\n\u003cspan class=\"token deleted\"\u003e-# XとDMとしてlight DM(とログイン画面)をインストール\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ # XとDMとしてlight DM(とログイン画面)をインストール\u003c/span\u003e\n$ pacman -S xf86-video-intel xorg-server xorg-xrdb lightdm lightdm-gtk-greeter\n\u003cspan class=\"token deleted\"\u003e-# terminal emulatorも入ってないので何かしらいれとく(1敗)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ # terminal emulatorも入ってないので何かしらいれとく(1敗)\u003c/span\u003e\n$ pacman -S rxvt-unicode\n\u003cspan class=\"token deleted\"\u003e-# \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n$ systemctl enable lightdm\n\u003cspan class=\"token deleted\"\u003e-# WMをインストール\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ # WMをインストール\u003c/span\u003e\n$ pacman -S i3-gaps i3status dmenu\n\u003cspan class=\"token deleted\"\u003e-# tlp/バッテリ最適化モジュール\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ # tlp/バッテリ最適化モジュール\u003c/span\u003e\n$ pacman -S tlp\n\u003cspan class=\"token deleted\"\u003e-# フォント\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-# ブラウザやアプリはデフォだとシステム設定のフォント読まずに表示が汚くなるので、\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-# デフォ指定に含まれているttf-dejavuを入れとく(Ubuntuのデフォフォント).\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ # フォント\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ # ブラウザやアプリはデフォだとシステム設定のフォント読まずに表示が汚くなるので、\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ # デフォ指定に含まれているttf-dejavuを入れとく(Ubuntuのデフォフォント).\u003c/span\u003e\n$ pacman -S ttf-fira-code oft-ipamjfont ttf-dejavu\n\u003cspan class=\"token deleted\"\u003e-# 画面の明るさ\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-$ pacman -S xorg-xbacklight\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-# 音量\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-$ pacman -S pulseaudio-alsa alsa-utils alsa-plugins\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ pacman -S xorg-xbacklight # 画面の明るさ\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ pacman -S pulseaudio-alsa alsa-utils alsa-plugins # 音量\u003c/span\u003e\n\\```\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"},{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"35b550ae.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 35b550ae83af4efaeadf33471c8ca8a32c1079c8\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2020-06-05-install-arch-linux.md b/_posts/2020-06-05-install-arch-linux.md\nnew file mode 100644\nindex 0000000..30bf785\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2020-06-05-install-arch-linux.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,216 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: 'Install Arch Linux'\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2020-06-05\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Diary\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tags:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Linux\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+description: log\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## 0. Partition Table\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+インストール先のディスク名を調べる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fdisk -l\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## 1. Reset Partition\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- cgdisk/sgdiskを使う\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    - cgdiskがcursesベースなので使いやすい\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+cgdisk /dev/nvme0n1\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+最低限必要なpartitionは以下の3つ. \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- /boot/efi: EFI\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- /boot    : Linux FS\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- / (root) : Linux FS\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ブートセクタの開始領域がEFIになっている必要があるので、上から順に設定していく.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+/boot/efiが/bootに入れ子になっているが, mount時に調整する.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 1.1 EFI partition\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- /boot/efi partition\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    - First Sector: Enter(default)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    - Size in sectors: 512M\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    - Hex code or GUID: ef00\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    - Enter new partition name: EFI System\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 1.2 boot partition\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- /boot\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    - First Sector: Enter(default)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    - Size: 512M\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    - Hex: 8300\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    - Enter new partition name: Linux filesystem\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 1.3 root partition\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- /\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    - First Sector: Enter(default)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    - Size: Enter(default=max)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    - Hex: 8300\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    - Enter new partition name: Linux filesystem\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 1.4 Result of partitioning\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- 512G SSDを対象に行うと以下のようになる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ fdisk -l\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Device          Start   End             Sectors Size    Type\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+/dev/nvme0n1p1  2048    1050623         1048576 512M    Efi system\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+/dev/nvme0n1p2 1050624  2099199         1048576 512M    Linux filesystem\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+/dev/nvme0n1p3  2099200 1000215182    998115983 476G    Linux filesystem\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## 2. Disk Format\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+mkfsを用いて各partitionをフォーマットする.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+efi領域はFAT32指定、その他Linux filesystemの領域はext4等好みのファイルシステムを用いる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+mkfs.fat -F32 /dev/nvme0n1p1\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+mkfs.ext4 /dev/nvme0n1p2\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+mkfs.ext4 /dev/nvme0n1p3\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## 3. Mount Volume\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+1, 2で作成したpartitionをboot USBからアクセスできるようにマウントする.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+1.で行ったパーティショニングとマウントの順番が異なるので注意(1敗).\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# /root\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+mount /dev/nvme0n1p3 /mnt\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# /boot\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+mkdir /mnt/boot\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+mount /dev/nvme0n1p2 /mnt/boot\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# /boot/efi\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+mkdir /mnt/boot/efi\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+mount /dev/nvme0n1p1 /mnt/boot/efi\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## 4. Install Linux system\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 4.1 Setup repository mirror\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`/etc/pacman.d/mirrorlist`を編集し現在位置から距離の近いミラーを一番上にもってくる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+vim /etc/pacman.d/mirrorlist\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# use mirror in Japan\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 4.2 Install base system\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+マウントした`/root`に対してLinuxやその後の作業に必要な諸々をインストールする.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+後述する5.1でマウント領域に`chroot`したあとはboot USB内のデフォルトツール類が使えなくなるので, エディタはここでインストールしておく.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# linux base system\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+pacstrap /mnt base linux linux-firmware\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# for wifi\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+pacstrap /mnt base-devel grub efibootmgr dosfstools netctl iw wpa_supplicant networkmanager dialog vim\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 4.3 generate fstab file\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+genfstab -U /mnt \u0026#x26;gt;\u0026#x26;gt; /mnt/etc/fstab\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 4.4 check filesystem\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ cat /mnt/etc/fstab\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+/dev/nvme0n1p3 /         ext4 rw,relatime 0 1\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+/dev/nvme0n1p2 /boot     ext4 rw,relatime 0 2\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+/dev/nvme0n1p1 /boot/efi vfat rw,relatime,fmask=0022,codepage=... 0 2\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## 5 enter arch!\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+arch-chroot /mnt /bin/bash\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 5.1 Setup locale/timezone\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# locale\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ vim /etc/locale.gen\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# uncomment en_US.UTF-8 and ja_JP.UTF-8\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ locale-gen\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ echo \"LANG=en_US.UTF-8\" \u0026#x26;gt; /etc/locale.conf\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# timezone\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ tzselect 4, 19, 1\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ hwclock --systohc --utc\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 5.2 Setup bootloader\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+bootloaderの作成.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ mkinitcpio -p linux\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=arch --boot-directory=/boot/efi/EFI --recheck\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ grub-mkconfig -o /boot/efi/EFI/grub/grub.cfg\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 5.3 Change Root password \u0026#x26; add User\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+5.4にてリブートする前にユーザを作成しておく(1敗).\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ passwd\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ useradd -m -g users -G wheel -s /bin/bash koka\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ passwd koka\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ visudo # and uncomment %Wheel all=(all) all\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 5.4 Reboot \u0026#x26; eject USB\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+シャットダウンしてbootUSBを取り外し再起動する\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## 6. Setup Arch Linux\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 6.1 network\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+wifiの設定.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`nmtui`が好きなのでNetworkManagerを用いた.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+セットアップ後の開発において`systemd-nspawn`を使う場合, ネットワークアダプタは`systemd-networkd`なのでそっちの場合は`systemd`に統一しといたほうが後々楽.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ systemctl start NetworkManager\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ systemctl enable NetworkManager\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ nmtui\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 6.2 Setup X Window System\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[ref](https://wiki.archlinux.jp/index.php/Xorg)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+CUIからGUIへ.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ lspci | grep -e VGA -e 3D\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# XとDMとしてlight DM(とログイン画面)をインストール\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ pacman -S xf86-video-intel xorg-server xorg-xrdb lightdm lightdm-gtk-greeter\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# terminal emulatorも入ってないので何かしらいれとく(1敗)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ pacman -S rxvt-unicode\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ systemctl enable lightdm\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# WMをインストール\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ pacman -S i3-gaps i3status dmenu\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# tlp/バッテリ最適化モジュール\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ pacman -S tlp\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# フォント\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# ブラウザやアプリはデフォだとシステム設定のフォント読まずに表示が汚くなるので、\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# デフォ指定に含まれているttf-dejavuを入れとく(Ubuntuのデフォフォント).\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ pacman -S ttf-fira-code oft-ipamjfont ttf-dejavu\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# 画面の明るさ\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ pacman -S xorg-xbacklight\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# 音量\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ pacman -S pulseaudio-alsa alsa-utils alsa-plugins\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2020-06-05","updatedAt":"2021-10-13"},{"slug":"2019-11-18-abc132-e","title":"Hopscotch Addict","categories":["Competitive Programming"],"image":"https://koka831.github.io/img/icon.png","tags":["AtCoder","Graph"],"content":"\u003ch2 id=\"abc132-e-hopscotch-addict\"\u003e\u003ca href=\"#abc132-e-hopscotch-addict\"\u003eABC132-E Hopscotch Addict\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"概要\"\u003e\u003ca href=\"#%E6%A6%82%E8%A6%81\"\u003e概要\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e有向グラフ\u003ccode\u003eG(N, M)\u003c/code\u003eが与えられ, グラフ上を一度の移動で3頂点進む. 頂点Sから頂点Tまで移動できる場合の最短経路を求める.\u003c/p\u003e\n\u003cp\u003e\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmn\u003e2\u003c/mn\u003e\u003cmo\u003e≤\u003c/mo\u003e\u003cmi\u003eN\u003c/mi\u003e\u003cmo\u003e≤\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003cmsup\u003e\u003cmn\u003e0\u003c/mn\u003e\u003cmn\u003e5\u003c/mn\u003e\u003c/msup\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmn\u003e0\u003c/mn\u003e\u003cmo\u003e≤\u003c/mo\u003e\u003cmi\u003eM\u003c/mi\u003e\u003cmo\u003e≤\u003c/mo\u003e\u003cmi\u003em\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003cmsup\u003e\u003cmn\u003e0\u003c/mn\u003e\u003cmn\u003e5\u003c/mn\u003e\u003c/msup\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003eN\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003eN\u003c/mi\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e2 \\leq N \\leq 10^5, 0 \\leq M \\leq min(10^5, N(N-1))\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.78041em;vertical-align:-0.13597em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e2\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e≤\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8193em;vertical-align:-0.13597em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e≤\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1.008548em;vertical-align:-0.19444em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e1\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord\"\u003e0\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.8141079999999999em;\"\u003e\u003cspan style=\"top:-3.063em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e5\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e0\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e≤\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8193em;vertical-align:-0.13597em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eM\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e≤\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003emin\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord\"\u003e1\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord\"\u003e0\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.8141079999999999em;\"\u003e\u003cspan style=\"top:-3.063em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e5\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e−\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e1\u003c/span\u003e\u003cspan class=\"mclose\"\u003e))\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/p\u003e\n\u003ch3 id=\"考察\"\u003e\u003ca href=\"#%E8%80%83%E5%AF%9F\"\u003e考察\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e頂点Sから頂点Tの経路かつ経路長が3の倍数であるもののうち, 最短のものを求めたい.\n長さが3の倍数であるという制約を扱うために, 以下のようにグラフに遷移状態をもたせる.\u003c/p\u003e\n\u003cdiv class=\"graph-wrapper\"\u003e\n  \u003cdiv class=\"graph\"\u003e\n    \u003cdiv class=\"edge\"\u003eA\u003c/div\u003e\n    \u003cdiv class=\"node\"\u003e\u003c/div\u003e\n    \u003cdiv class=\"edge\"\u003eB\u003c/div\u003e\n    \u003cdiv class=\"node\"\u003e\u003c/div\u003e\n    \u003cdiv class=\"edge\"\u003eC\u003c/div\u003e\n    \u003cdiv class=\"node\"\u003e\u003c/div\u003e\n    \u003cdiv class=\"edge\"\u003eD\u003c/div\u003e\n  \u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv\u003e\n  \u003cdiv class=\"graph\"\u003e\n    \u003cdiv class=\"edge\"\u003eA, 0\u003c/div\u003e\n    \u003cdiv class=\"node\"\u003e\u003c/div\u003e\n    \u003cdiv class=\"edge\"\u003eB, 1\u003c/div\u003e\n    \u003cdiv class=\"node\"\u003e\u003c/div\u003e\n    \u003cdiv class=\"edge\"\u003eC, 2\u003c/div\u003e\n    \u003cdiv class=\"node\"\u003e\u003c/div\u003e\n    \u003cdiv class=\"edge\"\u003eD, 0\u003c/div\u003e\n  \u003c/div\u003e\n\u003c/div\u003e\n\u003cp\u003eこのようにすることで\u003ccode\u003e(A, 0) =\u003e (D, 0)\u003c/code\u003eのパスの長さが3となる.\u003cbr\u003e\nここで\u003ccode\u003eD → A\u003c/code\u003eのパスがあると仮定すると, 二週目は以下のようになる.\u003c/p\u003e\n\u003cdiv class=\"graph-wrapper\"\u003e\n  \u003cdiv class=\"graph\"\u003e\n    \u003cdiv class=\"edge\"\u003eD, 0\u003c/div\u003e\n    \u003cdiv class=\"node\"\u003e\u003c/div\u003e\n    \u003cdiv class=\"edge\"\u003eA, 1\u003c/div\u003e\n    \u003cdiv class=\"node\"\u003e\u003c/div\u003e\n    \u003cdiv class=\"edge\"\u003eB, 2\u003c/div\u003e\n    \u003cdiv class=\"node\"\u003e\u003c/div\u003e\n    \u003cdiv class=\"edge\"\u003eC, 0\u003c/div\u003e\n  \u003c/div\u003e\n\u003c/div\u003e\n\u003cp\u003eよって\u003ccode\u003e(A, 0) =\u003e (D, 0) =\u003e (C, 0)\u003c/code\u003eのパスが制約のもとで存在することがわかる.\u003cbr\u003e\nこのようにして\u003ccode\u003e(S, 0) =\u003e (T, 0)\u003c/code\u003e のパスが存在するかどうかを判定すればよい.\u003c/p\u003e\n\u003ch3 id=\"解答\"\u003e\u003ca href=\"#%E8%A7%A3%E7%AD%94\"\u003e解答\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e遷移した回数を\u003ccode\u003ev\u003c/code\u003eとして, \u003ccode\u003e0, 1, 2, 0, 1, ...\u003c/code\u003eの状態は \u003ccode\u003ev % 3\u003c/code\u003eで管理した.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"e.rs\" class=\"language-rust  line-numbers\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003estd\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003eio\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003estd\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003ecollections\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eVecDeque\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e/// head comment\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003en\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e m\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token comment\"\u003e// line comment\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e g \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token macro property\"\u003evec!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eVec\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e n\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e _ \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003em \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eu\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e v\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        g\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eu\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003epush\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ev\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003es\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e t\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e que \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eVecDeque\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e dist \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token macro property\"\u003evec!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token macro property\"\u003evec!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token namespace\"\u003estd\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token constant\"\u003eMAX\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e n\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    que\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003epush_back\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003es\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ewhile\u003c/span\u003e \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSome\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eu\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e v\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e que\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003epop_front\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e dist\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eu\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ev \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e \u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e!=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token namespace\"\u003estd\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token constant\"\u003eMAX\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token keyword\"\u003econtinue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        dist\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eu\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ev \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e \u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e v\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003eg\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eu\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003elen\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e vv \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e g\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eu\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n            que\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003epush_back\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003evv\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e v \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e dist\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003et\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e!=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token namespace\"\u003estd\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token constant\"\u003eMAX\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"{}\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e dist\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003et\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e \u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"-1\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan aria-hidden=\"true\" class=\"line-numbers-rows\"\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003cspan class=\"\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cstyle\u003e\n.graph-wrapper {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n}\n\n.graph {\n  margin: 2rem 0;\n  font-size: 0.8rem;\n  display: flex;\n  justify-content: center;\n}\n\n.graph .edge {\n  position: relative;\n  z-index: 0;\n  background: #98971a;\n  width: 2.5rem;\n  height: 2.5rem;\n  border-radius: 50%;\n  text-align: center;\n  line-height: 2.5rem;\n}\n\n.graph .node {\n  position: relative;\n  width: 2rem;\n  height: 1.2rem;\n  border-bottom: 1.5px solid #7c6f64;\n  text-align: center;\n}\n\u003c/style\u003e","description":"グラフの構築","commits":[{"title":"add graph \u0026 styling","date":"2021-10-14 18:03:32","hash":"6ea7adc9","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"6ea7adc9.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 6ea7adc9d04f6d7a20a65ddc13452e154e8d4ecb\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Thu Oct 14 18:03:32 2021 +0900\n\n  add graph \u0026#x26; styling\n\ndiff --git a/_posts/2019-11-18-abc132-e.md b/_posts/2019-11-18-abc132-e.md\nindex 24e3449..83fd070 100644\n\u003cspan class=\"token deleted\"\u003e--- a/_posts/2019-11-18-abc132-e.md\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2019-11-18-abc132-e.md\u003c/span\u003e\n@@ -20,39 +20,43 @@ $$2 \\leq N \\leq 10^5, 0 \\leq M \\leq min(10^5, N(N-1))$$\n頂点Sから頂点Tの経路かつ経路長が3の倍数であるもののうち, 最短のものを求めたい.\n長さが3の倍数であるという制約を扱うために, 以下のようにグラフに遷移状態をもたせる.\n\n\u003cspan class=\"token deleted\"\u003e-\\```html\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-\u0026#x26;lt;div class=\"graph\"\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;A\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;B\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;C\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;D\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;div class=\"graph-wrapper\"\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"graph\"\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;A\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"node\"\u0026#x26;gt;\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;B\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"node\"\u0026#x26;gt;\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;C\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"node\"\u0026#x26;gt;\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;D\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u0026#x26;lt;/div\u0026#x26;gt;\n\n\u003cspan class=\"token deleted\"\u003e-\u0026#x26;lt;div class=\"graph\"\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;A, 0\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;B, 1\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;C, 2\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;D, 0\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"graph\"\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;A, 0\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"node\"\u0026#x26;gt;\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;B, 1\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"node\"\u0026#x26;gt;\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;C, 2\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"node\"\u0026#x26;gt;\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;D, 0\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u0026#x26;lt;/div\u0026#x26;gt;\n\u003cspan class=\"token deleted\"\u003e-\\```\u003c/span\u003e\n\nこのようにすることで`(A, 0) =\u0026#x26;gt; (D, 0)`のパスの長さが3となる.  \nここで`D → A`のパスがあると仮定すると, 二週目は以下のようになる.\n\n\u003cspan class=\"token deleted\"\u003e-\u0026#x26;lt;div class=\"graph\"\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;D, 0\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;A, 1\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;B, 2\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;C, 0\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;div class=\"graph-wrapper\"\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"graph\"\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;D, 0\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"node\"\u0026#x26;gt;\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;A, 1\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"node\"\u0026#x26;gt;\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;B, 2\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"node\"\u0026#x26;gt;\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;C, 0\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u0026#x26;lt;/div\u0026#x26;gt;\n\nよって`(A, 0) =\u0026#x26;gt; (D, 0) =\u0026#x26;gt; (C, 0)`のパスが制約のもとで存在することがわかる.  \n@@ -103,3 +107,37 @@ fn main() {\n   else { println!(\u003cspan class=\"token string\"\u003e\"-1\"\u003c/span\u003e); }\n}\n\\```\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;style\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+.graph-wrapper {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  display: flex;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  flex-wrap: wrap;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  justify-content: space-around;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+.graph {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  margin: 2rem 0;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  font-size: 0.8rem;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  display: flex;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  justify-content: center;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+.graph .edge {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  position: relative;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  z-index: 0;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  background: #98971a;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  width: 2.5rem;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  height: 2.5rem;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  border-radius: 50%;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  text-align: center;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  line-height: 2.5rem;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+.graph .node {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  position: relative;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  width: 2rem;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  height: 1.2rem;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  border-bottom: 1.5px solid #7c6f64;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  text-align: center;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;/style\u0026#x26;gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"},{"title":"wip","date":"2021-03-05 18:48:41","hash":"70a0aff5","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"70a0aff5.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 70a0aff5a83d4332a8c3ccff3d2d3c1c84e46ef2\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Fri Mar 5 18:48:41 2021 +0900\n\n  wip\n\ndiff --git a/_posts/2019-11-18-abc132-e.md b/_posts/2019-11-18-abc132-e.md\nindex 4a2e5c1..24e3449 100644\n\u003cspan class=\"token deleted\"\u003e--- a/_posts/2019-11-18-abc132-e.md\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2019-11-18-abc132-e.md\u003c/span\u003e\n@@ -14,12 +14,34 @@ description: グラフの構築\n\u003cspan class=\"token comment\"\u003e### 概要\u003c/span\u003e\n有向グラフ`G(N, M)`が与えられ, グラフ上を一度の移動で3頂点進む. 頂点Sから頂点Tまで移動できる場合の最短経路を求める.\n\n\u003cspan class=\"token deleted\"\u003e-$2 \\leq N \\leq 10^5, 0 \\leq M \\leq min(10^5, N(N-1))$\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$$2 \\leq N \\leq 10^5, 0 \\leq M \\leq min(10^5, N(N-1))$$\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e### 考察\u003c/span\u003e\n頂点Sから頂点Tの経路かつ経路長が3の倍数であるもののうち, 最短のものを求めたい.\n長さが3の倍数であるという制約を扱うために, 以下のようにグラフに遷移状態をもたせる.\n\n\u003cspan class=\"token inserted\"\u003e+\\```html\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;div class=\"graph\"\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;A\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;B\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;C\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;D\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;div class=\"graph\"\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;A, 0\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;B, 1\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;C, 2\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;D, 0\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\nこのようにすることで`(A, 0) =\u0026#x26;gt; (D, 0)`のパスの長さが3となる.  \nここで`D → A`のパスがあると仮定すると, 二週目は以下のようになる.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"},{"title":"remove old","date":"2021-02-15 00:35:55","hash":"2716e36b","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"2716e36b.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 2716e36b1d32e442f2826e8a1946a44400ca8bdf\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Mon Feb 15 00:35:55 2021 +0900\n\n  remove old\n\ndiff --git a/_posts/2019-11-18-abc132-e.md b/_posts/2019-11-18-abc132-e.md\nindex a107a9d..4a2e5c1 100644\n\u003cspan class=\"token deleted\"\u003e--- a/_posts/2019-11-18-abc132-e.md\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2019-11-18-abc132-e.md\u003c/span\u003e\n@@ -20,26 +20,6 @@ $2 \\leq N \\leq 10^5, 0 \\leq M \\leq min(10^5, N(N-1))$\n頂点Sから頂点Tの経路かつ経路長が3の倍数であるもののうち, 最短のものを求めたい.\n長さが3の倍数であるという制約を扱うために, 以下のようにグラフに遷移状態をもたせる.\n\n\u003cspan class=\"token deleted\"\u003e-\u0026#x26;lt;div class=\"graph\"\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;A\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;B\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;C\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;D\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-\u0026#x26;lt;div class=\"graph\"\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;A, 0\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;B, 1\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;C, 2\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;D, 0\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-\u003c/span\u003e\nこのようにすることで`(A, 0) =\u0026#x26;gt; (D, 0)`のパスの長さが3となる.  \nここで`D → A`のパスがあると仮定すると, 二週目は以下のようになる.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"},{"title":"update","date":"2021-02-15 00:34:10","hash":"bd59f09a","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"bd59f09a.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit bd59f09a33181a1f762978251b6b4d7eb0095a09\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Mon Feb 15 00:34:10 2021 +0900\n\n  update\n\ndiff --git a/_posts/2019-11-18-abc132-e.md b/_posts/2019-11-18-abc132-e.md\nindex d07b8a9..a107a9d 100644\n\u003cspan class=\"token deleted\"\u003e--- a/_posts/2019-11-18-abc132-e.md\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2019-11-18-abc132-e.md\u003c/span\u003e\n@@ -10,11 +10,11 @@ description: グラフの構築\n\u003cspan class=\"token deleted\"\u003e---\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e## \u003ca href=\"https://atcoder.jp/contests/abc132/tasks/abc132_e\" class=\"token md-link\"\u003eABC132-E Hopscotch Addict\u003c/a\u003e\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e### 概要\u003c/span\u003e\n有向グラフ`G(N, M)`が与えられ, グラフ上を一度の移動で3頂点進む. 頂点Sから頂点Tまで移動できる場合の最短経路を求める.\n\n\u003cspan class=\"token deleted\"\u003e-$2 \\leq N \\leq 10^5$,\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-$0 \\leq M \\leq min(10^5, N(N-1))$\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$2 \\leq N \\leq 10^5, 0 \\leq M \\leq min(10^5, N(N-1))$\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e### 考察\u003c/span\u003e\n頂点Sから頂点Tの経路かつ経路長が3の倍数であるもののうち, 最短のものを求めたい.\n@@ -59,15 +59,18 @@ $0 \\leq M \\leq min(10^5, N(N-1))$\n\u003cspan class=\"token comment\"\u003e### 解答\u003c/span\u003e\n遷移した回数を`v`として, `0, 1, 2, 0, 1, ...`の状態は `v % 3`で管理した.\n\n\u003cspan class=\"token deleted\"\u003e-\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust[class=\"line-numbers\"][data-file=\"e.rs\"]\u003c/span\u003e\nuse std::io;\nuse std::collections::VecDeque;\n\n\u003cspan class=\"token inserted\"\u003e+/// head comment\u003c/span\u003e\nfn main() {\n   let (n, m) = {\n       let i = read::\u0026#x26;lt;usize\u0026#x26;gt;();\n       (i[0], i[1])\n   };\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    // line comment\u003c/span\u003e\n   let mut g = vec![Vec::new(); n];\n   for _ in 0..m {\n       let (u, v) = {\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"},{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"35b550ae.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 35b550ae83af4efaeadf33471c8ca8a32c1079c8\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2019-11-18-abc132-e.md b/_posts/2019-11-18-abc132-e.md\nnew file mode 100644\nindex 0000000..d07b8a9\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2019-11-18-abc132-e.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,100 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: 'Hopscotch Addict'\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2019-11-18\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Competitive Programming\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tags:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- AtCoder\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Graph\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+description: グラフの構築\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## [ABC132-E Hopscotch Addict](https://atcoder.jp/contests/abc132/tasks/abc132_e)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 概要\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+有向グラフ`G(N, M)`が与えられ, グラフ上を一度の移動で3頂点進む. 頂点Sから頂点Tまで移動できる場合の最短経路を求める.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$2 \\leq N \\leq 10^5$,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$0 \\leq M \\leq min(10^5, N(N-1))$\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 考察\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+頂点Sから頂点Tの経路かつ経路長が3の倍数であるもののうち, 最短のものを求めたい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+長さが3の倍数であるという制約を扱うために, 以下のようにグラフに遷移状態をもたせる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;div class=\"graph\"\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;A\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;B\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;C\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;D\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;div class=\"graph\"\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;A, 0\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;B, 1\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;C, 2\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;D, 0\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+このようにすることで`(A, 0) =\u0026#x26;gt; (D, 0)`のパスの長さが3となる.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ここで`D → A`のパスがあると仮定すると, 二週目は以下のようになる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;div class=\"graph\"\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;D, 0\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;A, 1\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;B, 2\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;C, 0\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+よって`(A, 0) =\u0026#x26;gt; (D, 0) =\u0026#x26;gt; (C, 0)`のパスが制約のもとで存在することがわかる.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+このようにして`(S, 0) =\u0026#x26;gt; (T, 0)` のパスが存在するかどうかを判定すればよい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 解答\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+遷移した回数を`v`として, `0, 1, 2, 0, 1, ...`の状態は `v % 3`で管理した.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+use std::io;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+use std::collections::VecDeque;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn main() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let (n, m) = {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let i = read::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        (i[0], i[1])\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    };\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut g = vec![Vec::new(); n];\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for _ in 0..m {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let (u, v) = {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            let i = read::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            (i[0] - 1, i[1] - 1)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        };\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        g[u].push(v);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let (s, t) = {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let i = read::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        (i[0] - 1, i[1] - 1)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    };\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut que = VecDeque::new();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut dist = vec![vec![::std::usize::MAX; 3]; n];\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    que.push_back((s, 0));\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    while let Some((u, v)) = que.pop_front() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        if dist[u][v % 3] != ::std::usize::MAX { continue; }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        dist[u][v % 3] = v;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        for i in 0..g[u].len() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            let vv = g[u][i];\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            que.push_back((vv, v + 1));\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    if dist[t][0] != ::std::usize::MAX { println!(\"{}\", dist[t][0] / 3); }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    else { println!(\"-1\"); }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2019-11-18","updatedAt":"2021-10-14"},{"slug":"2019-10-06-nuxt-sharing-component","title":"Nuxt.js: sharing components","categories":["memo"],"image":"https://koka831.github.io/img/icon.png","tags":["Vue"],"content":"\u003ch2 id=\"abstract\"\u003e\u003ca href=\"#abstract\"\u003eAbstract\u003c/a\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003esingle repositoryで複数のprojectを管理する\u003c/li\u003e\n\u003cli\u003eビルド時に\u003ccode\u003enuxt.config.js\u003c/code\u003eを上書きし, \u003ccode\u003epages\u003c/code\u003eをproject毎に分離\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"motivation\"\u003e\u003ca href=\"#motivation\"\u003eMotivation\u003c/a\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eadmin\u003c/code\u003eと\u003ccode\u003euser\u003c/code\u003eで共通のコンポーネントがある\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e/user\u003c/code\u003e, \u003ccode\u003e/admin\u003c/code\u003e のようにルーティングで分ける方法もあるが, そもそも\u003ccode\u003e/admin\u003c/code\u003e を外に出したくない(同じ環境で動作させたくない)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"1-setup-subdir\"\u003e\u003ca href=\"#1-setup-subdir\"\u003e1. setup subdir\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/nuxt/create-nuxt-app\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ecreate-nuxt-app\u003c/a\u003eで生成したテンプレートを元に, \u003ccode\u003eadmin/\u003c/code\u003eディレクトリ配下にサブプロジェクトを作成する.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-sh\"\u003e\u003ccode class=\"language-sh\"\u003e$ mkdir -p admin/{pages,layouts}\n$ touch admin/app.config.js\n$ls\n.gitignore\n.nuxt/\nadmin/    \u0026#x26;lt;-- new\n  layouts/\n  pages/\n  app.config.js\nassets/\ncomponents/\n...\nlayouts/  \u0026#x26;lt;-- default\npages/    \u0026#x26;lt;-- default\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3 id=\"2-configure-appconfigjs\"\u003e\u003ca href=\"#2-configure-appconfigjs\"\u003e2. configure app.config.js\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003ccode\u003esrcDir\u003c/code\u003eを\u003ccode\u003eadmin\u003c/code\u003eとすることで, Nuxtがみるプロジェクトが\u003ccode\u003eadmin/\u003c/code\u003e配下になる.\nこれでNuxtが生成するroutingも\u003ccode\u003eadmin/pages\u003c/code\u003eによるものになる.\nそのため, Storeをadmin側でも持ちたい場合は\u003ccode\u003eadmin/store/\u003c/code\u003eを作成する.\u003c/p\u003e\n\u003cp\u003eまた, \u003ccode\u003eadmin/pages/xxx.vue\u003c/code\u003e でも\u003ccode\u003eimport XXX from '@/components/...\u003c/code\u003eのように\u003ccode\u003e@\u003c/code\u003eを用いる為に\u003ccode\u003ebuild\u003c/code\u003eディレクティブで\u003ccode\u003e@ alias\u003c/code\u003eを上書きする.\u003cbr\u003e\n(この設定がない場合, \u003ccode\u003e@/../components/...\u003c/code\u003eのように root directoryまで1階層のぼる必要がある)\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e path \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003erequire\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'path'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e merge \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003erequire\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'deepmerge'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e nuxt \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003erequire\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'../nuxt.config.js'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e extend \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  srcDir\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e __dirname\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  buildDir\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'.nuxt/admin'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\n  build\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003eextend\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003econfig\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      config\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eresolve\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003ealias\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e'@'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e path\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eresolve\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e__dirname\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'..'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003edefault\u003c/span\u003e \u003cspan class=\"token function\"\u003emerge\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003enuxt\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e extend\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3 id=\"3-configure-packagejson\"\u003e\u003ca href=\"#3-configure-packagejson\"\u003e3. configure package.json\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003ccode\u003enuxt\u003c/code\u003eの\u003ccode\u003e--config-file\u003c/code\u003e オプションを用いて\u003ccode\u003enuxt.config.js\u003c/code\u003eを指定する.\u003cbr\u003e\nこれで\u003ccode\u003eyarn dev\u003c/code\u003eとすればデフォルトの\u003ccode\u003epages\u003c/code\u003eが用いられるし, \u003ccode\u003eyarn dev:admin\u003c/code\u003eとすれば\u003ccode\u003eadmin/pages\u003c/code\u003eが用いられる.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token string\"\u003e\"scripts\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token string\"\u003e\"dev\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"nuxt\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token string\"\u003e\"build\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"nuxt build\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token string\"\u003e\"start\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"nuxt start\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token string\"\u003e\"dev:admin\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"nuxt --config-file admin/app.config.js\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token string\"\u003e\"build:admin\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"nuxt build --config-file admin/app.config.js\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token string\"\u003e\"start:admin\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"nuxt start --config-file admin/app.config.js\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token spread operator\"\u003e...\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3 id=\"appendix-generated-routingnuxtadminrouterjs\"\u003e\u003ca href=\"#appendix-generated-routingnuxtadminrouterjs\"\u003eAppendix: Generated Routing(.nuxt/admin/router.js)\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003ccode\u003eyarn build:admin\u003c/code\u003eで生成された\u003ccode\u003eroutes\u003c/code\u003e に \u003ccode\u003eclient\u003c/code\u003e側の\u003ccode\u003epages\u003c/code\u003eが含まれていないことが確認できる.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eVue\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'vue'\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eRouter\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'vue-router'\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e interopDefault \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'./utils'\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003escrollBehavior\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'./router.scrollBehavior.js'\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token function-variable function\"\u003e_0510df08\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003einteropDefault\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'../../admin/pages/index.vue'\u003c/span\u003e \u003cspan class=\"token comment\"\u003e/* webpackChunkName: \"pages/index\" */\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token maybe-class-name\"\u003eVue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003euse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eRouter\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e routerOptions \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  mode\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'history'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  base\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003edecodeURI\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'/'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  linkActiveClass\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'nuxt-link-active'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  linkExactActiveClass\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'nuxt-link-exact-active'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  scrollBehavior\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\n  routes\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      path\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"/\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      component\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e _0510df08\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      name\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"index\"\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\n  fallback\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token boolean\"\u003efalse\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003ecreateRouter\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eRouter\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003erouterOptions\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3 id=\"repository\"\u003e\u003ca href=\"#repository\"\u003erepository\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/koka831/nuxt-multiple-sample\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ekoka831/nuxt-multiple-sample\u003c/a\u003e\u003c/p\u003e","description":"simple way to share components between multiple projects","commits":[{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"35b550ae.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 35b550ae83af4efaeadf33471c8ca8a32c1079c8\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2019-10-06-nuxt-sharing-component.md b/_posts/2019-10-06-nuxt-sharing-component.md\nnew file mode 100644\nindex 0000000..6daf63f\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2019-10-06-nuxt-sharing-component.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,124 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: 'Nuxt.js: sharing components'\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2019-10-06\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- memo\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tags:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Vue\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+description: simple way to share components between multiple projects\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## Abstract\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- single repositoryで複数のprojectを管理する\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- ビルド時に`nuxt.config.js`を上書きし, `pages`をproject毎に分離\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## Motivation\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- `admin`と`user`で共通のコンポーネントがある\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- `/user`, `/admin` のようにルーティングで分ける方法もあるが, そもそも`/admin` を外に出したくない(同じ環境で動作させたくない)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 1. setup subdir\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[create-nuxt-app](https://github.com/nuxt/create-nuxt-app)で生成したテンプレートを元に, `admin/`ディレクトリ配下にサブプロジェクトを作成する.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ mkdir -p admin/{pages,layouts}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ touch admin/app.config.js\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ls\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+.gitignore\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+.nuxt/\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+admin/    \u0026#x26;lt;-- new\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  layouts/\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  pages/\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  app.config.js\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+assets/\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+components/\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+...\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+layouts/  \u0026#x26;lt;-- default\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+pages/    \u0026#x26;lt;-- default\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 2. configure app.config.js\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`srcDir`を`admin`とすることで, Nuxtがみるプロジェクトが`admin/`配下になる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+これでNuxtが生成するroutingも`admin/pages`によるものになる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+そのため, Storeをadmin側でも持ちたい場合は`admin/store/`を作成する.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+また, `admin/pages/xxx.vue` でも`import XXX from '@/components/...`のように`@`を用いる為に`build`ディレクティブで`@ alias`を上書きする.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+(この設定がない場合, `@/../components/...`のように root directoryまで1階層のぼる必要がある)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```js\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+const path = require('path')\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+const merge = require('deepmerge')\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+const nuxt = require('../nuxt.config.js')\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+const extend = {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  srcDir: __dirname,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  buildDir: '.nuxt/admin',\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  build: {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    extend(config) {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+      config.resolve.alias['@'] = path.resolve(__dirname, '..')\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+export default merge(nuxt, extend)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 3. configure package.json\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`nuxt`の`--config-file` オプションを用いて`nuxt.config.js`を指定する.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+これで`yarn dev`とすればデフォルトの`pages`が用いられるし, `yarn dev:admin`とすれば`admin/pages`が用いられる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```js\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+{\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \"scripts\": {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \"dev\": \"nuxt\",\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \"build\": \"nuxt build\",\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \"start\": \"nuxt start\",\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \"dev:admin\": \"nuxt --config-file admin/app.config.js\",\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \"build:admin\": \"nuxt build --config-file admin/app.config.js\",\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \"start:admin\": \"nuxt start --config-file admin/app.config.js\",\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  },\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  ...\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### Appendix: Generated Routing(.nuxt/admin/router.js)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`yarn build:admin`で生成された`routes` に `client`側の`pages`が含まれていないことが確認できる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```js\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+import Vue from 'vue'\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+import Router from 'vue-router'\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+import { interopDefault } from './utils'\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+import scrollBehavior from './router.scrollBehavior.js'\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+const _0510df08 = () =\u0026#x26;gt; interopDefault(import('../../admin/pages/index.vue' /* webpackChunkName: \"pages/index\" */))\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Vue.use(Router)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+export const routerOptions = {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  mode: 'history',\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  base: decodeURI('/'),\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  linkActiveClass: 'nuxt-link-active',\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  linkExactActiveClass: 'nuxt-link-exact-active',\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  scrollBehavior,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  routes: [{\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+      path: \"/\",\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+      component: _0510df08,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+      name: \"index\"\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }],\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  fallback: false\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+export function createRouter() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  return new Router(routerOptions)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### repository\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[koka831/nuxt-multiple-sample](https://github.com/koka831/nuxt-multiple-sample)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2019-10-06","updatedAt":"2021-01-30"},{"slug":"2019-08-12-abc110-d","title":"Modular multiplicative inverse","categories":["Competitive Programming"],"image":"https://koka831.github.io/img/icon.png","tags":["AtCoder","組み合わせ"],"content":"\u003ch2 id=\"abc110-d-factorization\"\u003e\u003ca href=\"#abc110-d-factorization\"\u003eABC110-D Factorization\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"概要\"\u003e\u003ca href=\"#%E6%A6%82%E8%A6%81\"\u003e概要\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eN\u003c/mi\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003eM\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eN, M\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eM\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eが与えられ，\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003ea\u003c/mi\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/msub\u003e\u003cmo\u003e∗\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003ea\u003c/mi\u003e\u003cmn\u003e2\u003c/mn\u003e\u003c/msub\u003e\u003cmo\u003e∗\u003c/mo\u003e\u003cmo\u003e⋯\u003c/mo\u003e\u003cmo\u003e∗\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003ea\u003c/mi\u003e\u003cmi\u003eN\u003c/mi\u003e\u003c/msub\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmi\u003eM\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ea_1 * a_2 * \\cdots * a_N = M\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.61528em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003ea\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.30110799999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e∗\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.61528em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003ea\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.30110799999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e∗\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.46528em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"minner\"\u003e⋯\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e∗\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003ea\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.32833099999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eM\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e を満たす\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003ea\u003c/mi\u003e\u003cmi\u003eN\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ea_N\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003ea\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.32833099999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eの組み合わせを求める.\u003c/p\u003e\n\u003ch3 id=\"考察\"\u003e\u003ca href=\"#%E8%80%83%E5%AF%9F\"\u003e考察\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eM\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eM\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eM\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eは\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003ea\u003c/mi\u003e\u003cmi\u003eN\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ea_N\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003ea\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.32833099999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eの積で与えられるので，素因数分解して因数を\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eN\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eN\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e個に振り分ける方法を考える.\u003c/p\u003e\n\u003cp\u003e\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eM\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eM\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eM\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eが\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eL\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eL\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eL\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e種類の因数からなるとすると，\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eM\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eM\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eM\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eは素数\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003ep\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ep_i\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003ep\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.31166399999999994em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e及びべき数\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003ek\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ek_i\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03148em;\"\u003ek\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.31166399999999994em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eを用いて以下のように表される.\n\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eM\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmsubsup\u003e\u003cmi\u003ep\u003c/mi\u003e\u003cmn\u003e1\u003c/mn\u003e\u003cmsub\u003e\u003cmi\u003ek\u003c/mi\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/msub\u003e\u003c/msubsup\u003e\u003cmo\u003e∗\u003c/mo\u003e\u003cmsubsup\u003e\u003cmi\u003ep\u003c/mi\u003e\u003cmn\u003e2\u003c/mn\u003e\u003cmsub\u003e\u003cmi\u003ek\u003c/mi\u003e\u003cmn\u003e2\u003c/mn\u003e\u003c/msub\u003e\u003c/msubsup\u003e\u003cmo\u003e∗\u003c/mo\u003e\u003cmo\u003e⋯\u003c/mo\u003e\u003cmo\u003e∗\u003c/mo\u003e\u003cmsubsup\u003e\u003cmi\u003ep\u003c/mi\u003e\u003cmi\u003eL\u003c/mi\u003e\u003cmsub\u003e\u003cmi\u003ek\u003c/mi\u003e\u003cmi\u003eL\u003c/mi\u003e\u003c/msub\u003e\u003c/msubsup\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eM = p_1^{k_1} * p_2^{k_2} * \\cdots * p_L^{k_L}\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eM\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1.1973159999999998em;vertical-align:-0.266308em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003ep\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.931008em;\"\u003e\u003cspan style=\"top:-2.433692em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.1449000000000003em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\"\u003ek\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.31731428571428577em;\"\u003e\u003cspan style=\"top:-2.357em;margin-left:-0.03148em;margin-right:0.07142857142857144em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.5em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size3 size1 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.143em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.266308em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e∗\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1.1973159999999998em;vertical-align:-0.266308em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003ep\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.931008em;\"\u003e\u003cspan style=\"top:-2.433692em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.1449000000000003em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\"\u003ek\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.31731428571428577em;\"\u003e\u003cspan style=\"top:-2.357em;margin-left:-0.03148em;margin-right:0.07142857142857144em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.5em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size3 size1 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.143em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.266308em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e∗\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.46528em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"minner\"\u003e⋯\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e∗\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1.2247439999999998em;vertical-align:-0.293531em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003ep\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.931213em;\"\u003e\u003cspan style=\"top:-2.4064690000000004em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003eL\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.1451050000000005em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\"\u003ek\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.3448em;\"\u003e\u003cspan style=\"top:-2.3567071428571427em;margin-left:-0.03148em;margin-right:0.07142857142857144em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.5em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size3 size1 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003eL\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.14329285714285717em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.293531em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/p\u003e\n\u003cp\u003eよってこれは\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eM\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eM\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eM\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eのべき数を\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eN\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eN\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e個に振り分ける重複組み合わせ問題になる.\u003c/p\u003e\n\u003cp\u003e素因数\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsubsup\u003e\u003cmi\u003ep\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmsub\u003e\u003cmi\u003ek\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003c/msubsup\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ep_i^{k_i}\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1.207872em;vertical-align:-0.276864em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003ep\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.931008em;\"\u003e\u003cspan style=\"top:-2.4231360000000004em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.1449000000000003em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\"\u003ek\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.3280857142857143em;\"\u003e\u003cspan style=\"top:-2.357em;margin-left:-0.03148em;margin-right:0.07142857142857144em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.5em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size3 size1 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.143em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.276864em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eを重複を許して\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eN\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eN\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e個に振り分ける組み合わせは\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmrow\u003e\u003c/mrow\u003e\u003cmi\u003eN\u003c/mi\u003e\u003c/msub\u003e\u003cmi\u003eH\u003c/mi\u003e\u003cmsub\u003e\u003cmi\u003ek\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmsub\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003eN\u003c/mi\u003e\u003c/msub\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003ek\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmi\u003eC\u003c/mi\u003e\u003cmsub\u003e\u003cmi\u003ek\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e_N H k_i = (_N+k_i) C k_i\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.32833099999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.08125em;\"\u003eH\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03148em;\"\u003ek\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.31166399999999994em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.32833099999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e+\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03148em;\"\u003ek\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.31166399999999994em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.07153em;\"\u003eC\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03148em;\"\u003ek\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.31166399999999994em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e で求められる. 各素因数の振り分けは独立な事象であるから，各素因数の組み合わせの積(とMOD)をとればよい.\u003c/p\u003e\n\u003cp\u003e(本来は愚直にやっても通るっぽいけど)，モジュラ逆数を用いて除算を助けてもらうことにする.\u003c/p\u003e\n\u003ch2 id=\"modular-multiplicative-inverse\"\u003e\u003ca href=\"#modular-multiplicative-inverse\"\u003eModular multiplicative inverse\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eこの問題では愚直にnCrを求めても間に合うが，そもそも間に合わない問題もあるらしい.\u003cbr\u003e\n\u003cstrong\u003emodular multiplicative inverse\u003c/strong\u003eを利用すると，前処理\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eO\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003ep\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eO(p)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02778em;\"\u003eO\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ep\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e クエリ\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eO\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eO(1)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02778em;\"\u003eO\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord\"\u003e1\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e でmod pにおける逆元を計算できる. 逆元を用いると，mod計算など有限体上での除算が行えるようになる.\n(逆元使わないでこの問題解けるっぽいけど割り算とMODの順番がどうも合わなくてWA)\u003c/p\u003e\n\u003cp\u003e逆元の求め方は\u003csup id=\"fnref-modinv\"\u003e\u003ca href=\"#fn-modinv\" class=\"footnote-ref\"\u003emodinv\u003c/a\u003e\u003c/sup\u003eより.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003estruct Modulo\u003c/code\u003eで逆元の体を定義して，\u003ccode\u003enew()\u003c/code\u003e時に \u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ea\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e!\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ea!\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ea\u003c/span\u003e\u003cspan class=\"mclose\"\u003e!\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e 及び \u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsup\u003e\u003cmi\u003ea\u003c/mi\u003e\u003cmrow\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/mrow\u003e\u003c/msup\u003e\u003cmo stretchy=\"false\"\u003e!\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ea^{-1}!\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003ea\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.8141079999999999em;\"\u003e\u003cspan style=\"top:-3.063em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e−\u003c/span\u003e\u003cspan class=\"mord mtight\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose\"\u003e!\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e を計算し，\u003ccode\u003ecomb\u003c/code\u003eでnCrを計算する.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003epub\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estruct\u003c/span\u003e \u003cspan class=\"token type-definition class-name\"\u003eModulo\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    fact\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eVec\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    inv_fact\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eVec\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    modulo\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eimpl\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eModulo\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003epub\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003en\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e modulo\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eSelf\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e fact \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token macro property\"\u003evec!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e n \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e inv \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token macro property\"\u003evec!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e n \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e inv_fact \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token macro property\"\u003evec!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e n \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        inv\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003en \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            inv\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e inv\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003emodulo \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003emodulo \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e modulo \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e modulo\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        fact\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        inv_fact\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003en \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            fact\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e fact\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e modulo\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003en \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            inv_fact\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e inv_fact\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e inv\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e modulo\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token class-name\"\u003eModulo\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e fact\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e fact\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e inv_fact\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e inv_fact\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e modulo\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e modulo \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003epub\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003ecomb\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e n\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e r\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003efact\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003en\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003einv_fact\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003er\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003emodulo \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003einv_fact\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003en \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e r\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003emodulo\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv class=\"footnotes\"\u003e\n\u003chr\u003e\n\u003col\u003e\n\u003cli id=\"fn-modinv\"\u003e\u003ca href=\"https://qiita.com/drken/items/3b4fdf0a78e7a138cd9a#3-3-%E9%80%86%E5%85%83%E3%81%AE%E6%B1%82%E3%82%81%E6%96%B9%E3%81%AE%E6%A6%82%E8%A6%81\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eQiita - drken\u003c/a\u003e\u003ca href=\"#fnref-modinv\" class=\"footnote-backref\"\u003e↩\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e","description":"考察","commits":[{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"35b550ae.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 35b550ae83af4efaeadf33471c8ca8a32c1079c8\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2019-08-12-abc110-d.md b/_posts/2019-08-12-abc110-d.md\nnew file mode 100644\nindex 0000000..5a475ac\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2019-08-12-abc110-d.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,71 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: 'Modular multiplicative inverse'\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2019-08-12\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Competitive Programming\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tags:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - AtCoder\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - 組み合わせ\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+description: 考察\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## [ABC110-D Factorization](https://atcoder.jp/contests/abc110/tasks/abc110_d)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 概要\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$N, M$が与えられ，$a_1 * a_2 * \\cdots * a_N = M$ を満たす$a_N$の組み合わせを求める.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 考察\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$M$は$a_N$の積で与えられるので，素因数分解して因数を$N$個に振り分ける方法を考える.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$M$が$L$種類の因数からなるとすると，$M$は素数$p_i$及びべき数$k_i$を用いて以下のように表される.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$M = p_1^{k_1} * p_2^{k_2} * \\cdots * p_L^{k_L}$\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+よってこれは$M$のべき数を$N$個に振り分ける重複組み合わせ問題になる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+素因数$p_i^{k_i}$を重複を許して$N$個に振り分ける組み合わせは$_N H k_i = (_N+k_i) C k_i$ で求められる. 各素因数の振り分けは独立な事象であるから，各素因数の組み合わせの積(とMOD)をとればよい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+(本来は愚直にやっても通るっぽいけど)，モジュラ逆数を用いて除算を助けてもらうことにする.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## Modular multiplicative inverse\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+この問題では愚直にnCrを求めても間に合うが，そもそも間に合わない問題もあるらしい.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+**modular multiplicative inverse**を利用すると，前処理$O(p)$ クエリ$O(1)$ でmod pにおける逆元を計算できる. 逆元を用いると，mod計算など有限体上での除算が行えるようになる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+(逆元使わないでこの問題解けるっぽいけど割り算とMODの順番がどうも合わなくてWA)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+逆元の求め方は[^modinv]より.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`struct Modulo`で逆元の体を定義して，`new()`時に $a!$ 及び $a^{-1}!$ を計算し，`comb`でnCrを計算する.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+pub struct Modulo {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    fact: Vec\u0026#x26;lt;usize\u0026#x26;gt;,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    inv_fact: Vec\u0026#x26;lt;usize\u0026#x26;gt;,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    modulo: usize\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+impl Modulo {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    pub fn new(n: usize, modulo: usize) -\u0026#x26;gt; Self {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let mut fact = vec![0; n + 1];\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let mut inv = vec![0; n + 1];\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let mut inv_fact = vec![0; n + 1];\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        inv[1] = 1;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        for i in 2..n + 1 {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            inv[i] = inv[modulo % i] * (modulo - modulo / i) % modulo;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        fact[0] = 1;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        inv_fact[0] = 1;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        for i in 0..n {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            fact[i + 1] = fact[i] * (i + 1) % modulo;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        for i in 0..n {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            inv_fact[i + 1] = inv_fact[i] * inv[i + 1] % modulo;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        Modulo { fact: fact, inv_fact: inv_fact, modulo: modulo }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    pub fn comb(\u0026#x26;self, n: usize, r: usize) -\u0026#x26;gt; usize {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        self.fact[n] * self.inv_fact[r] %\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            self.modulo * self.inv_fact[n - r] % self.modulo\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[^modinv]: [Qiita - drken](https://qiita.com/drken/items/3b4fdf0a78e7a138cd9a#3-3-逆元の求め方の概要)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2019-08-12","updatedAt":"2021-01-30"},{"slug":"2019-08-08-autolock-with-yubikey","title":"Linux: Login/sudo with Yubikey","categories":["diary"],"image":"https://koka831.github.io/img/icon.png","tags":["Linux","udev","yubikey"],"content":"\u003ch2 id=\"abstract\"\u003e\u003ca href=\"#abstract\"\u003eAbstract\u003c/a\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eLinux Desktopのログイン時及び\u003ccode\u003esudo\u003c/code\u003e時にYubikey + Passwordを必須にしてみた.\u003c/li\u003e\n\u003cli\u003eログインした状態でYubikeyを抜くとlockするようにした.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"env\"\u003e\u003ca href=\"#env\"\u003eEnv\u003c/a\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eUbuntu 18.04\u003c/li\u003e\n\u003cli\u003eFIDO U2F Security Key(自分は\u003ca href=\"https://www.amazon.co.jp/dp/B06XHTKFH3/ref=cm_sw_em_r_mt_dp_U_Ha5sDbS6H12P6\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eこれ\u003c/a\u003eつかってます. 端子ガードついてるKey他にも出てほしい)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"install-dependencies\"\u003e\u003ca href=\"#install-dependencies\"\u003eInstall Dependencies\u003c/a\u003e\u003c/h2\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"terminal\" class=\"language-shell-session\"\u003e\u003ccode class=\"language-shell-session\"\u003e\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e\u003cspan class=\"token function\"\u003esudo\u003c/span\u003e add-apt-repository ppa:yubico/stable\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e\u003cspan class=\"token function\"\u003esudo\u003c/span\u003e \u003cspan class=\"token function\"\u003eapt-get\u003c/span\u003e \u003cspan class=\"token function\"\u003einstall\u003c/span\u003e yubikey-manager-qt yubioath-desktop yubikey-personalization-gui\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"setup-u2f-key\"\u003e\u003ca href=\"#setup-u2f-key\"\u003eSetup U2F Key\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"u2f-keyの登録\"\u003e\u003ca href=\"#u2f-key%E3%81%AE%E7%99%BB%E9%8C%B2\"\u003eU2F Keyの登録\u003c/a\u003e\u003c/h3\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"terminal\" class=\"language-shell-session\"\u003e\u003ccode class=\"language-shell-session\"\u003e\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e\u003cspan class=\"token function\"\u003emkdir\u003c/span\u003e -p \u003cspan class=\"token environment constant\"\u003e$HOME\u003c/span\u003e/.config/Yubico\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003epamu2fcfg -u\u003cspan class=\"token variable\"\u003e${\u003cspan class=\"token environment constant\"\u003eUSER\u003c/span\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token environment constant\"\u003e$HOME\u003c/span\u003e/.config/Yubico/u2f_keys\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eまたバックアップデバイスを追加する場合には\u003ccode\u003e--nouser\u003c/code\u003eをつけて追記\u003csup id=\"fnref-pamu2fcfg\"\u003e\u003ca href=\"#fn-pamu2fcfg\" class=\"footnote-ref\"\u003epamu2fcfg\u003c/a\u003e\u003c/sup\u003e.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"terminal\" class=\"language-shell-session\"\u003e\u003ccode class=\"language-shell-session\"\u003e\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003epamu2fcfg -n \u003cspan class=\"token operator\"\u003e\u003e\u003e\u003c/span\u003e \u003cspan class=\"token environment constant\"\u003e$HOME\u003c/span\u003e/.config/Yubico/u2f_keys\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3 id=\"u2f-for-sudo\"\u003e\u003ca href=\"#u2f-for-sudo\"\u003eU2F for SUDO\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e以下の6行目を追記. PAM(Pluggable Authentication Modules)での認証において，password入力後にYubikeyがrequireされるようになる(Yubikeyが無いとauthできない).\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e\u003ccode\u003e/etc/pam.d/sudo\u003c/code\u003e\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"/etc/pam.d/sudo\" class=\"language-diff\"\u003e\u003ccode class=\"language-diff\"\u003e\u003cspan class=\"token unchanged\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e#%PAM-1.0\n\u003c/span\u003e\n\u003cspan class=\"token unchanged\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003esession    required    pam_env.so readenv=1 user_readenv=0\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003esession    required    pam_env.so readenv=1 envfile=/etc/default/locale user_readenv=0\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e@include   common-auth\n\u003c/span\u003e\u003cspan class=\"token inserted-sign inserted\"\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003eauth       required    pam_u2f.so\n\u003c/span\u003e\u003cspan class=\"token unchanged\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e@include   common-account\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e@include   common-session-noninteractive\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3 id=\"u2f-for-login\"\u003e\u003ca href=\"#u2f-for-login\"\u003eU2F for Login\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eDisplay ManagerにGDM(Gnome Display Manager)を用いている場合は以下のファイルに\u003ccode\u003epam_u2f.so\u003c/code\u003eの行を追記する.\u003cbr\u003e\n\u003cstrong\u003e\u003ccode\u003e/etc/pam.d/gdm-password\u003c/code\u003e\u003c/strong\u003e\nその他のDMを用いている場合(KDE等)は \u003cstrong\u003e\u003ccode\u003e/etc/pam.d/lightdm\u003c/code\u003e\u003c/strong\u003e に追記する.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"/etc/pam.d/gdm-password\" class=\"language-diff\"\u003e\u003ccode class=\"language-diff\"\u003e\u003cspan class=\"token unchanged\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e#%PAM-1.0\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003eauth     requisite       pam_nologin.so\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003eauth     required        pam_succeed_if.so user != root quiet_success\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e@include common-auth\n\u003c/span\u003e\u003cspan class=\"token inserted-sign inserted\"\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003eauth     required        pam_u2f.so\n\u003c/span\u003e\u003cspan class=\"token unchanged\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003eauth     optional        pam_gnome_keyring.so\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e@include common-account\n\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e...omit\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"auto-lock-without-u2f\"\u003e\u003ca href=\"#auto-lock-without-u2f\"\u003eAuto-lock without U2F\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eここからが本題. U2F Keyの接続が解除されると端末をロックする.\u003c/p\u003e\n\u003cp\u003eもともと自分の使っているLaptopには指紋認証センサが付属している．一般に生体認証はU2Fよりもセキュアであるし，自分も異論はない.\u003cbr\u003e\nではU2Fが生体認証より優れている点はなにか. 自分の答えは認証の持続性をコントロールできる点である.\u003c/p\u003e\n\u003cp\u003e指紋認証を例に取ると，一度ログインした端末は一定時間操作をしない際のオートロックまたはユーザ自身の能動的なログアウトをしない限り，認証を再度必要としない.\u003cbr\u003e\n対してU2Fでは\u003cstrong\u003eデバイスが接続されている間だけ認証されている\u003c/strong\u003eという状態をもたらすことができる.\u003c/p\u003e\n\u003cp\u003eApple Watchを身に着けた状態でMacの自動ログインが可能\u003csup id=\"fnref-applewatch\"\u003e\u003ca href=\"#fn-applewatch\" class=\"footnote-ref\"\u003eapplewatch\u003c/a\u003e\u003c/sup\u003eという例がある.\nこれはbluetooth接続したU2Fデバイスが一定距離離れるもしくはUSB接続したデバイスをejectすることで端末からログアウトする，という仕様で再現できる.\u003c/p\u003e\n\u003ch3 id=\"monitoring-u2f-key-by-udev\"\u003e\u003ca href=\"#monitoring-u2f-key-by-udev\"\u003emonitoring U2F key by udev\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eU2F Keyモニターをudevに任せることにする. まず対象のIDを特定する.\n\u003ccode\u003eudevadm monitor\u003c/code\u003eでudevのイベントをモニタリングした状態でU2F Keyを抜き差しすると \u003ccode\u003ebind\u003c/code\u003e, \u003ccode\u003eremove\u003c/code\u003e イベントが通知されるので， \u003ccode\u003e$ID_MODEL_ID\u003c/code\u003e 及び \u003ccode\u003e$ID_VENDOR_ID\u003c/code\u003e を取得する.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"terminal\" class=\"language-shell-session\"\u003e\u003ccode class=\"language-shell-session\"\u003e\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003eudevadm monitor --environment --udev\u003c/span\u003e\u003c/span\u003e\n\n\u003cspan class=\"token output\"\u003eUDEV  [28028.490650] bind     /devices/pci0000:00/0000:00:14.0/usb1/1-3 (usb)\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eACTION=bind\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eBUSNUM=001\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eDEVNAME=/dev/bus/usb/001/013\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eDEVNUM=013\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eDEVPATH=/devices/pci0000:00/0000:00:14.0/usb1/1-3\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eDEVTYPE=usb_device\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eDRIVER=usb\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eID_BUS=usb\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eID_MODEL=XXXXX\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eID_MODEL_ENC=XXXXX\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eID_MODEL_ID=f025\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eID_REVISION=0100\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eID_SERIAL=ExcelSecu_EsecuFIDO_HID\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eID_USB_INTERFACES=:030000:\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eID_VENDOR=ExcelSecu\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eID_VENDOR_ENC=ExcelSecu\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eID_VENDOR_ID=1ea8\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eMAJOR=189\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eMINOR=12\u003c/span\u003e\n\u003cspan class=\"token output\"\u003ePRODUCT=1ea8/f025/100\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eSEQNUM=12938\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eSUBSYSTEM=usb\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eTYPE=0/0/0\u003c/span\u003e\n\u003cspan class=\"token output\"\u003eUSEC_INITIALIZED=28027949334\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e上記の例では \u003ccode\u003eID_MODEL_ID=f025\u003c/code\u003e，\u003ccode\u003eID_VENDOR_ID=1ea8\u003c/code\u003e となっている.\nこのIDペアを用いて，U2F Key解除時の\u003ccode\u003eudev\u003c/code\u003eルールを作成する.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e\u003ccode\u003e/etc/udev/rules.d/xx-u2fkey.rules\u003c/code\u003e\u003c/strong\u003e (xxは適当な数字)\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"/etc/udev/rules.d/xx-u2fkey.rules\" class=\"language-config\"\u003e\u003ccode class=\"language-config\"\u003eACTION==\u0026#x26;quot;remove\u0026#x26;quot;, ENV{ID_VENDOR_ID}==\u0026#x26;quot;1ea8\u0026#x26;quot;, ENV{ID_MODEL_ID}==\u0026#x26;quot;f025\u0026#x26;quot;, RUN+=\u0026#x26;quot;/usr/local/bin/i3lock\u0026#x26;quot;\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e最後にrulesを登録し完了.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"terminal\" class=\"language-shell-session\"\u003e\u003ccode class=\"language-shell-session\"\u003e\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003eudevadm control --reload-rules\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token command\"\u003e\u003cspan class=\"token shell-symbol important\"\u003e$\u003c/span\u003e \u003cspan class=\"token bash language-bash\"\u003e\u003cspan class=\"token function\"\u003eservice\u003c/span\u003e udev reload\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003chr\u003e\n\u003cp\u003eフリーランスという職業柄，PCを所持して企業へ出向くことが多くどうやってセキュリティ担保するかなーと考えてたところ\u003ccode\u003epamu2fcfg\u003c/code\u003eを見かけたので試してみた.\u003cbr\u003e\nYubikeyを忘れて外出するという失態を犯した\u003csup id=\"fnref-twi\"\u003e\u003ca href=\"#fn-twi\" class=\"footnote-ref\"\u003etwi\u003c/a\u003e\u003c/sup\u003eので既に運用が危ういがデータは守れてるのでよし(よくないが)\u003c/p\u003e\n\u003ch2 id=\"reference\"\u003e\u003ca href=\"#reference\"\u003eReference\u003c/a\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://wiki.gentoo.org/wiki/Pam_u2f\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eEnable FIDO U2F USB support\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://support.yubico.com/support/solutions/articles/15000010964-enabling-the-yubico-ppa-on-ubuntu\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003esupport.yubico.com#enabling the Yubico PPA on Ubuntu\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://support.yubico.com/support/solutions/articles/15000011356-ubuntu-linux-login-guide-u2f\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003esupport.yubico.com#Ubuntu Linux Login Guide - U2F\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"footnotes\"\u003e\n\u003chr\u003e\n\u003col\u003e\n\u003cli id=\"fn-pamu2fcfg\"\u003e\u003ca href=\"https://developers.yubico.com/pam-u2f/Manuals/pamu2fcfg.1.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003edevelopers.yubico.com/pam-u2f/Manuals/pamu2fcfg.1.html\u003c/a\u003e\u003ca href=\"#fnref-pamu2fcfg\" class=\"footnote-backref\"\u003e↩\u003c/a\u003e\u003c/li\u003e\n\u003cli id=\"fn-applewatch\"\u003e\u003ca href=\"https://support.apple.com/ja-jp/HT206995\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003esupport.apple.com/ja-jp/HT206995\u003c/a\u003e\u003ca href=\"#fnref-applewatch\" class=\"footnote-backref\"\u003e↩\u003c/a\u003e\u003c/li\u003e\n\u003cli id=\"fn-twi\"\u003e\u003ca href=\"https://twitter.com/k_0ka/status/1159312312156561408\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003etwitter.com/k_0ka/status/1159312312156561408\u003c/a\u003e\u003ca href=\"#fnref-twi\" class=\"footnote-backref\"\u003e↩\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e","description":"Yubikeyを自宅に忘れて１敗","commits":[{"title":"update","date":"2021-04-10 17:49:51","hash":"7fc1fe90","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"7fc1fe90.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 7fc1fe9095a4a16d5b29f42b7ce90933aa17d91e\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Apr 10 17:49:51 2021 +0900\n\n  update\n\ndiff --git a/_posts/2019-08-08-autolock-with-yubikey.md b/_posts/2019-08-08-autolock-with-yubikey.md\nindex f40e591..e3bfc43 100644\n\u003cspan class=\"token deleted\"\u003e--- a/_posts/2019-08-08-autolock-with-yubikey.md\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2019-08-08-autolock-with-yubikey.md\u003c/span\u003e\n@@ -20,7 +20,7 @@ description: Yubikeyを自宅に忘れて１敗\n\n\u003cspan class=\"token comment\"\u003e## Install Dependencies\u003c/span\u003e\n\n\u003cspan class=\"token deleted\"\u003e-\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```shell-session[data-file=\"terminal\"]\u003c/span\u003e\n$ sudo add-apt-repository ppa:yubico/stable\n$ sudo apt-get install yubikey-manager-qt yubioath-desktop yubikey-personalization-gui\n\\```\n@@ -28,14 +28,14 @@ $ sudo apt-get install yubikey-manager-qt yubioath-desktop yubikey-personalizati\n\u003cspan class=\"token comment\"\u003e## Setup U2F Key\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e### U2F Keyの登録\u003c/span\u003e\n\n\u003cspan class=\"token deleted\"\u003e-\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```shell-session[data-file=\"terminal\"]\u003c/span\u003e\n$ mkdir -p $HOME/.config/Yubico\n$ pamu2fcfg -u${USER} \u0026#x26;gt; $HOME/.config/Yubico/u2f_keys\n\\```\n\nまたバックアップデバイスを追加する場合には`--nouser`をつけて追記[^pamu2fcfg].\n\n\u003cspan class=\"token deleted\"\u003e-\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```shell-session[data-file=\"terminal\"]\u003c/span\u003e\n$ pamu2fcfg -n \u0026#x26;gt;\u0026#x26;gt; $HOME/.config/Yubico/u2f_keys\n\\```\n\n@@ -44,7 +44,7 @@ $ pamu2fcfg -n \u0026#x26;gt;\u0026#x26;gt; $HOME/.config/Yubico/u2f_keys\n\n**`/etc/pam.d/sudo`**\n\n\u003cspan class=\"token deleted\"\u003e-\\```diff\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```diff[data-file=\"/etc/pam.d/sudo\"]\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e#%PAM-1.0\u003c/span\u003e\n\nsession    required    pam_env.so readenv=1 user_readenv=0\n@@ -61,7 +61,7 @@ Display ManagerにGDM(Gnome Display Manager)を用いている場合は以下の\nその他のDMを用いている場合(KDE等)は **`/etc/pam.d/lightdm`** に追記する.\n\n\n\u003cspan class=\"token deleted\"\u003e-\\```diff\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```diff[data-file=\"/etc/pam.d/gdm-password\"]\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e#%PAM-1.0\u003c/span\u003e\nauth     requisite       pam_nologin.so\nauth     required        pam_succeed_if.so user != root quiet_success\n@@ -88,7 +88,7 @@ Apple Watchを身に着けた状態でMacの自動ログインが可能[^applewa\nU2F Keyモニターをudevに任せることにする. まず対象のIDを特定する.\n`udevadm monitor`でudevのイベントをモニタリングした状態でU2F Keyを抜き差しすると `bind`, `remove` イベントが通知されるので， `$ID_MODEL_ID` 及び `$ID_VENDOR_ID` を取得する.\n\n\u003cspan class=\"token deleted\"\u003e-\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```shell-session[data-file=\"terminal\"]\u003c/span\u003e\n$ udevadm monitor --environment --udev\n\nUDEV  [28028.490650] bind     /devices/pci0000:00/0000:00:14.0/usb1/1-3 (usb)\n@@ -123,13 +123,13 @@ USEC_INITIALIZED=28027949334\n\n**`/etc/udev/rules.d/xx-u2fkey.rules`** (xxは適当な数字)\n\n\u003cspan class=\"token deleted\"\u003e-\\```config\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```config[data-file=\"/etc/udev/rules.d/xx-u2fkey.rules\"]\u003c/span\u003e\nACTION==\u003cspan class=\"token string\"\u003e\"remove\"\u003c/span\u003e, ENV{ID_VENDOR_ID}==\u003cspan class=\"token string\"\u003e\"1ea8\"\u003c/span\u003e, ENV{ID_MODEL_ID}==\u003cspan class=\"token string\"\u003e\"f025\"\u003c/span\u003e, RUN+=\u003cspan class=\"token string\"\u003e\"/usr/local/bin/i3lock\"\u003c/span\u003e\n\\```\n\n最後にrulesを登録し完了.\n\n\u003cspan class=\"token deleted\"\u003e-\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```shell-session[data-file=\"terminal\"]\u003c/span\u003e\n$ udevadm control --reload-rules\n$ service udev reload\n\\```\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"},{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"35b550ae.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 35b550ae83af4efaeadf33471c8ca8a32c1079c8\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2019-08-08-autolock-with-yubikey.md b/_posts/2019-08-08-autolock-with-yubikey.md\nnew file mode 100644\nindex 0000000..f40e591\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2019-08-08-autolock-with-yubikey.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,148 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: 'Linux: Login/sudo with Yubikey'\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2019-08-08\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- diary\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tags:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Linux\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- udev\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- yubikey\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+description: Yubikeyを自宅に忘れて１敗\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## Abstract\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Linux Desktopのログイン時及び`sudo`時にYubikey + Passwordを必須にしてみた.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- ログインした状態でYubikeyを抜くとlockするようにした.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## Env\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Ubuntu 18.04\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- FIDO U2F Security Key(自分は[これ](https://www.amazon.co.jp/dp/B06XHTKFH3/ref=cm_sw_em_r_mt_dp_U_Ha5sDbS6H12P6)つかってます. 端子ガードついてるKey他にも出てほしい)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## Install Dependencies\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ sudo add-apt-repository ppa:yubico/stable\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ sudo apt-get install yubikey-manager-qt yubioath-desktop yubikey-personalization-gui\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## Setup U2F Key\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### U2F Keyの登録\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ mkdir -p $HOME/.config/Yubico\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ pamu2fcfg -u${USER} \u0026#x26;gt; $HOME/.config/Yubico/u2f_keys\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+またバックアップデバイスを追加する場合には`--nouser`をつけて追記[^pamu2fcfg].\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ pamu2fcfg -n \u0026#x26;gt;\u0026#x26;gt; $HOME/.config/Yubico/u2f_keys\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### U2F for SUDO\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+以下の6行目を追記. PAM(Pluggable Authentication Modules)での認証において，password入力後にYubikeyがrequireされるようになる(Yubikeyが無いとauthできない).\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+**`/etc/pam.d/sudo`**\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```diff\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ #%PAM-1.0\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ session    required    pam_env.so readenv=1 user_readenv=0\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ session    required    pam_env.so readenv=1 envfile=/etc/default/locale user_readenv=0\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ @include   common-auth\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e++auth       required    pam_u2f.so\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ @include   common-account\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ @include   common-session-noninteractive\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### U2F for Login\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Display ManagerにGDM(Gnome Display Manager)を用いている場合は以下のファイルに`pam_u2f.so`の行を追記する.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+**`/etc/pam.d/gdm-password`**\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+その他のDMを用いている場合(KDE等)は **`/etc/pam.d/lightdm`** に追記する.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```diff\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ #%PAM-1.0\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ auth     requisite       pam_nologin.so\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ auth     required        pam_succeed_if.so user != root quiet_success\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ @include common-auth\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e++auth     required        pam_u2f.so\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ auth     optional        pam_gnome_keyring.so\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ @include common-account\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ ...omit\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## Auto-lock without U2F\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ここからが本題. U2F Keyの接続が解除されると端末をロックする.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+もともと自分の使っているLaptopには指紋認証センサが付属している．一般に生体認証はU2Fよりもセキュアであるし，自分も異論はない.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ではU2Fが生体認証より優れている点はなにか. 自分の答えは認証の持続性をコントロールできる点である.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+指紋認証を例に取ると，一度ログインした端末は一定時間操作をしない際のオートロックまたはユーザ自身の能動的なログアウトをしない限り，認証を再度必要としない.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+対してU2Fでは**デバイスが接続されている間だけ認証されている**という状態をもたらすことができる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Apple Watchを身に着けた状態でMacの自動ログインが可能[^applewatch]という例がある.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+これはbluetooth接続したU2Fデバイスが一定距離離れるもしくはUSB接続したデバイスをejectすることで端末からログアウトする，という仕様で再現できる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### monitoring U2F key by udev\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+U2F Keyモニターをudevに任せることにする. まず対象のIDを特定する.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`udevadm monitor`でudevのイベントをモニタリングした状態でU2F Keyを抜き差しすると `bind`, `remove` イベントが通知されるので， `$ID_MODEL_ID` 及び `$ID_VENDOR_ID` を取得する.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ udevadm monitor --environment --udev\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+UDEV  [28028.490650] bind     /devices/pci0000:00/0000:00:14.0/usb1/1-3 (usb)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ACTION=bind\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+BUSNUM=001\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+DEVNAME=/dev/bus/usb/001/013\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+DEVNUM=013\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+DEVPATH=/devices/pci0000:00/0000:00:14.0/usb1/1-3\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+DEVTYPE=usb_device\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+DRIVER=usb\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ID_BUS=usb\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ID_MODEL=XXXXX\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ID_MODEL_ENC=XXXXX\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ID_MODEL_ID=f025\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ID_REVISION=0100\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ID_SERIAL=ExcelSecu_EsecuFIDO_HID\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ID_USB_INTERFACES=:030000:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ID_VENDOR=ExcelSecu\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ID_VENDOR_ENC=ExcelSecu\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ID_VENDOR_ID=1ea8\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+MAJOR=189\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+MINOR=12\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+PRODUCT=1ea8/f025/100\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+SEQNUM=12938\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+SUBSYSTEM=usb\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+TYPE=0/0/0\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+USEC_INITIALIZED=28027949334\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+上記の例では `ID_MODEL_ID=f025`，`ID_VENDOR_ID=1ea8` となっている.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+このIDペアを用いて，U2F Key解除時の`udev`ルールを作成する.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+**`/etc/udev/rules.d/xx-u2fkey.rules`** (xxは適当な数字)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```config\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ACTION==\"remove\", ENV{ID_VENDOR_ID}==\"1ea8\", ENV{ID_MODEL_ID}==\"f025\", RUN+=\"/usr/local/bin/i3lock\"\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+最後にrulesを登録し完了.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ udevadm control --reload-rules\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ service udev reload\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+フリーランスという職業柄，PCを所持して企業へ出向くことが多くどうやってセキュリティ担保するかなーと考えてたところ`pamu2fcfg`を見かけたので試してみた.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Yubikeyを忘れて外出するという失態を犯した[^twi]ので既に運用が危ういがデータは守れてるのでよし(よくないが)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## Reference\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[^pamu2fcfg]: [developers.yubico.com/pam-u2f/Manuals/pamu2fcfg.1.html](https://developers.yubico.com/pam-u2f/Manuals/pamu2fcfg.1.html)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[^applewatch]: [support.apple.com/ja-jp/HT206995](https://support.apple.com/ja-jp/HT206995)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[^twi]: [twitter.com/k_0ka/status/1159312312156561408](https://twitter.com/k_0ka/status/1159312312156561408)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- [Enable FIDO U2F USB support](https://wiki.gentoo.org/wiki/Pam_u2f)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- [support.yubico.com#enabling the Yubico PPA on Ubuntu](https://support.yubico.com/support/solutions/articles/15000010964-enabling-the-yubico-ppa-on-ubuntu)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- [support.yubico.com#Ubuntu Linux Login Guide - U2F](https://support.yubico.com/support/solutions/articles/15000011356-ubuntu-linux-login-guide-u2f)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2019-08-08","updatedAt":"2021-04-10"},{"slug":"2019-07-27-linux-usergroup","title":"Linux: 画面の明るさを変更できなくなった","categories":["diary"],"image":"https://koka831.github.io/img/icon.png","tags":["Linux","udev"],"content":"\u003ch2 id=\"tl-dr\"\u003e\u003ca href=\"#tl-dr\"\u003eTL; DR\u003c/a\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e作業ユーザを\u003ccode\u003evideo\u003c/code\u003eグループに追加\u003c/li\u003e\n\u003cli\u003eudevのrulesを追加し\u003ccode\u003ebrightness\u003c/code\u003eデバイスへの書き込み権限を付与\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"概要\"\u003e\u003ca href=\"#%E6%A6%82%E8%A6%81\"\u003e概要\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eThinkpad X1 Carbon(2019)を購入したので，Gentooをインストールした.\nが，F5, F6での明るさ調整が効かなかった. クッソまぶしい.\u003c/p\u003e\n\u003cp\u003e明るさ調整には\u003ccode\u003elight\u003c/code\u003eコマンドを用いたところ，\u003ccode\u003esudo light -A 5\u003c/code\u003eのようにroot権限を用いると調整が行えた.\u003c/p\u003e\n\u003ch2 id=\"解決策\"\u003e\u003ca href=\"#%E8%A7%A3%E6%B1%BA%E7%AD%96\"\u003e解決策\u003c/a\u003e\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e作業ユーザを\u003ccode\u003evideo\u003c/code\u003eグループに追加する.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eusergroupは以下で確認できる.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-sh\"\u003e\u003ccode class=\"language-sh\"\u003e$ cut -d: -f1 /etc/group\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eそのなかでもメジャーなものは以下(独断).\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth align=\"center\"\u003ename\u003c/th\u003e\n\u003cth align=\"center\"\u003erole\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003ewheel\u003c/td\u003e\n\u003ctd align=\"center\"\u003e管理権限作業用グループ\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003elog\u003c/td\u003e\n\u003ctd align=\"center\"\u003e/var/log/ へのアクセス用グループ\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003evideo\u003c/td\u003e\n\u003ctd align=\"center\"\u003eビデオキャプチャ・フレームバッファアクセス\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003edocker\u003c/td\u003e\n\u003ctd align=\"center\"\u003edocker作業用グループ\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-sh\"\u003e\u003ccode class=\"language-sh\"\u003eusermod -aG video ${USER}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003ccode\u003eusermod\u003c/code\u003eコマンドを用いて\u003ccode\u003e$USER\u003c/code\u003eをグループに追加する.\u003cbr\u003e\n例えば\u003ccode\u003e$USER\u003c/code\u003eを\u003ccode\u003edocker\u003c/code\u003eグループに追加した場合, \u003ccode\u003e$USER\u003c/code\u003eは\u003ccode\u003edocker\u003c/code\u003eの操作に管理者権限が不要となる.\u003c/p\u003e\n\u003cp\u003e(ただ第三者が作成したスクリプトであってもroot権限で実行できるということなので，\u003ccode\u003edocker\u003c/code\u003eを用いる場合には\u003ccode\u003enewgrp\u003c/code\u003eを用いて一時的にグループを変更するなどのほうがいいと思う. \u003ccode\u003edocker\u003c/code\u003eの場合権限昇格などのリスクもあるので気をつけよう．お兄さんとの約束だよ)\u003c/p\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e\u003ccode\u003ebrightness\u003c/code\u003eデバイスの書き込み権限を\u003ccode\u003evideo\u003c/code\u003eグループに付与する.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e画面の明るさ(\u003ccode\u003ebrightness\u003c/code\u003e)は\u003ccode\u003eudev\u003c/code\u003eによって管理されている.\n\u003ccode\u003e/usr/lib/udev/rules.d/xx-brightness.rules\u003c/code\u003eを次のように記述する.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003eACTION==\u0026#x26;quot;add\u0026#x26;quot;, SUBSYSTEM==\u0026#x26;quot;backlight\u0026#x26;quot;, RUN+=\u0026#x26;quot;/bin/chgrp video /sys/class/backlight/%k/brightness\u0026#x26;quot;\nACTION==\u0026#x26;quot;add\u0026#x26;quot;, SUBSYSTEM==\u0026#x26;quot;backlight\u0026#x26;quot;, RUN+=\u0026#x26;quot;/bin/chmod g+w /sys/class/backlight/%k/brightness\u0026#x26;quot;\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eこれで起動時に\u003ccode\u003evideo\u003c/code\u003eグループに対して\u003ccode\u003ebrightness\u003c/code\u003eデバイスへの書き込み権限が付与される.\u003c/p\u003e\n\u003ch2 id=\"追記\"\u003e\u003ca href=\"#%E8%BF%BD%E8%A8%98\"\u003e追記\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eかわいい感じになりました. yay\n\u003cfigure\u003e\u003cimg src=\"./img/desktop.png\" alt=\"\"\u003e\u003cfigcaption\u003eimg.1 \u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\u003ch2 id=\"reference\"\u003e\u003ca href=\"#reference\"\u003ereference\u003c/a\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://wiki.archlinux.jp/index.php/%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%A8%E3%82%B0%E3%83%AB%E3%83%BC%E3%83%97\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003earch linux#グループ一覧\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://wiki.archlinux.org/index.php/Backlight\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003earch linux#brightness\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","description":"バルス","commits":[{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"35b550ae.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 35b550ae83af4efaeadf33471c8ca8a32c1079c8\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2019-07-27-linux-usergroup.md b/_posts/2019-07-27-linux-usergroup.md\nnew file mode 100644\nindex 0000000..0bafcf1\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2019-07-27-linux-usergroup.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,65 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: 'Linux: 画面の明るさを変更できなくなった'\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2019-07-27\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- diary\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tags:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Linux\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- udev\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+description: バルス\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## TL; DR\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- 作業ユーザを`video`グループに追加\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- udevのrulesを追加し`brightness`デバイスへの書き込み権限を付与\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## 概要\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Thinkpad X1 Carbon(2019)を購入したので，Gentooをインストールした. \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+が，F5, F6での明るさ調整が効かなかった. クッソまぶしい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+明るさ調整には`light`コマンドを用いたところ，`sudo light -A 5`のようにroot権限を用いると調整が行えた.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## 解決策\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+1. 作業ユーザを`video`グループに追加する.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+usergroupは以下で確認できる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ cut -d: -f1 /etc/group\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+そのなかでもメジャーなものは以下(独断).\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+|name|role|\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+|:---:|:---:|\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+|wheel| 管理権限作業用グループ|\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+|log| /var/log/ へのアクセス用グループ|\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+|video| ビデオキャプチャ・フレームバッファアクセス|\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+|docker| docker作業用グループ|\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+usermod -aG video ${USER}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`usermod`コマンドを用いて`$USER`をグループに追加する.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+例えば`$USER`を`docker`グループに追加した場合, `$USER`は`docker`の操作に管理者権限が不要となる.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+(ただ第三者が作成したスクリプトであってもroot権限で実行できるということなので，`docker`を用いる場合には`newgrp`を用いて一時的にグループを変更するなどのほうがいいと思う. `docker`の場合権限昇格などのリスクもあるので気をつけよう．お兄さんとの約束だよ)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+2. `brightness`デバイスの書き込み権限を`video`グループに付与する.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+画面の明るさ(`brightness`)は`udev`によって管理されている. \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`/usr/lib/udev/rules.d/xx-brightness.rules`を次のように記述する.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ACTION==\"add\", SUBSYSTEM==\"backlight\", RUN+=\"/bin/chgrp video /sys/class/backlight/%k/brightness\"\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ACTION==\"add\", SUBSYSTEM==\"backlight\", RUN+=\"/bin/chmod g+w /sys/class/backlight/%k/brightness\"\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+これで起動時に`video`グループに対して`brightness`デバイスへの書き込み権限が付与される.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## 追記\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+かわいい感じになりました. yay\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+![](./img/desktop.png)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## reference\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- [arch linux#グループ一覧](https://wiki.archlinux.jp/index.php/%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%A8%E3%82%B0%E3%83%AB%E3%83%BC%E3%83%97)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- [arch linux#brightness](https://wiki.archlinux.org/index.php/Backlight)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2019-07-27","updatedAt":"2021-01-30"},{"slug":"2019-07-15-internal-vue","title":"Internal Vue.js 1","categories":["Code Reading"],"image":"https://koka831.github.io/img/icon.png","tags":["Vue","Virtual DOM"],"content":"\u003cp\u003e\u003ca href=\"https://github.com/vuejs/vue\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eVue.js\u003c/a\u003eのreactive systemがどのように実装されているか追ってみた.\n初回はコンパイラの挙動を確認.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eVuejs v2.6.10\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"srccompilerindexjs\"\u003e\u003ca href=\"#srccompilerindexjs\"\u003esrc/compiler/index.js\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003ecompilerのentrypointとなるのが\u003ccode\u003esrc/compiler/index.js\u003c/code\u003e.\u003cbr\u003e\n(Vue.jsは\u003ca href=\"https://flow.org\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eflow\u003c/a\u003eを用いてtype checkを行っている. compiler周りの型は\u003ccode\u003eflow/compiler.js\u003c/code\u003eに記載.)\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eparse(template, options)\u003c/code\u003eでASTを生成し，\u003ccode\u003egenerate(ast, options)\u003c/code\u003eでcodeを生成する.\u003cbr\u003e\nVirtual DOMのpatch/mergeを効率よく行うため，返り値の\u003ccode\u003eCompiledResult\u003c/code\u003eに\u003ccode\u003ecode\u003c/code\u003eだけでなくASTを持たせている.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003estaticRenderFns\u003c/code\u003eについてはparser部分で説明する.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token comment\"\u003e// `createCompilerCreator` allows creating compilers that use alternative\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e// parser/optimizer/codegen, e.g the SSR optimizing compiler.\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e// Here we just export a default compiler using the default parts.\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e createCompiler \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003ecreateCompilerCreator\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003ebaseCompile\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n  \u003cspan class=\"token parameter\"\u003etemplate\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e string\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  options\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eCompilerOptions\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eCompiledResult\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e ast \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eparse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003etemplate\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003etrim\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e options\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eoptions\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eoptimize\u003c/span\u003e \u003cspan class=\"token operator\"\u003e!==\u003c/span\u003e \u003cspan class=\"token boolean\"\u003efalse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003eoptimize\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003east\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e options\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e code \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003egenerate\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003east\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e options\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    ast\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    render\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e code\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003erender\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    staticRenderFns\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e code\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003estaticRenderFns\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"srccompilerparserindexjs\"\u003e\u003ca href=\"#srccompilerparserindexjs\"\u003esrc/compiler/parser/index.js\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003e.vue\u003c/code\u003eファイルからASTを生成する部分. \u003ccode\u003eparse\u003c/code\u003e関数内部で関数定義してて長いので，重要なところだけピックアップする.\u003cbr\u003e\nVueのテンプレートはHTMLのDOMをベースにしていて，特に\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eMustache\u003c/li\u003e\n\u003cli\u003eDirective\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eの2点を拡張記法としてもっている．\u003c/p\u003e\n\u003cp\u003eそのためパース自体は\u003ccode\u003ehtml-parse\u003c/code\u003eを用いており，\u003ccode\u003eparse\u003c/code\u003eの主な仕事はHTML DOMのASTを返すのとパース時のエラー出力となっている．\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token doc-comment comment\"\u003e/**\u003c/span\u003e\n\u003cspan class=\"token doc-comment comment\"\u003e * Convert HTML string to AST.\u003c/span\u003e\n\u003cspan class=\"token doc-comment comment\"\u003e */\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eparse\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n  \u003cspan class=\"token parameter\"\u003etemplate\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e string\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  options\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eCompilerOptions\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eASTElement\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  warn \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e options\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003ewarn\u003c/span\u003e \u003cspan class=\"token operator\"\u003e||\u003c/span\u003e baseWarn\n  \u003cspan class=\"token comment\"\u003e/* omit */\u003c/span\u003e\n\n  \u003cspan class=\"token function\"\u003eparseHTML\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003etemplate\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e/* omit */\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003estart\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003etag\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e attrs\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e unary\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e start\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e end\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token comment\"\u003e/* omit */\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e root \u003cspan class=\"token comment\"\u003e// ASTのroot Node\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e関係ないけど階段状にインポートしてるの好き.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  addProp\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  addAttr\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  baseWarn\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  addHandler\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  addDirective\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  getBindingAttr\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  getAndRemoveAttr\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  getRawBindingAttr\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  pluckModuleFunction\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  getAndRemoveAttrByRegex\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'../helpers'\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"abstract-syntax-tree\"\u003e\u003ca href=\"#abstract-syntax-tree\"\u003eAbstract Syntax Tree\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003egenerate\u003c/code\u003eが受け取る\u003ccode\u003east\u003c/code\u003eの型\u003ccode\u003eASTElement\u003c/code\u003eは\u003ccode\u003eflow/compiler.js\u003c/code\u003eに定義されている．\u003cbr\u003e\nASTは以下の3種類に分類され，\u003ccode\u003eASTNode\u003c/code\u003eがそれぞれの\u003ccode\u003etype\u003c/code\u003eを元に判別している．\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eASTElement\u003c/code\u003e: type: 1\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eASTText\u003c/code\u003e: type: 2\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eASTExpression\u003c/code\u003e: type: 3\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ccode\u003etype ASTNode = ASTElement | ASTText | ASTExpression\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eASTElement\u003c/code\u003eを例にとると以下のようになっている．\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003edeclare type \u003cspan class=\"token maybe-class-name\"\u003eASTElement\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  type\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  tag\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e string\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  attrsList\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token known-class-name class-name\"\u003eArray\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eASTAttr\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  attrsMap\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ekey\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e string\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e any \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  rawAttrsMap\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ekey\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e string\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eASTAttr\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  parent\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eASTElement\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  children\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token known-class-name class-name\"\u003eArray\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eASTNode\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n  \u003cspan class=\"token comment\"\u003e/* omit */\u003c/span\u003e\n  staticRoot\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e boolean\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  text\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e string\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  component\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e string\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003eif\u003c/span\u003e\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e string\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003efor\u003c/span\u003e\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e string\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  transition\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e string \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n  \u003cspan class=\"token comment\"\u003e/* omit */\u003c/span\u003e\n\n  model\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    value\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e string\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    callback\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e string\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    expression\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e string\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eASTの構造は\u003ccode\u003eASTElement\u003c/code\u003eがrootとなり，branchに\u003ccode\u003eASTNode\u003c/code\u003eを再帰的に持つ構造になる.\n\u003ccode\u003estaticRoot?\u003c/code\u003eや\u003ccode\u003ecomponent?\u003c/code\u003e等のパラメータは，その\u003ccode\u003eASTNode\u003c/code\u003e以下が\u003ccode\u003estatic\u003c/code\u003eであるか\u003ccode\u003edynamic\u003c/code\u003eであるか，等レンダリングの最適化の際に参照される．\nこの最適化機構は\u003ccode\u003esrc/compiler/optimizer.js\u003c/code\u003eの\u003ccode\u003emarkStatic\u003c/code\u003e及び\u003ccode\u003emarkStaticRoot\u003c/code\u003eが担う.\u003c/p\u003e\n\u003ch2 id=\"srccompilercodegenindexjs\"\u003e\u003ca href=\"#srccompilercodegenindexjs\"\u003esrc/compiler/codegen/index.js\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003egenerate\u003c/code\u003eはASTから\u003ccode\u003erender\u003c/code\u003eと\u003ccode\u003estaticRenderFns\u003c/code\u003eの２つを生成する．\u003cbr\u003e\n\u003ccode\u003erender\u003c/code\u003eがVueのDynamic Renderingを担当し，\u003ccode\u003estaticRenderFns\u003c/code\u003eは静的な(変更のない)DOMを生成する.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003egenerate\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n  \u003cspan class=\"token parameter\"\u003east\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eASTElement\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  options\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eCompilerOptions\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eCodegenResult\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e state \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eCodegenState\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eoptions\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e code \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e ast \u003cspan class=\"token operator\"\u003e?\u003c/span\u003e \u003cspan class=\"token function\"\u003egenElement\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003east\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e state\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'_c(\"div\")'\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    render\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003ewith(this){return \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003ecode\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e}\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    staticRenderFns\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e state\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003estaticRenderFns\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003ccode\u003egenElement\u003c/code\u003eは\u003ccode\u003eASTElement\u003c/code\u003eの\u003ccode\u003estaticRoot?\u003c/code\u003eや\u003ccode\u003efor?\u003c/code\u003e等を確認し，それぞれのディレクティブ・タグに対応する\u003ccode\u003eElement\u003c/code\u003e, \u003ccode\u003eComponent\u003c/code\u003eを生成する.\n各々の生成は\u003ccode\u003egenStatic\u003c/code\u003e, \u003ccode\u003egenIf\u003c/code\u003eのようにそれぞれのジェネレータで行う．\n各々のジェネレータは受け取ったASTを処理した後に再帰的に\u003ccode\u003egenElement\u003c/code\u003eを呼び出す．\u003cbr\u003e\n最終的に\u003ccode\u003egenElement\u003c/code\u003eは最小単位である\u003ccode\u003eElement\u003c/code\u003eの生成を行う．\u003cbr\u003e\n\u003ccode\u003eElement\u003c/code\u003eは\u003ccode\u003e\u0026#x3C;tag data\u003echildren\u0026#x3C;/tag\u003e\u003c/code\u003eからなるDOMである．\u003c/p\u003e\n\u003cp\u003e以下がその生成部分.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003edata \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003egenData\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eel\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e state\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e/* omit */\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e children \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e el\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003einlineTemplate\u003c/span\u003e \u003cspan class=\"token operator\"\u003e?\u003c/span\u003e \u003cspan class=\"token keyword null nil\"\u003enull\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003egenChildren\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eel\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e state\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\ncode \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003e_c('\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003eel\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003etag\u003c/span\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e'\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003e\n  data \u003cspan class=\"token operator\"\u003e?\u003c/span\u003e \u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003e,\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003edata\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e''\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// data\u003c/span\u003e\n\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003e\n  children \u003cspan class=\"token operator\"\u003e?\u003c/span\u003e \u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003e,\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003echildren\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e''\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// children\u003c/span\u003e\n\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e)\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003ccode\u003eElement\u003c/code\u003eのdata部分は\u003ccode\u003egenData\u003c/code\u003eが担当する. data部分に含まれるのは\u003ccode\u003eclass\u003c/code\u003e, \u003ccode\u003edirective\u003c/code\u003e, \u003ccode\u003emodel\u003c/code\u003e.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003egenData\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003eel\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eASTElement\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e state\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eCodegenState\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e string \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e data \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e'{'\u003c/span\u003e\n\n  \u003cspan class=\"token comment\"\u003e// directives first.\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e// directives may mutate the el's other properties before they are generated.\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e dirs \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003egenDirectives\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eel\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e state\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003edirs\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e data \u003cspan class=\"token operator\"\u003e+=\u003c/span\u003e dirs \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token string\"\u003e','\u003c/span\u003e\n\n  \u003cspan class=\"token comment\"\u003e/* omit */\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e// component v-model\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eel\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003emodel\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    data \u003cspan class=\"token operator\"\u003e+=\u003c/span\u003e \u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003emodel:{value:\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003e\n      el\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003emodel\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003evalue\u003c/span\u003e\n    \u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e,callback:\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003e\n      el\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003emodel\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003ecallback\u003c/span\u003e\n    \u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e,expression:\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003e\n      el\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003emodel\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eexpression\u003c/span\u003e\n    \u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e},\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e/* omit */\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e data\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e最終的に\u003ccode\u003eCompiledResult\u003c/code\u003eが生成される.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003edeclare type \u003cspan class=\"token maybe-class-name\"\u003eCompiledResult\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  ast\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eASTElement\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  render\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e string\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  staticRenderFns\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token known-class-name class-name\"\u003eArray\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003estring\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  stringRenderFns\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token known-class-name class-name\"\u003eArray\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003estring\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  errors\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token known-class-name class-name\"\u003eArray\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003estring \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eWarningMessage\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  tips\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token known-class-name class-name\"\u003eArray\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003estring \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eWarningMessage\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"summary\"\u003e\u003ca href=\"#summary\"\u003eSummary\u003c/a\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eVueのコンパイラは\u003ccode\u003eparser\u003c/code\u003eと\u003ccode\u003egenerator\u003c/code\u003eからなる.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eparser\u003c/code\u003eは\u003ccode\u003ehtml-parse\u003c/code\u003eを元にASTを生成する.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003egenerator\u003c/code\u003eはASTを元に動的部分と静的部分の\u003ccode\u003erender\u003c/code\u003e群を生成する\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"next\"\u003e\u003ca href=\"#next\"\u003eNext\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e次回は\u003ccode\u003esrc/core/observer\u003c/code\u003eを読む.\u003cbr\u003e\n(名前からVueのreactive systemがObserver patternベースなんだろうな)\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/2019/08/08/internal-vue-2/\"\u003e次回\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","description":"internal Vue.js \u0026 read how Vue compiler works","commits":[{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"35b550ae.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 35b550ae83af4efaeadf33471c8ca8a32c1079c8\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2019-07-15-internal-vue.md b/_posts/2019-07-15-internal-vue.md\nnew file mode 100644\nindex 0000000..b460b95\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2019-07-15-internal-vue.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,228 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: 'Internal Vue.js 1'\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2019-07-15\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Code Reading\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tags:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Vue\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Virtual DOM\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+description: internal Vue.js \u0026#x26; read how Vue compiler works\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[Vue.js](https://github.com/vuejs/vue)のreactive systemがどのように実装されているか追ってみた.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+初回はコンパイラの挙動を確認.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Vuejs v2.6.10\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## src/compiler/index.js\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+compilerのentrypointとなるのが`src/compiler/index.js`.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+(Vue.jsは[flow](https://flow.org)を用いてtype checkを行っている. compiler周りの型は`flow/compiler.js`に記載.)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`parse(template, options)`でASTを生成し，`generate(ast, options)`でcodeを生成する.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Virtual DOMのpatch/mergeを効率よく行うため，返り値の`CompiledResult`に`code`だけでなくASTを持たせている.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`staticRenderFns`についてはparser部分で説明する.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```js\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+// `createCompilerCreator` allows creating compilers that use alternative\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+// parser/optimizer/codegen, e.g the SSR optimizing compiler.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+// Here we just export a default compiler using the default parts.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+export const createCompiler = createCompilerCreator(function baseCompile (\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  template: string,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  options: CompilerOptions\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+): CompiledResult {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  const ast = parse(template.trim(), options)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  if (options.optimize !== false) {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    optimize(ast, options)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  const code = generate(ast, options)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  return {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    ast,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    render: code.render,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    staticRenderFns: code.staticRenderFns\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+})\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## src/compiler/parser/index.js\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`.vue`ファイルからASTを生成する部分. `parse`関数内部で関数定義してて長いので，重要なところだけピックアップする.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+VueのテンプレートはHTMLのDOMをベースにしていて，特に\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Mustache\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Directive\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+の2点を拡張記法としてもっている．\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+そのためパース自体は`html-parse`を用いており，`parse`の主な仕事はHTML DOMのASTを返すのとパース時のエラー出力となっている．\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```js\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+/**\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ * Convert HTML string to AST.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ */\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+export function parse (\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  template: string,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  options: CompilerOptions\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+): ASTElement | void {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  warn = options.warn || baseWarn\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  /* omit */\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  parseHTML(template, {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    /* omit */,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    start (tag, attrs, unary, start, end) { /* omit */ },\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  })\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  return root // ASTのroot Node\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+関係ないけど階段状にインポートしてるの好き.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```js\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+import {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  addProp,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  addAttr,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  baseWarn,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  addHandler,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  addDirective,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  getBindingAttr,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  getAndRemoveAttr,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  getRawBindingAttr,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  pluckModuleFunction,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  getAndRemoveAttrByRegex\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+} from '../helpers'\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## Abstract Syntax Tree\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`generate`が受け取る`ast`の型`ASTElement`は`flow/compiler.js`に定義されている．  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ASTは以下の3種類に分類され，`ASTNode`がそれぞれの`type`を元に判別している．\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- `ASTElement`: type: 1\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- `ASTText`: type: 2\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- `ASTExpression`: type: 3\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`type ASTNode = ASTElement | ASTText | ASTExpression`\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`ASTElement`を例にとると以下のようになっている．\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```js\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+declare type ASTElement = {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  type: 1;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  tag: string;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  attrsList: Array\u0026#x26;lt;ASTAttr\u0026#x26;gt;;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  attrsMap: { [key: string]: any };\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  rawAttrsMap: { [key: string]: ASTAttr };\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  parent: ASTElement | void;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  children: Array\u0026#x26;lt;ASTNode\u0026#x26;gt;;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  /* omit */\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  staticRoot?: boolean;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  text?: string;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  component?: string;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  if?: string;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  for?: string;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  transition?: string | true;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  /* omit */\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  model?: {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    value: string;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    callback: string;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    expression: string;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  };\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ASTの構造は`ASTElement`がrootとなり，branchに`ASTNode`を再帰的に持つ構造になる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`staticRoot?`や`component?`等のパラメータは，その`ASTNode`以下が`static`であるか`dynamic`であるか，等レンダリングの最適化の際に参照される．\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+この最適化機構は`src/compiler/optimizer.js`の`markStatic`及び`markStaticRoot`が担う.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## src/compiler/codegen/index.js\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`generate`はASTから`render`と`staticRenderFns`の２つを生成する．  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`render`がVueのDynamic Renderingを担当し，`staticRenderFns`は静的な(変更のない)DOMを生成する.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```js\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+export function generate (\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  ast: ASTElement | void,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  options: CompilerOptions\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+): CodegenResult {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  const state = new CodegenState(options)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  const code = ast ? genElement(ast, state) : '_c(\"div\")'\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  return {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    render: `with(this){return ${code}}`,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    staticRenderFns: state.staticRenderFns\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`genElement`は`ASTElement`の`staticRoot?`や`for?`等を確認し，それぞれのディレクティブ・タグに対応する`Element`, `Component`を生成する.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+各々の生成は`genStatic`, `genIf`のようにそれぞれのジェネレータで行う．\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+各々のジェネレータは受け取ったASTを処理した後に再帰的に`genElement`を呼び出す．  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+最終的に`genElement`は最小単位である`Element`の生成を行う．  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`Element`は`\u0026#x26;lt;tag data\u0026#x26;gt;children\u0026#x26;lt;/tag\u0026#x26;gt;`からなるDOMである．\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+以下がその生成部分.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```js\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+data = genData(el, state)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+/* omit */\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+const children = el.inlineTemplate ? null : genChildren(el, state, true)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+code = `_c('${el.tag}'${\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  data ? `,${data}` : '' // data\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}${\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  children ? `,${children}` : '' // children\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+})`\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`Element`のdata部分は`genData`が担当する. data部分に含まれるのは`class`, `directive`, `model`.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```js\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+export function genData (el: ASTElement, state: CodegenState): string {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  let data = '{'\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  // directives first.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  // directives may mutate the el's other properties before they are generated.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  const dirs = genDirectives(el, state)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  if (dirs) data += dirs + ','\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  /* omit */\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  // component v-model\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  if (el.model) {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    data += `model:{value:${\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+      el.model.value\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    },callback:${\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+      el.model.callback\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    },expression:${\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+      el.model.expression\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }},`\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  /* omit */\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  return data\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+最終的に`CompiledResult`が生成される.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```js\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+declare type CompiledResult = {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  ast: ?ASTElement;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  render: string;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  staticRenderFns: Array\u0026#x26;lt;string\u0026#x26;gt;;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  stringRenderFns?: Array\u0026#x26;lt;string\u0026#x26;gt;;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  errors?: Array\u0026#x26;lt;string | WarningMessage\u0026#x26;gt;;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  tips?: Array\u0026#x26;lt;string | WarningMessage\u0026#x26;gt;;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+};\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## Summary\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Vueのコンパイラは`parser`と`generator`からなる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- `parser`は`html-parse`を元にASTを生成する.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- `generator`はASTを元に動的部分と静的部分の`render`群を生成する\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## Next\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+次回は`src/core/observer`を読む.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+(名前からVueのreactive systemがObserver patternベースなんだろうな)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- [次回](/2019/08/08/internal-vue-2/)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2019-07-15","updatedAt":"2021-01-30"},{"slug":"2019-06-07-lie-algebra","title":"Lie Algebra","categories":["diary"],"image":"https://koka831.github.io/img/icon.png","tags":["Lie Algebra"],"content":"\u003cp\u003e\u003ca href=\"https://nefrock.connpass.com/event/133937/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eLie Algebraの話\u003c/a\u003eを聞いたときのメモ.\u003c/p\u003e\n\u003cp\u003eベクトル空間を有限次元/体\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eK\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eK\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.07153em;\"\u003eK\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eを複素数体とする\n因数分解の出来る体.\u003c/p\u003e\n\u003cp\u003e既約可容系 → ユークリッド空間\u003c/p\u003e\n\u003cp\u003eベクトル空間上に演算を導入する系っぽい．\u003c/p\u003e\n\u003cp\u003e\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsup\u003e\u003cmi\u003eR\u003c/mi\u003e\u003cmn\u003e3\u003c/mn\u003e\u003c/msup\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eR^3\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.00773em;\"\u003eR\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.8141079999999999em;\"\u003e\u003cspan style=\"top:-3.063em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e3\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eにおいて\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e交代性\u003c/li\u003e\n\u003cli\u003eヤコビの恒等式\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eがなりたつ\u003c/p\u003e\n\u003cp\u003eリー\u003cstrong\u003e環\u003c/strong\u003eって名前だけど加法に関してリー群をなすわけではないっぽい?\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eこれ環？\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e既約可容系が図形に対応するの何でなん\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cstrong\u003e感想\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e後半2/3ほぼほぼわからんかった.\u003c/p\u003e","description":"リー環論完全に理解した","commits":[{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"35b550ae.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 35b550ae83af4efaeadf33471c8ca8a32c1079c8\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2019-06-07-lie-algebra.md b/_posts/2019-06-07-lie-algebra.md\nnew file mode 100644\nindex 0000000..d94b869\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2019-06-07-lie-algebra.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,33 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: 'Lie Algebra'\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2019-06-07\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - diary\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tags:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - Lie Algebra\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+description: リー環論完全に理解した\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[Lie Algebraの話](https://nefrock.connpass.com/event/133937/)を聞いたときのメモ.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ベクトル空間を有限次元/体$K$を複素数体とする\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+因数分解の出来る体.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+既約可容系 → ユークリッド空間\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ベクトル空間上に演算を導入する系っぽい．\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$R^3$において\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- 交代性\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- ヤコビの恒等式\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+がなりたつ\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+リー**環**って名前だけど加法に関してリー群をなすわけではないっぽい?\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- これ環？\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+既約可容系が図形に対応するの何でなん\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+**感想**\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+後半2/3ほぼほぼわからんかった.\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2019-06-07","updatedAt":"2021-01-30"},{"slug":"2019-05-20-abc126","title":"ABC126","categories":["Competitive Programming"],"image":"https://koka831.github.io/img/icon.png","tags":["AtCoder","TODO"],"content":"\u003cp\u003eAtCoder Beginners Contest 126の参加記録.\n今回から6問100分になった.\u003c/p\u003e\n\u003ch2 id=\"d-even-relation\"\u003e\u003ca href=\"#d-even-relation\"\u003eD-Even Relation\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eN\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eN\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e頂点の木があり、頂点\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003eu\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eu_i\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003eu\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.31166399999999994em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eと\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003ev\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ev_i\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03588em;\"\u003ev\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.31166399999999994em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e間の長さが\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003ew\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ew_i\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02691em;\"\u003ew\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.31166399999999994em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eのとき、距離が偶数である頂点を全て同色で塗り分ける.\u003c/p\u003e\n\u003cp\u003e偶数の場合を\u003ccode\u003e0\u003c/code\u003e(白), 奇数の場合を\u003ccode\u003e1\u003c/code\u003e(黒)とする.\n与えられるグラフは木なので閉路が存在しない。したがって一点を\u003ccode\u003e0\u003c/code\u003eと決めてしまって、そこからの距離の偶奇が等しければ\u003ccode\u003e0\u003c/code\u003e, 異なれば\u003ccode\u003e1\u003c/code\u003eのように塗り分ければいい.\nグラフの探索部分はDFSでできる.\u003c/p\u003e\n\u003ch3 id=\"解答\"\u003e\u003ca href=\"#%E8%A7%A3%E7%AD%94\"\u003e解答\u003c/a\u003e\u003c/h3\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e n \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread_one\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e edge \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token macro property\"\u003evec!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eVec\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e n\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e _ \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003en \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eu\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e v\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e w\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        edge\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eu\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003epush\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ev\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e w\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        edge\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ev\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003epush\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eu\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e w\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e color \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token macro property\"\u003evec!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e n\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e cost \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token macro property\"\u003evec!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e n\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e q \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eVecDeque\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    q\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003epush_back\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    color\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ewhile\u003c/span\u003e \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSome\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eu\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e q\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003epop_front\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ev\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e w\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e edge\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eu\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eiter\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e color\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ev\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e!=\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token keyword\"\u003econtinue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n            cost\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ev\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e cost\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eu\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e w\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecost\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ev\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e cost\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eu\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e color\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ev\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e color\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eu\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e color\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ev\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e color\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eu\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n            q\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003epush_front\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ev\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003en \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"{}\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e color\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"e-1-or-2\"\u003e\u003ca href=\"#e-1-or-2\"\u003eE-1 or 2\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmi\u003eX\u003c/mi\u003e\u003c/msub\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003eB\u003c/mi\u003e\u003cmi\u003eY\u003c/mi\u003e\u003c/msub\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003eZ\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eA_X + B_Y + Z_i % 2 == 0\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.32833099999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\"\u003eX\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e+\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05017em;\"\u003eB\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.32833099999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\"\u003eY\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e+\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.07153em;\"\u003eZ\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.31166399999999994em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eを満たす組が\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eM\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eM\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eM\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e組与えられる.\n\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmi\u003eX\u003c/mi\u003e\u003c/msub\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003eB\u003c/mi\u003e\u003cmi\u003eY\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eA_X, B_Y\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.32833099999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\"\u003eX\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05017em;\"\u003eB\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.32833099999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\"\u003eY\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eにはそれぞれ\u003ccode\u003e1\u003c/code\u003eまたは\u003ccode\u003e2\u003c/code\u003eが書かれている.\nこのとき数字が不確定なカードは何枚か.\u003c/p\u003e\n\u003cp\u003e場合分けをしてみる.\n\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003eZ\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eZ_i\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.07153em;\"\u003eZ\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.31166399999999994em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eが偶数の場合、\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmi\u003eX\u003c/mi\u003e\u003c/msub\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003eB\u003c/mi\u003e\u003cmi\u003eY\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eA_X + B_Y\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.32833099999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\"\u003eX\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e+\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05017em;\"\u003eB\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.32833099999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\"\u003eY\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eは偶数となるので\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmi\u003eX\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eA_X\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.32833099999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\"\u003eX\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eと\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003eB\u003c/mi\u003e\u003cmi\u003eY\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eB_Y\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05017em;\"\u003eB\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.32833099999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\"\u003eY\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eの偶奇は等しい.\n\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003eZ\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eZ_i\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.07153em;\"\u003eZ\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.31166399999999994em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eが奇数の場合、\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmi\u003eX\u003c/mi\u003e\u003c/msub\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003eB\u003c/mi\u003e\u003cmi\u003eY\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eA_X + B_Y\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.32833099999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\"\u003eX\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e+\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05017em;\"\u003eB\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.32833099999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\"\u003eY\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eは奇数となるので\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmi\u003eX\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eA_X\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.32833099999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\"\u003eX\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eと\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003eB\u003c/mi\u003e\u003cmi\u003eY\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eB_Y\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05017em;\"\u003eB\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.32833099999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\"\u003eY\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eの偶奇は異なる.\u003c/p\u003e\n\u003cp\u003eつまり\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003eZ\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eZ_i\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.07153em;\"\u003eZ\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.31166399999999994em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eの偶奇に依らず\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmi\u003eX\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eA_X\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.32833099999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\"\u003eX\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eがわかれば\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003eB\u003c/mi\u003e\u003cmi\u003eY\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eB_Y\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05017em;\"\u003eB\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.32833099999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\"\u003eY\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eの数字がわかる.\nよって各組をグルーピングしてあげて、最終的なグループ数を求めればよい.\u003c/p\u003e\n\u003ch3 id=\"解答-1\"\u003e\u003ca href=\"#%E8%A7%A3%E7%AD%94-1\"\u003e解答\u003c/a\u003e\u003c/h3\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003en\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e m\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e uf \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eUnionFind\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003en\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e _ \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003em \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e y\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e _\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        uf\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eunite\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e y\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e hs \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eHashSet\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003en \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e hs\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003einsert\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003euf\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003efind\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"{}\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e hs\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003elen\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"f-xor-matching\"\u003e\u003ca href=\"#f-xor-matching\"\u003eF-XOR Matching\u003c/a\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ea\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ea\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ea\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eは\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmn\u003e0\u003c/mn\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e0\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e0\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e以上\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsup\u003e\u003cmn\u003e2\u003c/mn\u003e\u003cmi\u003eM\u003c/mi\u003e\u003c/msup\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e2^M\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8413309999999999em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord\"\u003e2\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.8413309999999999em;\"\u003e\u003cspan style=\"top:-3.063em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\"\u003eM\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e未満の整数をちょうど２つずつ含む\u003c/li\u003e\n\u003cli\u003e\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003ea\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003ea\u003c/mi\u003e\u003cmi\u003ej\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ea_i = a_j\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003ea\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.31166399999999994em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003ea\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.311664em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\"\u003ej\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.286108em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eを満たす\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003ej\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmo\u003e\u0026#x3C;\u003c/mo\u003e\u003cmi\u003ej\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ei, j (i \u0026#x3C; j)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ei\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05724em;\"\u003ej\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ei\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05724em;\"\u003ej\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eについて, \u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003ea\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ea_i\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003ea\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.31166399999999994em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e xor \u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003ea\u003c/mi\u003e\u003cmrow\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/mrow\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ea_{i+1}\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.638891em;vertical-align:-0.208331em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003ea\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.311664em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003cspan class=\"mbin mtight\"\u003e+\u003c/span\u003e\u003cspan class=\"mord mtight\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.208331em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e xor ... xor \u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003ea\u003c/mi\u003e\u003cmi\u003ej\u003c/mi\u003e\u003c/msub\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmi\u003eK\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ea_j = K\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003ea\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.311664em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\"\u003ej\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.286108em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.07153em;\"\u003eK\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eを満たす長さ\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsup\u003e\u003cmn\u003e2\u003c/mn\u003e\u003cmrow\u003e\u003cmi\u003eM\u003c/mi\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/mrow\u003e\u003c/msup\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e2^{M+1}\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8413309999999999em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord\"\u003e2\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.8413309999999999em;\"\u003e\u003cspan style=\"top:-3.063em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\"\u003eM\u003c/span\u003e\u003cspan class=\"mbin mtight\"\u003e+\u003c/span\u003e\u003cspan class=\"mord mtight\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eの数列\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ea\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ea\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ea\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eを構築する.\u003c/p\u003e\n\u003ch3 id=\"解答-2\"\u003e\u003ca href=\"#%E8%A7%A3%E7%AD%94-2\"\u003e解答\u003c/a\u003e\u003c/h3\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"所感\"\u003e\u003ca href=\"#%E6%89%80%E6%84%9F\"\u003e所感\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eDで\u003ccode\u003epush_front()\u003c/code\u003eとするところを\u003ccode\u003epush_back()\u003c/code\u003eとしてしまい(DFSのつもりがBFS), それに気づけなかった。\u003c/p\u003e\n\u003cp\u003eEは最初矛盾があるケースを考えてしまい結局誤読のまま.\u003cbr\u003e\nFはこれから考える.\u003cbr\u003e\n最近この時間帯に眠くなってしまうので次回は仮眠してから参加する。\u003c/p\u003e","description":"考察","commits":[{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"35b550ae.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 35b550ae83af4efaeadf33471c8ca8a32c1079c8\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2019-05-20-abc126.md b/_posts/2019-05-20-abc126.md\nnew file mode 100644\nindex 0000000..5be04f4\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2019-05-20-abc126.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,106 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: ABC126\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2019-05-20\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Competitive Programming\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tags:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - AtCoder\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - TODO\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+description: 考察\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+AtCoder Beginners Contest 126の参加記録.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+今回から6問100分になった.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## [D-Even Relation](https://atcoder.jp/contests/abc126/tasks/abc126_d)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$N$頂点の木があり、頂点$u_i$と$v_i$間の長さが$w_i$のとき、距離が偶数である頂点を全て同色で塗り分ける.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+偶数の場合を`0`(白), 奇数の場合を`1`(黒)とする.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+与えられるグラフは木なので閉路が存在しない。したがって一点を`0`と決めてしまって、そこからの距離の偶奇が等しければ`0`, 異なれば`1`のように塗り分ければいい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+グラフの探索部分はDFSでできる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 解答\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn main() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let n = read_one::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut edge = vec![Vec::new(); n];\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for _ in 0..n - 1 {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let (u, v, w) = {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            let i = read::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            (i[0] - 1, i[1] - 1, i[2])\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        };\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        edge[u].push((v, w));\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        edge[v].push((u, w));\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut color = vec![2; n];\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut cost = vec![0; n];\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut q = VecDeque::new();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    q.push_back(0);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    color[0] = 0;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    while let Some(u) = q.pop_front() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        for \u0026#x26;(v, w) in edge[u].iter() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            if color[v] != 2 { continue; }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            cost[v] = cost[u] + w;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            if (cost[v] - cost[u]) % 2 == 0 { color[v] = color[u]; }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            else { color[v] = 1 - color[u]; }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            q.push_front(v);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for i in 0..n { println!(\"{}\", color[i]); }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## [E-1 or 2](https://atcoder.jp/contests/abc126/tasks/abc126_e)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$A_X + B_Y + Z_i % 2 == 0$を満たす組が$M$組与えられる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$A_X, B_Y$にはそれぞれ`1`または`2`が書かれている.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+このとき数字が不確定なカードは何枚か.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+場合分けをしてみる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$Z_i$が偶数の場合、$A_X + B_Y$は偶数となるので$A_X$と$B_Y$の偶奇は等しい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$Z_i$が奇数の場合、$A_X + B_Y$は奇数となるので$A_X$と$B_Y$の偶奇は異なる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+つまり$Z_i$の偶奇に依らず$A_X$がわかれば$B_Y$の数字がわかる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+よって各組をグルーピングしてあげて、最終的なグループ数を求めればよい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 解答\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn main() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let (n, m) = {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let i = read::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        (i[0], i[1])\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    };\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut uf = UnionFind::new(n);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for _ in 0..m {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let (x, y, _) = {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            let i = read::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            (i[0] - 1, i[1] - 1, i[2])\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        };\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        uf.unite(x, y)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut hs = HashSet::new();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for i in 0..n { hs.insert(uf.find(i)); }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    println!(\"{}\", hs.len());\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## [F-XOR Matching](https://atcoder.jp/contests/abc126/tasks/abc126_f)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- $a$は$0$以上$2^M$未満の整数をちょうど２つずつ含む\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- $a_i = a_j$を満たす$i, j (i \u0026#x26;lt; j)$について, $a_i$ xor $a_{i+1}$ xor ... xor $a_j = K$\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+を満たす長さ$2^{M+1}$の数列$a$を構築する.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 解答\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## 所感\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Dで`push_front()`とするところを`push_back()`としてしまい(DFSのつもりがBFS), それに気づけなかった。\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Eは最初矛盾があるケースを考えてしまい結局誤読のまま.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Fはこれから考える.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+最近この時間帯に眠くなってしまうので次回は仮眠してから参加する。\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2019-05-20","updatedAt":"2021-01-30"},{"slug":"2019-03-15-candy-distribution","title":"ABC105-D: Candy Distribution","categories":["Competitive Programming"],"image":"https://koka831.github.io/img/icon.png","tags":["累積和"],"content":"\u003ch2 id=\"概要\"\u003e\u003ca href=\"#%E6%A6%82%E8%A6%81\"\u003e概要\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eN\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eN\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e要素の配列\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmi\u003eN\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eA_N\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.32833099999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e(\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eN\u003c/mi\u003e\u003cmo\u003e≤\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003cmsup\u003e\u003cmn\u003e0\u003c/mn\u003e\u003cmn\u003e5\u003c/mn\u003e\u003c/msup\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eN \\leq 10^5\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8193em;vertical-align:-0.13597em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e≤\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e1\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord\"\u003e0\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.8141079999999999em;\"\u003e\u003cspan style=\"top:-3.063em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e5\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e)に\n\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsubsup\u003e\u003cmo\u003e∑\u003c/mo\u003e\u003cmrow\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmi\u003el\u003c/mi\u003e\u003c/mrow\u003e\u003cmi\u003er\u003c/mi\u003e\u003c/msubsup\u003e\u003cmsub\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003cmi mathvariant=\"normal\"\u003e%\u003c/mi\u003e\u003cmi\u003em\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmn\u003e0\u003c/mn\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\sum^{r}_{i = l} A_i \\% m = 0\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1.104002em;vertical-align:-0.29971000000000003em;\"\u003e\u003c/span\u003e\u003cspan class=\"mop\"\u003e\u003cspan class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\"\u003e∑\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.804292em;\"\u003e\u003cspan style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003cspan class=\"mrel mtight\"\u003e=\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\"\u003el\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.2029em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\"\u003er\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.29971000000000003em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.31166399999999994em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e%\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003em\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e0\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eを満たす\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003el\u003c/mi\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003er\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e(l, r)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.01968em;\"\u003el\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02778em;\"\u003er\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eペアはいくつあるか.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e連続区間なので, 累積和を用いて区間\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003el\u003c/mi\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003er\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e(l, r)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.01968em;\"\u003el\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02778em;\"\u003er\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eの和の余りを表せないか考える.\u003cbr\u003e\n\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmi\u003ek\u003c/mi\u003e\u003c/msub\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmsubsup\u003e\u003cmo\u003e∑\u003c/mo\u003e\u003cmrow\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmn\u003e0\u003c/mn\u003e\u003c/mrow\u003e\u003cmi\u003ek\u003c/mi\u003e\u003c/msubsup\u003e\u003cmsub\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eS_k = \\sum^{k}_{i=0} A_i\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05764em;\"\u003eS\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.33610799999999996em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\"\u003ek\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1.2887179999999998em;vertical-align:-0.29971000000000003em;\"\u003e\u003c/span\u003e\u003cspan class=\"mop\"\u003e\u003cspan class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\"\u003e∑\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.9890079999999999em;\"\u003e\u003cspan style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003cspan class=\"mrel mtight\"\u003e=\u003c/span\u003e\u003cspan class=\"mord mtight\"\u003e0\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.2029em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\"\u003ek\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.29971000000000003em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.31166399999999994em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e とすると, \u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003cmi mathvariant=\"normal\"\u003e%\u003c/mi\u003e\u003cmi\u003em\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eS_i \\% m\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.9em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05764em;\"\u003eS\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.31166399999999994em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e%\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003em\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eで表せる.\n区間\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003el\u003c/mi\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003er\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e(l, r)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.01968em;\"\u003el\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02778em;\"\u003er\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eの場合には, \u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmrow\u003e\u003cmo fence=\"true\"\u003e(\u003c/mo\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003er\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003el\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo fence=\"true\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cmi mathvariant=\"normal\"\u003e%\u003c/mi\u003e\u003cmi\u003em\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\left(S(r) - S(l)\\right) \\% m\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"minner\"\u003e\u003cspan class=\"mopen delimcenter\" style=\"top:0em;\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05764em;\"\u003eS\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02778em;\"\u003er\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e−\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05764em;\"\u003eS\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.01968em;\"\u003el\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mclose delimcenter\" style=\"top:0em;\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e%\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003em\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eとなる.\u003cbr\u003e\nただ, 上式だと余りを求める際に\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003er\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003el\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eS(r), S(l)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05764em;\"\u003eS\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02778em;\"\u003er\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05764em;\"\u003eS\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.01968em;\"\u003el\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e両端が必要になるので, ２重ループになってしまい, まだ計算量を削る必要がある.\u003cbr\u003e\nこれは \u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003er\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003el\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmi mathvariant=\"normal\"\u003e%\u003c/mi\u003e\u003cmi\u003em\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmn\u003e0\u003c/mn\u003e\u003cmtext\u003e  \u003c/mtext\u003e\u003cmo\u003e⟺\u003c/mo\u003e\u003cmtext\u003e  \u003c/mtext\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003er\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo\u003e≡\u003c/mo\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003el\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmtext\u003e \u003c/mtext\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003em\u003c/mi\u003e\u003cmi\u003eo\u003c/mi\u003e\u003cmi\u003ed\u003c/mi\u003e\u003cmtext\u003e \u003c/mtext\u003e\u003cmi\u003em\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eS(r) - S(l) \\% m == 0 \\iff S(r) \\equiv S(l) \\ (mod \\: m)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05764em;\"\u003eS\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02778em;\"\u003er\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e−\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05764em;\"\u003eS\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.01968em;\"\u003el\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mord\"\u003e%\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003em\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e==\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.66844em;vertical-align:-0.024em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e0\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e⟺\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05764em;\"\u003eS\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02778em;\"\u003er\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e≡\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05764em;\"\u003eS\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.01968em;\"\u003el\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\"\u003e \u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003em\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eo\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ed\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003em\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eと変形できるので, \u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmi mathvariant=\"normal\"\u003e%\u003c/mi\u003e\u003cmi\u003em\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eS(i) \\% m\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05764em;\"\u003eS\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ei\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mord\"\u003e%\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003em\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eを累積和として持てば\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eO\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003eN\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eO(N)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02778em;\"\u003eO\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eで計算できる.\u003c/p\u003e\n\u003ch2 id=\"解答\"\u003e\u003ca href=\"#%E8%A7%A3%E7%AD%94\"\u003e解答\u003c/a\u003e\u003c/h2\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003en\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e m\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e an \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e rem \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eHashMap\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e cs \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token macro property\"\u003evec!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e n\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    cs\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e an\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e m\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token operator\"\u003e*\u003c/span\u003erem\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eentry\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecs\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eor_insert\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+=\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003en \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        cs\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecs\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e an\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e m\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token operator\"\u003e*\u003c/span\u003erem\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eentry\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecs\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eor_insert\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+=\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e ans \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e rem\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eiter\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003emap\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token closure-params\"\u003e\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e_\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x26;\u003c/span\u003enum\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e num \u003cspan class=\"token operator\"\u003e\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token function\"\u003encr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003enum\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003esum\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"{}\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ans \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e rem\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eget\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eunwrap_or\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"まとめ\"\u003e\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003eまとめ\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsubsup\u003e\u003cmo\u003e∑\u003c/mo\u003e\u003cmrow\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmi\u003el\u003c/mi\u003e\u003c/mrow\u003e\u003cmi\u003er\u003c/mi\u003e\u003c/msubsup\u003e\u003cmsub\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003cmi mathvariant=\"normal\"\u003e%\u003c/mi\u003e\u003cmi\u003em\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmn\u003e0\u003c/mn\u003e\u003cmtext\u003e  \u003c/mtext\u003e\u003cmo\u003e⟺\u003c/mo\u003e\u003cmtext\u003e  \u003c/mtext\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003er\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003el\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmi mathvariant=\"normal\"\u003e%\u003c/mi\u003e\u003cmi\u003em\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmn\u003e0\u003c/mn\u003e\u003cmtext\u003e  \u003c/mtext\u003e\u003cmo\u003e⟺\u003c/mo\u003e\u003cmtext\u003e  \u003c/mtext\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003er\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo\u003e≡\u003c/mo\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003el\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmtext\u003e \u003c/mtext\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003em\u003c/mi\u003e\u003cmi\u003eo\u003c/mi\u003e\u003cmi\u003ed\u003c/mi\u003e\u003cmtext\u003e \u003c/mtext\u003e\u003cmi\u003em\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\sum^{r}_{i = l} A_i \\% m = 0 \\iff (S(r) - S(l) \\% m = 0 \\iff S(r) \\equiv S(l) \\ (mod \\: m)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1.104002em;vertical-align:-0.29971000000000003em;\"\u003e\u003c/span\u003e\u003cspan class=\"mop\"\u003e\u003cspan class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\"\u003e∑\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.804292em;\"\u003e\u003cspan style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003cspan class=\"mrel mtight\"\u003e=\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\"\u003el\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.2029em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\"\u003er\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.29971000000000003em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.31166399999999994em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e%\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003em\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.66844em;vertical-align:-0.024em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e0\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e⟺\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05764em;\"\u003eS\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02778em;\"\u003er\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e−\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05764em;\"\u003eS\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.01968em;\"\u003el\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mord\"\u003e%\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003em\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.66844em;vertical-align:-0.024em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e0\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e⟺\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05764em;\"\u003eS\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02778em;\"\u003er\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e≡\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05764em;\"\u003eS\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.01968em;\"\u003el\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\"\u003e \u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003em\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eo\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ed\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003em\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/p\u003e","description":"余りの累積和","commits":[{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"35b550ae.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 35b550ae83af4efaeadf33471c8ca8a32c1079c8\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2019-03-15-candy-distribution.md b/_posts/2019-03-15-candy-distribution.md\nnew file mode 100644\nindex 0000000..aa1bd53\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2019-03-15-candy-distribution.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,54 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: 'ABC105-D: Candy Distribution'\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2019-03-15\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Competitive Programming\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tags:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- 累積和\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+description: 余りの累積和\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## 概要\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$N$要素の配列$A_N$($N \\leq 10^5$)に\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$\\sum^{r}_{i = l} A_i \\% m = 0$を満たす$(l, r)$ペアはいくつあるか.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+連続区間なので, 累積和を用いて区間$(l, r)$の和の余りを表せないか考える.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$S_k = \\sum^{k}_{i=0} A_i$ とすると, $S_i \\% m$で表せる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+区間$(l, r)$の場合には, $\\left(S(r) - S(l)\\right) \\% m$となる.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ただ, 上式だと余りを求める際に$S(r), S(l)$両端が必要になるので, ２重ループになってしまい, まだ計算量を削る必要がある.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+これは $S(r) - S(l) \\% m == 0 \\iff S(r) \\equiv S(l) \\ (mod \\: m)$と変形できるので, $S(i) \\% m$を累積和として持てば$O(N)$で計算できる.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## 解答\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn main() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let (n, m) = {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let i = read::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        (i[0], i[1])\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    };\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let an = read::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut rem = HashMap::new();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut cs = vec![0; n];\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    cs[0] = an[0] % m;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    *rem.entry(cs[0]).or_insert(0) += 1;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for i in 1..n {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        cs[i] = (cs[i - 1] + an[i]) % m;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        *rem.entry(cs[i]).or_insert(0) += 1;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let ans = rem.iter()\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        .map(|(_, \u0026#x26;num)| if num \u0026#x26;gt;= 2 { ncr(num, 2) } else { 0 })\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        .sum::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    println!(\"{}\", ans + rem.get(\u0026#x26;0).unwrap_or(\u0026#x26;0));\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## まとめ\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$\\sum^{r}_{i = l} A_i \\% m = 0 \\iff (S(r) - S(l) \\% m = 0 \\iff S(r) \\equiv S(l) \\ (mod \\: m)$\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2019-03-15","updatedAt":"2021-01-30"},{"slug":"2019-03-08-unionfind","title":"UnionFind","categories":["Competitive Programming"],"image":"https://koka831.github.io/img/icon.png","tags":["Graph","TODO"],"content":"\u003cp\u003e\u003ca href=\"https://atcoder.jp/contests/abc120\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eAtCoder Beginners Contest 120\u003c/a\u003e で連結成分のsizeを計算するdisjoint-setの問題が出題された.\nそれまでrankを用いたUnion-Findしか経験がなかったので, この機会にまとめる.\u003c/p\u003e\n\u003ch2 id=\"union-find\"\u003e\u003ca href=\"#union-find\"\u003eUnion-Find\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eUnion-Findは要素が同一の集合に含まれるかどうかを判定するデータ構造.\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eQuery\u003c/th\u003e\n\u003cth\u003eProcess\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eunite(x, y)\u003c/td\u003e\n\u003ctd\u003eX(x \u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmo\u003e∈\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\in\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e∈\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e X)とY(y \u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmo\u003e∈\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\in\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e∈\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e Y)をマージする\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003esame(x, y)\u003c/td\u003e\n\u003ctd\u003eX == Y か判定する\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003eの操作を\u003c/p\u003e\n\u003cp\u003e各要素を1つのノード, 集合を木と表現する.\n要素が同一の集合に含まれる場合, それらの要素は同一の木のノードである.\u003c/p\u003e\n\u003cp\u003e上記操作をならし計算量\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eO\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003eα\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eO(\\alpha(n))\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02778em;\"\u003eO\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.0037em;\"\u003eα\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003en\u003c/span\u003e\u003cspan class=\"mclose\"\u003e))\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eで行う\u003csup id=\"fnref-1\"\u003e\u003ca href=\"#fn-1\" class=\"footnote-ref\"\u003e1\u003c/a\u003e\u003c/sup\u003eためのマージ戦略が以下の経路圧縮とrankである.\u003c/p\u003e\n\u003ch3 id=\"経路圧縮\"\u003e\u003ca href=\"#%E7%B5%8C%E8%B7%AF%E5%9C%A7%E7%B8%AE\"\u003e経路圧縮\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e要素が同一の木のノードであるか判定する場合, 各要素のrootが同一かどうか見ればよい.\nただその場合木の高さだけ再帰的に親ノードを辿る必要がある.\u003cbr\u003e\nそこで, 親ノードを調べる際に調べたノードをrootに直接つなぎ直すことで,次回以降の判定時の計算量を\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eO\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eO(1)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02778em;\"\u003eO\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord\"\u003e1\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eに削減する.\u003c/p\u003e\n\u003ch3 id=\"rank\"\u003e\u003ca href=\"#rank\"\u003eRank\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eu\u003c/mi\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmi\u003ee\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eunite()\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eu\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eni\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003et\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ee\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e操作時に木の高さが高い方を親として, 低い方を高い方に繋げるようにする.\u003c/p\u003e\n\u003cp\u003eここで, 経路圧縮と併用する場合には圧縮前の高さでrankを持つ必要がある.\n経路圧縮は\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ef\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmi\u003ed\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003efind()\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10764em;\"\u003ef\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ein\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ed\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e操作時に行うため, \u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eu\u003c/mi\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmi\u003ee\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eunite()\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eu\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eni\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003et\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ee\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eの段階では必ずしも木の高さが\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e1\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eとなっている保証はない.\u003c/p\u003e\n\u003cdetails\u003e\n\u003csummary\u003e以下は経路圧縮のみの実装例.\u003c/summary\u003e\n\u003cdiv\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003estruct\u003c/span\u003e \u003cspan class=\"token type-definition class-name\"\u003eUnionFind\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  par\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eVec\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eimpl\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eUnionFind\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003en\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eSelf\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token class-name\"\u003eUnionFind\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      par\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003en\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ecollect\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n  \u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003eunite\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e x\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e y\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e px \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003efind\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e py \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003efind\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ey\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e px \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e py \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003epar\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003epy\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e px\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n  \u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003esame\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e x\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e y\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ebool\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003efind\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003efind\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ey\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n  \u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003efind\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e x\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003epar\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e x \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e x \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token comment\"\u003e// 経路圧縮\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e p \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003epar\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003epar\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003efind\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ep\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003epar\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003c/details\u003e\n\u003ch2 id=\"decayed-bridges\"\u003e\u003ca href=\"#decayed-bridges\"\u003eDecayed Bridges\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e本題.\u003c/p\u003e\n\u003cp\u003e\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003en\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003en\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003en\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e頂点\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003em\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003em\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003em\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e辺の無向単純グラフの辺\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmo\u003e∈\u003c/mo\u003e\u003cmi\u003eM\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ei \\in M\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.69862em;vertical-align:-0.0391em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ei\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e∈\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eM\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eを順番に取り除いたとき, 時刻\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ei\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eでアクセスできない頂点が何組あるか.\u003c/p\u003e\n\u003ch3 id=\"かんがえたこと\"\u003e\u003ca href=\"#%E3%81%8B%E3%82%93%E3%81%8C%E3%81%88%E3%81%9F%E3%81%93%E3%81%A8\"\u003eかんがえたこと\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eUnion-Findでは要素を統合することはできても分割操作は行えない.\n辺を除去する操作を考える場合にはグラフ全体を保持する必要が出てきてしまう. でも\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003em\u003c/mi\u003e\u003cmo\u003e≤\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003cmsup\u003e\u003cmn\u003e0\u003c/mn\u003e\u003cmn\u003e5\u003c/mn\u003e\u003c/msup\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003en, m \\leq 10^5\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8304100000000001em;vertical-align:-0.19444em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003en\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003em\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e≤\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e1\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord\"\u003e0\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.8141079999999999em;\"\u003e\u003cspan style=\"top:-3.063em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e5\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eで隣接グラフを持つのはエグいし連結判定が厳しい.\u003c/p\u003e\n\u003cp\u003eでは操作を巻き戻すとどうなるかを考えた.\u003c/p\u003e\n\u003cp\u003eまず辺をすべて取り除いた状態から開始し，辺を追加していく.\u003cbr\u003e\nこのアプローチならUnion-Findで管理できる.\u003c/p\u003e\n\u003cp\u003e辺を追加することで\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ea\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ea\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ea\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e頂点と\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eb\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eb\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eb\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e頂点が新たに連結されたとすると, アクセスできる頂点ペアは\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ea\u003c/mi\u003e\u003cmo\u003e∗\u003c/mo\u003e\u003cmi\u003eb\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ea * b\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.46528em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ea\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e∗\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eb\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e個増える.\nこの連結された頂点の増加判定は\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003es\u003c/mi\u003e\u003cmi\u003ea\u003c/mi\u003e\u003cmi\u003em\u003c/mi\u003e\u003cmi\u003ee\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003esame\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003es\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eam\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ee\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e操作を\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eu\u003c/mi\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmi\u003ee\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eunite\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eu\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eni\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003et\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ee\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e操作の前後に行うことで行える.\u003c/p\u003e\n\u003cp\u003eが, Union-Findで集合の要素数を持つケースを初めて見たのでやや手間取った. 本番では構造体に要素数\u003ccode\u003esiz\u003c/code\u003eを\u003ccode\u003eVec\u003c/code\u003eで保持させて\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eu\u003c/mi\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmi\u003ee\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eunite\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eu\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eni\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003et\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ee\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e時に更新してなんとかなった.\u003c/p\u003e\n\u003cp\u003e::: tip 追記\nこの辺が存在した場合の連結する頂点数を考えると, \u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmo\u003e∗\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmi mathvariant=\"normal\"\u003e/\u003c/mi\u003e\u003cmn\u003e2\u003c/mn\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003en * (n - 1) / 2\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.46528em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003en\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e∗\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003en\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e−\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e1\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mord\"\u003e/2\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eなのでここから引いてくと楽.\n:::\u003c/p\u003e\n\u003cdetails\u003e\n\u003csummary\u003e解答\u003c/summary\u003e\n\u003cdiv\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003en\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e m\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e ab \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eVec\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e _ \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003em \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ea\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e b\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        ab\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003epush\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ea\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e b\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e uf \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eUnionFind\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003en \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e cost \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e n \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003en \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e ans \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eVec\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ea\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e b\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e ab\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003einto_iter\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003erev\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        ans\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003epush\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecost\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e uf\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003esame\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ea\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e b\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token keyword\"\u003econtinue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e pa \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e uf\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003efind\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ea\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e pb \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e uf\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003efind\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eb\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e c \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e uf\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esiz\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003epa\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e uf\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esiz\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003epb\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        uf\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eunite\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ea\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e b\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        cost \u003cspan class=\"token operator\"\u003e-=\u003c/span\u003e c\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e a \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e ans\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eiter\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003erev\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"{}\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e a\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003c/details\u003e\n\u003ch2 id=\"所感\"\u003e\u003ca href=\"#%E6%89%80%E6%84%9F\"\u003e所感\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eunite by rankとunite by sizeは本質的には同じなので落ち着いて対処したかった.\u003c/p\u003e\n\u003cp\u003eまたrankに符号付き整数を用いて, 正負でsize or rankを表すテクもあることを知った.\u003c/p\u003e\n\u003cp\u003e::: tip TODO\nbasic (\u003ca href=\"https://atcoder.jp/contests/abc075/tasks/abc075_c\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eBridge/ABC075\u003c/a\u003e)\u003cbr\u003e\nweighted(Potential) Union-Find (\u003ca href=\"https://atcoder.jp/contests/abc087/tasks/arc090_b\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ePeople on a line/ABC087\u003c/a\u003e)\u003cbr\u003e\n永続UF (\u003ca href=\"https://agc002.contest.atcoder.jp/tasks/agc002_d\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eStamp Rally/AGC002\u003c/a\u003e)\u003cbr\u003e\nわからん (\u003ca href=\"https://agc015.contest.atcoder.jp/tasks/agc015_c\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eNuske vs Phantom Thnook/AGC015\u003c/a\u003e)\n:::\u003c/p\u003e\n\u003cdiv class=\"footnotes\"\u003e\n\u003chr\u003e\n\u003col\u003e\n\u003cli id=\"fn-1\"\u003e\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsup\u003e\u003cmi\u003eα\u003c/mi\u003e\u003cmrow\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/mrow\u003e\u003c/msup\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmi\u003ec\u003c/mi\u003e\u003cmi\u003ek\u003c/mi\u003e\u003cmi\u003ee\u003c/mi\u003e\u003cmi\u003er\u003c/mi\u003e\u003cmi\u003em\u003c/mi\u003e\u003cmi\u003ea\u003c/mi\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\alpha^{-1}(n) = Ackerman(n, n)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.0037em;\"\u003eα\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.8141079999999999em;\"\u003e\u003cspan style=\"top:-3.063em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e−\u003c/span\u003e\u003cspan class=\"mord mtight\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003en\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ec\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03148em;\"\u003ek\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02778em;\"\u003eer\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eman\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003en\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003en\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e. 経路圧縮とrankどちらかのみの場合はならし計算量\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eO\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003el\u003c/mi\u003e\u003cmi\u003eo\u003c/mi\u003e\u003cmi\u003eg\u003c/mi\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eO(log n)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02778em;\"\u003eO\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.01968em;\"\u003el\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eo\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03588em;\"\u003eg\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003en\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e.\u003ca href=\"#fnref-1\" class=\"footnote-backref\"\u003e↩\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e","description":"rankしかもってなかった","commits":[{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"35b550ae.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 35b550ae83af4efaeadf33471c8ca8a32c1079c8\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2019-03-08-unionfind.md b/_posts/2019-03-08-unionfind.md\nnew file mode 100644\nindex 0000000..dc993c9\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2019-03-08-unionfind.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,163 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: UnionFind\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2019-03-08\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Competitive Programming\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tags:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Graph\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- TODO\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+description: rankしかもってなかった\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[AtCoder Beginners Contest 120](https://atcoder.jp/contests/abc120) で連結成分のsizeを計算するdisjoint-setの問題が出題された.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+それまでrankを用いたUnion-Findしか経験がなかったので, この機会にまとめる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## Union-Find\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Union-Findは要素が同一の集合に含まれるかどうかを判定するデータ構造.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+| Query      | Process       |\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+|------------|---------------|\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+| unite(x, y)|X(x $\\in$ X)とY(y $\\in$ Y)をマージする |\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+| same(x, y) |X == Y か判定する   |\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+の操作を\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+各要素を1つのノード, 集合を木と表現する.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+要素が同一の集合に含まれる場合, それらの要素は同一の木のノードである.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+上記操作をならし計算量$O(\\alpha(n))$で行う[^1]ためのマージ戦略が以下の経路圧縮とrankである.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 経路圧縮\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+要素が同一の木のノードであるか判定する場合, 各要素のrootが同一かどうか見ればよい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ただその場合木の高さだけ再帰的に親ノードを辿る必要がある.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+そこで, 親ノードを調べる際に調べたノードをrootに直接つなぎ直すことで,次回以降の判定時の計算量を$O(1)$に削減する.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### Rank\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$unite()$操作時に木の高さが高い方を親として, 低い方を高い方に繋げるようにする.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ここで, 経路圧縮と併用する場合には圧縮前の高さでrankを持つ必要がある.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+経路圧縮は$find()$操作時に行うため, $unite()$の段階では必ずしも木の高さが$1$となっている保証はない.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;details\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;summary\u0026#x26;gt;以下は経路圧縮のみの実装例.\u0026#x26;lt;/summary\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+struct UnionFind {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  par: Vec\u0026#x26;lt;usize\u0026#x26;gt;,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+impl UnionFind {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  fn new(n: usize) -\u0026#x26;gt; Self {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    UnionFind {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+      par: (0..n).collect(),\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  fn unite(\u0026#x26;mut self, x: usize, y: usize) {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let px = self.find(x);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let py = self.find(y);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    if px == py { return; }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    self.par[py] = px;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  fn same(\u0026#x26;mut self, x: usize, y: usize) -\u0026#x26;gt; bool {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    self.find(x) == self.find(y)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  fn find(\u0026#x26;mut self, x: usize) -\u0026#x26;gt; usize {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    if self.par[x] == x { x }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    else {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+      // 経路圧縮\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+      let p = self.par[x];\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+      self.par[x] = self.find(p);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+      self.par[x]\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;/details\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## [Decayed Bridges](https://atcoder.jp/contests/abc120/tasks/abc120_d)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+本題.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$n$頂点$m$辺の無向単純グラフの辺$i \\in M$を順番に取り除いたとき, 時刻$i$でアクセスできない頂点が何組あるか.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### かんがえたこと\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Union-Findでは要素を統合することはできても分割操作は行えない.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+辺を除去する操作を考える場合にはグラフ全体を保持する必要が出てきてしまう. でも$n, m \\leq 10^5$で隣接グラフを持つのはエグいし連結判定が厳しい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+では操作を巻き戻すとどうなるかを考えた.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+まず辺をすべて取り除いた状態から開始し，辺を追加していく.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+このアプローチならUnion-Findで管理できる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+辺を追加することで$a$頂点と$b$頂点が新たに連結されたとすると, アクセスできる頂点ペアは$a * b$個増える.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+この連結された頂点の増加判定は$same$操作を$unite$操作の前後に行うことで行える.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+が, Union-Findで集合の要素数を持つケースを初めて見たのでやや手間取った. 本番では構造体に要素数`siz`を`Vec`で保持させて$unite$時に更新してなんとかなった.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+::: tip 追記\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+この辺が存在した場合の連結する頂点数を考えると, $n * (n - 1) / 2$なのでここから引いてくと楽.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+:::\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;details\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;summary\u0026#x26;gt;解答\u0026#x26;lt;/summary\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn main() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let (n, m) = {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let i = read::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        (i[0], i[1])\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    };\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut ab = Vec::new();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for _ in 0..m {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let (a, b) = {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            let i = read::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            (i[0], i[1])\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        };\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        ab.push((a, b));\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut uf = UnionFind::new(n + 1);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut cost = n * (n - 1) / 2;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut ans = Vec::new();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for (a, b) in ab.into_iter().rev() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        ans.push(cost);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        if uf.same(a, b) { continue; }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let pa = uf.find(a);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let pb = uf.find(b);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let c = uf.siz[pa] * uf.siz[pb];\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        uf.unite(a, b);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        cost -= c;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for a in ans.iter().rev() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        println!(\"{}\", a);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;/details\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## 所感\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+unite by rankとunite by sizeは本質的には同じなので落ち着いて対処したかった.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+またrankに符号付き整数を用いて, 正負でsize or rankを表すテクもあることを知った.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+::: tip TODO\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+basic ([Bridge/ABC075](https://atcoder.jp/contests/abc075/tasks/abc075_c))  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+weighted(Potential) Union-Find ([People on a line/ABC087](https://atcoder.jp/contests/abc087/tasks/arc090_b))  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+永続UF ([Stamp Rally/AGC002](https://agc002.contest.atcoder.jp/tasks/agc002_d))  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+わからん ([Nuske vs Phantom Thnook/AGC015](https://agc015.contest.atcoder.jp/tasks/agc015_c))\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+:::\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[^1]: $\\alpha^{-1}(n) = Ackerman(n, n)$. 経路圧縮とrankどちらかのみの場合はならし計算量$O(log n)$.\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2019-03-08","updatedAt":"2021-01-30"},{"slug":"2019-02-20-setup_ubuntu_mysql","title":"Install MySQL on EC2","categories":["memo"],"image":"https://koka831.github.io/img/icon.png","tags":["AWS","installation","MySQL"],"content":"\u003ch2 id=\"install-ubuntu-mysql-on-ec2\"\u003e\u003ca href=\"#install-ubuntu-mysql-on-ec2\"\u003einstall ubuntu mysql on ec2\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003einstall \u003ccode\u003emysql-server\u003c/code\u003e and setup mysql privillege table via \u003ccode\u003emysql_secure_installation\u003c/code\u003e.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-sh\"\u003e\u003ccode class=\"language-sh\"\u003esudo apt install nginx mysql-server\nsudo mysql_secure_installation\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"step2-create-a-new-user\"\u003e\u003ca href=\"#step2-create-a-new-user\"\u003estep.2 create a new user\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003ecreate a database and a user for the database with minimum permission.\u003c/p\u003e\n\u003cp\u003e::: tip\nNote: set charset to \u003ccode\u003eUTF8mb4\u003c/code\u003e to store emoji\n:::\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-sql\"\u003e\u003ccode class=\"language-sql\"\u003esudo mysql \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eu root \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ep\n\n\u003cspan class=\"token keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eUSER\u003c/span\u003e \u003cspan class=\"token string\"\u003e'username'\u003c/span\u003e\u003cspan class=\"token variable\"\u003e@'localhost'\u003c/span\u003e IDENTIFIED \u003cspan class=\"token keyword\"\u003eBY\u003c/span\u003e \u003cspan class=\"token string\"\u003e'password'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eDATABASE\u003c/span\u003e \u003cspan class=\"token string\"\u003e'database'\u003c/span\u003e \u003cspan class=\"token keyword\"\u003echaracter\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eset\u003c/span\u003e UTF8mb4 \u003cspan class=\"token keyword\"\u003ecollate\u003c/span\u003e utf8mb4_bin\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eGRANT\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eALL\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ePRIVILEGES\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eON\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edatabase\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eTO\u003c/span\u003e \u003cspan class=\"token string\"\u003e'username'\u003c/span\u003e\u003cspan class=\"token variable\"\u003e@'localhost'\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eWITH\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eGRANT\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eOPTION\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"step3-install-php\"\u003e\u003ca href=\"#step3-install-php\"\u003estep.3 install php\u003c/a\u003e\u003c/h2\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-sh\"\u003e\u003ccode class=\"language-sh\"\u003esudo apt install php-curl php-gd php-mbstring php-xml php-xmlrpc php-soap php-intl php-zip\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"step4-download-wordpress\"\u003e\u003ca href=\"#step4-download-wordpress\"\u003estep.4 download wordpress\u003c/a\u003e\u003c/h2\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003ecd /tmp\ncurl -O https://wordpress.org/latest.tar.gz\nmv wp-config-sample.php wp-config.php\n\n## open the link below to generate salt\nchrome https://api.wordpress.org/secret-key/1.1/salt/\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"step5-setup-nginx\"\u003e\u003ca href=\"#step5-setup-nginx\"\u003estep.5 setup nginx\u003c/a\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003edefault.conf\u003c/li\u003e\n\u003cli\u003ephp-fpm unix domain socket\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"ref\"\u003e\u003ca href=\"#ref\"\u003eref\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://stackoverflow.com/questions/25774975/unable-to-start-php-fpm-cannot-get-uid-for-user-apache\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ehttps://stackoverflow.com/questions/25774975/unable-to-start-php-fpm-cannot-get-uid-for-user-apache\u003c/a\u003e\u003c/p\u003e","description":"procedure memo","commits":[{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"35b550ae.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 35b550ae83af4efaeadf33471c8ca8a32c1079c8\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2019-02-20-setup_ubuntu_mysql.md b/_posts/2019-02-20-setup_ubuntu_mysql.md\nnew file mode 100644\nindex 0000000..77b7437\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2019-02-20-setup_ubuntu_mysql.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,63 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: 'Install MySQL on EC2'\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2019-02-20\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - memo\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tags:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - AWS\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - installation\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - MySQL\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+description: procedure memo\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## install ubuntu mysql on ec2\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+install `mysql-server` and setup mysql privillege table via `mysql_secure_installation`.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+sudo apt install nginx mysql-server\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+sudo mysql_secure_installation\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## step.2 create a new user\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+create a database and a user for the database with minimum permission.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+::: tip\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Note: set charset to `UTF8mb4` to store emoji\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+:::\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sql\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+sudo mysql -u root -p\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+CREATE USER 'username'@'localhost' IDENTIFIED BY 'password';\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+CREATE DATABASE 'database' character set UTF8mb4 collate utf8mb4_bin;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+GRANT ALL PRIVILEGES ON database.* TO 'username'@'localhost' WITH GRANT OPTION;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## step.3 install php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+sudo apt install php-curl php-gd php-mbstring php-xml php-xmlrpc php-soap php-intl php-zip\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## step.4 download wordpress\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+cd /tmp\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+curl -O https://wordpress.org/latest.tar.gz\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+mv wp-config-sample.php wp-config.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## open the link below to generate salt\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+chrome https://api.wordpress.org/secret-key/1.1/salt/\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## step.5 setup nginx\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- default.conf\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- php-fpm unix domain socket\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## ref\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+https://stackoverflow.com/questions/25774975/unable-to-start-php-fpm-cannot-get-uid-for-user-apache\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2019-02-20","updatedAt":"2021-01-30"},{"slug":"2019-02-09-minpro2019","title":"みんなのプロコン 2019","categories":["Competitive Programming"],"image":"https://koka831.github.io/img/icon.png","tags":["AtCoder","TODO"],"content":"\u003cp\u003eみんなのプロコン 2019の参加記録.\u003c/p\u003e\n\u003ch2 id=\"b---path\"\u003e\u003ca href=\"#b---path\"\u003eB - Path\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e4つの街と3つの道が与えられる. 一筆書で全ての街を訪れることができるか.\u003c/p\u003e\n\u003cp\u003e制約\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e同じ街の対の間を結ぶ道は複数存在しない\nどの2つの街の間も、道を何本か通ることで行き来することができる\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eより, 全ての街を訪れることは可能であることがわかる.\nこのとき道と街の組み合わせしてありうるのは以下の2パターン.\u003c/p\u003e\n\u003cdiv class=\"graph-wrapper\"\u003e\n\u003cdiv\u003e\n\u003cdiv class=\"graph graph1\"\u003e\n  \u003cdiv class=\"edge\" /\u003e\n  \u003cdiv class=\"node none\" /\u003e\n  \u003cdiv class=\"edge\" /\u003e\n\u003c/div\u003e\n\u003cdiv class=\"graph\"\u003e\n  \u003cdiv class=\"edge\" /\u003e\n  \u003cdiv class=\"node\" /\u003e\n  \u003cdiv class=\"edge cross vertical\" /\u003e\n\u003c/div\u003e\n\u003cdiv class=\"label\"\u003eA\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv\u003e\n\u003cdiv class=\"graph graph2\"\u003e\n  \u003cdiv class=\"edge\" /\u003e\n  \u003cdiv class=\"node\" /\u003e\n  \u003cdiv class=\"edge\" /\u003e\n\u003c/div\u003e\n\u003cdiv class=\"graph\"\u003e\n  \u003cdiv class=\"edge\" /\u003e\n  \u003cdiv class=\"node\" /\u003e\n  \u003cdiv class=\"edge vertical\" /\u003e\n\u003c/div\u003e\n\u003cdiv class=\"label\"\u003eB\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cp\u003e一筆書き出来るのはB.\u003cbr\u003e\nAは1つの街から3本以上の道が存在する場合なので, 街から生えている道の本数で判定すればいい.\u003c/p\u003e\n\u003ch3 id=\"解答\"\u003e\u003ca href=\"#%E8%A7%A3%E7%AD%94\"\u003e解答\u003c/a\u003e\u003c/h3\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003estd\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003eio\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\n\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e a \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e b \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e c \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e d \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e _ \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003e\u003cspan class=\"token number\"\u003e3\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e ab \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e ab \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003ematch\u003c/span\u003e i \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"token number\"\u003e1\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e a \u003cspan class=\"token operator\"\u003e+=\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"token number\"\u003e2\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e b \u003cspan class=\"token operator\"\u003e+=\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"token number\"\u003e3\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e c \u003cspan class=\"token operator\"\u003e+=\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"token number\"\u003e4\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e d \u003cspan class=\"token operator\"\u003e+=\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n                _ \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token macro property\"\u003eunreachable!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n \n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e a \u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e \u003cspan class=\"token operator\"\u003e||\u003c/span\u003e b \u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e \u003cspan class=\"token operator\"\u003e||\u003c/span\u003e c \u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e \u003cspan class=\"token operator\"\u003e||\u003c/span\u003e d \u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"NO\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"YES\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"c---when-i-hit-my-pocket\"\u003e\u003ca href=\"#c---when-i-hit-my-pocket\"\u003eC - When I hit my pocket...\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e手持ちのビスケット1枚, 0円の状態から\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e持っているビスケットを増やす\u003c/li\u003e\n\u003cli\u003eビスケット1枚をA円に交換\u003c/li\u003e\n\u003cli\u003e1円をビスケットB枚の交換\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e以上の操作を好きな順に\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ek\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ek\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03148em;\"\u003ek\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e回行ってビスケットの枚数を最大化する. なお虚無からビスケットを生成できるらしい.\u003c/p\u003e\n\u003cp\u003eビスケット → 円 → ビスケットの両替には2ターン消費するので, 2枚以上の利益がなければ愚直にビスケットを増やすのと変わらない.\u003c/p\u003e\n\u003cp\u003eなので \u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eB\u003c/mi\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmo\u003e\u0026#x3C;\u003c/mo\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmn\u003e2\u003c/mn\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eB-A \u0026#x3C;= 2\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05017em;\"\u003eB\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e−\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.72243em;vertical-align:-0.0391em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e\u0026#x3C;=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eの場合にはビスケットを増やす操作だけ行うのが最善.\u003c/p\u003e\n\u003cp\u003e\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eB\u003c/mi\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmo\u003e\u003e\u003c/mo\u003e\u003cmn\u003e2\u003c/mn\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eB-A\u003e2\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05017em;\"\u003eB\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e−\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.72243em;vertical-align:-0.0391em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eの場合には, ビスケット→ 円→ ビスケット の操作でビスケットを\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003eB\u003c/mi\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e(B - A)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05017em;\"\u003eB\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e−\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e枚増産できる. 最終的に円を持っていても意味がないので, この一連の操作は操作は同じ回数行いたい.\u003c/p\u003e\n\u003cp\u003e簡単のために, ビスケットを0枚もっている状態から\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ek\u003c/mi\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ek + 1\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03148em;\"\u003ek\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e+\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e回の操作を行えるとする.\u003cbr\u003e\nアプローチとしては,\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eA枚たまるまでビスケットを増やす\u003c/li\u003e\n\u003cli\u003e残り\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ek\u003c/mi\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmi\u003eA\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ek + 1 - A\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03148em;\"\u003ek\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e+\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e1\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e−\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e回の操作で両替を繰り返す\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e手順2は\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmo stretchy=\"false\"\u003e⌊\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003ek\u003c/mi\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmi\u003ea\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmi mathvariant=\"normal\"\u003e/\u003c/mi\u003e\u003cmn\u003e2\u003c/mn\u003e\u003cmo stretchy=\"false\"\u003e⌋\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\lfloor(k+1-a)/2\\rfloor\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e⌊(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03148em;\"\u003ek\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e+\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e1\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e−\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ea\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mord\"\u003e/2\u003c/span\u003e\u003cspan class=\"mclose\"\u003e⌋\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e回行うことができる. 偶奇によっては操作回数が一回あまるが,\nここでビスケット→ 円の両替をしても仕方がないのでビスケットを1枚増やす.\u003c/p\u003e\n\u003ch3 id=\"解答-1\"\u003e\u003ca href=\"#%E8%A7%A3%E7%AD%94-1\"\u003e解答\u003c/a\u003e\u003c/h3\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003estd\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003eio\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\n\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ek\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e a\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e b\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eu64\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e a \u003cspan class=\"token operator\"\u003e\u003e=\u003c/span\u003e b \u003cspan class=\"token operator\"\u003e||\u003c/span\u003e b \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e a \u003cspan class=\"token operator\"\u003e\u0026#x3C;=\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"{}\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e k \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e ans\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eu64\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ek \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e a\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eb \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e a\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ek \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e a\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e a\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eb \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e a\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ek \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e a\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e a \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"{}\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ans\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"所感\"\u003e\u003ca href=\"#%E6%89%80%E6%84%9F\"\u003e所感\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e考察を詰めきらずにふわふわした状態でB,Cをときがち.\n論文が一段落したので, しばらくはこれを書いてから実装するくらいの気持ちで精進してみる.\u003c/p\u003e","description":"考察","commits":[{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"35b550ae.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 35b550ae83af4efaeadf33471c8ca8a32c1079c8\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2019-02-09-minpro2019.md b/_posts/2019-02-09-minpro2019.md\nnew file mode 100644\nindex 0000000..eb1daad\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2019-02-09-minpro2019.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,148 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: みんなのプロコン 2019\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2019-02-09\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Competitive Programming\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tags:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- AtCoder\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- TODO\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+description: 考察\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+みんなのプロコン 2019の参加記録.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## [B - Path](https://atcoder.jp/contests/yahoo-procon2019-qual/tasks/yahoo_procon2019_qual_b)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+4つの街と3つの道が与えられる. 一筆書で全ての街を訪れることができるか.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+制約\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;gt; 同じ街の対の間を結ぶ道は複数存在しない\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;gt; どの2つの街の間も、道を何本か通ることで行き来することができる\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+より, 全ての街を訪れることは可能であることがわかる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+このとき道と街の組み合わせしてありうるのは以下の2パターン.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;div class=\"graph-wrapper\"\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;div class=\"graph graph1\"\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"node none\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;div class=\"graph\"\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge cross vertical\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;div class=\"label\"\u0026#x26;gt;A\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;div class=\"graph graph2\"\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;div class=\"graph\"\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"node\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge vertical\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;div class=\"label\"\u0026#x26;gt;B\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+一筆書き出来るのはB.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Aは1つの街から3本以上の道が存在する場合なので, 街から生えている道の本数で判定すればいい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 解答\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+use std::io;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn main() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut a = 0;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut b = 0;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut c = 0;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut d = 0;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for _ in 0..3 {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let ab = read::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        for i in ab {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            match i {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+                1 =\u0026#x26;gt; a += 1,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+                2 =\u0026#x26;gt; b += 1,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+                3 =\u0026#x26;gt; c += 1,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+                4 =\u0026#x26;gt; d += 1,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+                _ =\u0026#x26;gt; unreachable!(),\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    if a \u0026#x26;gt; 2 || b \u0026#x26;gt; 2 || c \u0026#x26;gt; 2 || d \u0026#x26;gt; 2 {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        println!(\"NO\");\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    } else {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        println!(\"YES\");\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## [C - When I hit my pocket...](https://atcoder.jp/contests/yahoo-procon2019-qual/tasks/yahoo_procon2019_qual_c)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+手持ちのビスケット1枚, 0円の状態から\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- 持っているビスケットを増やす\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- ビスケット1枚をA円に交換\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- 1円をビスケットB枚の交換\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+以上の操作を好きな順に$k$回行ってビスケットの枚数を最大化する. なお虚無からビスケットを生成できるらしい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ビスケット → 円 → ビスケットの両替には2ターン消費するので, 2枚以上の利益がなければ愚直にビスケットを増やすのと変わらない.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+なので $B-A \u0026#x26;lt;= 2$の場合にはビスケットを増やす操作だけ行うのが最善.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$B-A\u0026#x26;gt;2$の場合には, ビスケット→ 円→ ビスケット の操作でビスケットを$(B - A)$枚増産できる. 最終的に円を持っていても意味がないので, この一連の操作は操作は同じ回数行いたい.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+簡単のために, ビスケットを0枚もっている状態から$k + 1$回の操作を行えるとする.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+アプローチとしては,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+1. A枚たまるまでビスケットを増やす\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+2. 残り$k + 1 - A$回の操作で両替を繰り返す\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+手順2は$\\lfloor(k+1-a)/2\\rfloor$回行うことができる. 偶奇によっては操作回数が一回あまるが,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ここでビスケット→ 円の両替をしても仕方がないのでビスケットを1枚増やす.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 解答\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+use std::io;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn main() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let (k, a, b) = {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let i = read::\u0026#x26;lt;u64\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        (i[0], i[1], i[2])\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    };\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    if a \u0026#x26;gt;= b || b - a \u0026#x26;lt;= 1{\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        println!(\"{}\", k + 1);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        return;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let ans: u64 = if (k + 1 - a) % 2 == 0 {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        (b - a) * (k + 1 - a) / 2 + a\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    } else {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        (b - a) * (k - a) / 2 + a + 1\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    };\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    println!(\"{}\", ans);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## 所感\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+考察を詰めきらずにふわふわした状態でB,Cをときがち. \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+論文が一段落したので, しばらくはこれを書いてから実装するくらいの気持ちで精進してみる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2019-02-09","updatedAt":"2021-01-30"},{"slug":"2019-02-03-renewal","title":"Renewal","categories":["diary"],"image":"https://koka831.github.io/img/icon.png","tags":["Vue"],"content":"\u003cp\u003ejekyllをやめてVuePressに移行した.\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"remark-container tip\"\u003e\u003cdiv class=\"remark-container__title\"\u003eINFO\u003c/div\u003eDraft state\u003c/div\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"before\"\u003e\u003ca href=\"#before\"\u003eBefore\u003c/a\u003e\u003c/h2\u003e\n\u003cimg src=\"./img/v1.png\" width=\"200px\"\u003e\n\u003ch2 id=\"after\"\u003e\u003ca href=\"#after\"\u003eAfter\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eこれ\u003c/p\u003e\n\u003ch2 id=\"why\"\u003e\u003ca href=\"#why\"\u003eWhy\u003c/a\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003ejekyllに飽きた.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ejekyllに飽きただけだとVuePressを使う理由にはならない\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eはてぶやnoteは? → そこまで真面目に使わない, 好きなことを書きたい\u003c/li\u003e\n\u003cli\u003eTwitterでは? →　twitterではエンジニア/DIYの属性だけ出してる. このブログでは多種書きたい.\u003c/li\u003e\n\u003cli\u003e👆くらい自由に下書きすら載せたい.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eEngineer属性を見てくれているfollowerに対して自分の全ての属性を押し付けるのはちょっと違う.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e等身大の自分の技術力をアウトプットしたい(ほんまか)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eデザインをすこししてみたくなった\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e","description":"jekyllからVuePressに移行した","commits":[{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"35b550ae.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 35b550ae83af4efaeadf33471c8ca8a32c1079c8\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2019-02-03-renewal.md b/_posts/2019-02-03-renewal.md\nnew file mode 100644\nindex 0000000..61af1cc\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2019-02-03-renewal.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,35 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: Renewal\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2019-02-04\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- diary\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tags:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Vue\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+description: jekyllからVuePressに移行した\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+jekyllをやめてVuePressに移行した.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+::: tip INFO\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Draft state\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+:::\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## Before\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;img src=\"./img/v1.png\" width=\"200px\"\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## After\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+これ\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## Why\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- jekyllに飽きた.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- jekyllに飽きただけだとVuePressを使う理由にはならない\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - はてぶやnoteは? → そこまで真面目に使わない, 好きなことを書きたい\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - Twitterでは? →　twitterではエンジニア/DIYの属性だけ出してる. このブログでは多種書きたい. \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - 👆くらい自由に下書きすら載せたい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  Engineer属性を見てくれているfollowerに対して自分の全ての属性を押し付けるのはちょっと違う.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- 等身大の自分の技術力をアウトプットしたい(ほんまか)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- デザインをすこししてみたくなった\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2019-02-04","updatedAt":"2021-01-30"},{"slug":"2019-02-03-abc117","title":"ABC117","categories":["Competitive Programming"],"image":"https://koka831.github.io/img/icon.png","tags":["AtCoder","TODO"],"content":"\u003cp\u003eAtCoder Beginners Contest 117の参加記録。\u003c/p\u003e\n\u003ch2 id=\"a-entrance-examination\"\u003e\u003ca href=\"#a-entrance-examination\"\u003eA-Entrance Examination\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eX\u003c/mi\u003e\u003cmo\u003e⋅\u003c/mo\u003e\u003cmi\u003eT\u003c/mi\u003e\u003cmo\u003e:\u003c/mo\u003e\u003cmi\u003eT\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmi\u003eT\u003c/mi\u003e\u003cmo\u003e:\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eX \\cdot T : T = T : x\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.07847em;\"\u003eX\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e⋅\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.13889em;\"\u003eT\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e:\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.13889em;\"\u003eT\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.13889em;\"\u003eT\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e:\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\nを満たす\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ex\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ex\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eを求める.式変形して\u003cbr\u003e\n\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmfrac\u003e\u003cmi\u003eT\u003c/mi\u003e\u003cmi\u003eX\u003c/mi\u003e\u003c/mfrac\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ex = \\frac{T}{X}\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1.217331em;vertical-align:-0.345em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mopen nulldelimiter\"\u003e\u003c/span\u003e\u003cspan class=\"mfrac\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.872331em;\"\u003e\u003cspan style=\"top:-2.6550000000000002em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\"\u003eX\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.23em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"frac-line\" style=\"border-bottom-width:0.04em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.394em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\"\u003eT\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.345em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose nulldelimiter\"\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/p\u003e\n\u003ch3 id=\"解答\"\u003e\u003ca href=\"#%E8%A7%A3%E7%AD%94\"\u003e解答\u003c/a\u003e\u003c/h3\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003et\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e x\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ef64\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"{}\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e t \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e x\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"b-polygon\"\u003e\u003ca href=\"#b-polygon\"\u003eB-Polygon\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi mathvariant=\"bold-italic\"\u003eL\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003eL\u003c/mi\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/msub\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003eL\u003c/mi\u003e\u003cmn\u003e2\u003c/mn\u003e\u003c/msub\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmo\u003e…\u003c/mo\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003eL\u003c/mi\u003e\u003cmi\u003eN\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\bm{L} = L_1, L_2, \\dots , L_N\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68611em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord boldsymbol\"\u003eL\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003eL\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.30110799999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003eL\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.30110799999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"\u003e\u003c/span\u003e\u003cspan class=\"minner\"\u003e…\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"\u003e\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003eL\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.32833099999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e の\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eN\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eN\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e角形は存在するか.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e定理 : 一番長い辺が他の\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eN\u003c/mi\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eN−1\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e−\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e辺の長さの合計よりも真に短い場合に限り、条件を満たす\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eN\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eN\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e角形が描ける。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eから, 最も長い辺とその他の辺の和を比較する.\u003cbr\u003e\nその他の辺の和は, (全ての辺の和) - (最長辺)とすれば楽.\u003c/p\u003e\n\u003ch3 id=\"解答-1\"\u003e\u003ca href=\"#%E8%A7%A3%E7%AD%94-1\"\u003e解答\u003c/a\u003e\u003c/h3\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e _ \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread_one\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e ln \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e max \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e ln\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eiter\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003emax\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eunwrap\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e sum \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e ln\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eiter\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003esum\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e max\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e max \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x26;\u003c/span\u003esum \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Yes\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"No\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"c---streamline\"\u003e\u003ca href=\"#c---streamline\"\u003eC - Streamline\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eN\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eN\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e個の駒と数直線上に\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eM\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eM\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eM\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e個の座標が与えられる.\n最初に\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eN\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eN\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e個の駒を好きな座標に置いてから,\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eある駒を1つ選び, その駒の座標を\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e+1\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e+\u003c/span\u003e\u003cspan class=\"mord\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eまたは\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e-1\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e−\u003c/span\u003e\u003cspan class=\"mord\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eする\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e操作を行い, \u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eM\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eM\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eM\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e個全ての座標を訪れる為の操作の最小回数を求める.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e初期配置にはコストがかからない.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e-90 -10 0 1 4\u003c/code\u003eに対して2つ駒を置くとする. このとき移動コストは以下のようになる.\u003c/p\u003e\n\u003cdiv class=\"graph\"\u003e\n  \u003cdiv class=\"edge\"\u003e-90\u003c/div\u003e\n  \u003cdiv class=\"node\"\u003e80\u003c/div\u003e\n  \u003cdiv class=\"edge\"\u003e-10\u003c/div\u003e\n  \u003cdiv class=\"node\"\u003e10\u003c/div\u003e\n  \u003cdiv class=\"edge\"\u003e0\u003c/div\u003e\n  \u003cdiv class=\"node\"\u003e1\u003c/div\u003e\n  \u003cdiv class=\"edge\"\u003e1\u003c/div\u003e\n  \u003cdiv class=\"node\"\u003e3\u003c/div\u003e\n  \u003cdiv class=\"edge\"\u003e4\u003c/div\u003e\n\u003c/div\u003e\n\u003cp\u003e\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ex_i\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.31166399999999994em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eから\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmi\u003ej\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ex_j\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.311664em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\"\u003ej\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.286108em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eに移動する為の操作回数は\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ea\u003c/mi\u003e\u003cmi\u003eb\u003c/mi\u003e\u003cmi\u003es\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmi\u003ej\u003c/mi\u003e\u003c/msub\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eabs(x_i - x_j)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eab\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003es\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.31166399999999994em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e−\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.311664em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\"\u003ej\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.286108em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e だから, 移動コストが大きい座標\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmi\u003ej\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ex_i, x_j\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.31166399999999994em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.311664em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\"\u003ej\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.286108em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eに配置すればその2点間の移動コストが節約できる.\u003c/p\u003e\n\u003cdiv class=\"graph\"\u003e\n  \u003cdiv class=\"edge piece\"\u003e-90\u003c/div\u003e\n  \u003cdiv class=\"node cut\"\u003e80\u003c/div\u003e\n  \u003cdiv class=\"edge piece\"\u003e-10\u003c/div\u003e\n  \u003cdiv class=\"node\"\u003e10\u003c/div\u003e\n  \u003cdiv class=\"edge\"\u003e0\u003c/div\u003e\n  \u003cdiv class=\"node\"\u003e1\u003c/div\u003e\n  \u003cdiv class=\"edge\"\u003e1\u003c/div\u003e\n  \u003cdiv class=\"node\"\u003e3\u003c/div\u003e\n  \u003cdiv class=\"edge\"\u003e4\u003c/div\u003e\n\u003c/div\u003e\n\u003cp\u003e3つ目以降の駒や, 駒を座標の途中に置いた場合でも, 右端からその座標までの移動と, その座標から左端までをそれぞれの駒で行なえばよい.\u003cbr\u003e\nしたがって(駒数 - 1)個分だけ座標間の移動コストを取り除けばよい.\u003c/p\u003e\n\u003ch3 id=\"解答-2\"\u003e\u003ca href=\"#%E8%A7%A3%E7%AD%94-2\"\u003e解答\u003c/a\u003e\u003c/h3\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003en\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e m\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e xm \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eisize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    xm\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003esort\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e cost \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eVec\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003em \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        cost\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003epush\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003exm\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e xm\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eabs\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    cost\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003esort\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e _ \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003en \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e cost\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003epop\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"{}\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e cost\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003einto_iter\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003esum\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"d---xxor\"\u003e\u003ca href=\"#d---xxor\"\u003eD - XXOR\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e\u003cdiv class=\"remark-container warning\"\u003e\u003cdiv class=\"remark-container__title\"\u003eTODO\u003c/div\u003e桁DPについて復習\u003c/div\u003e\u003c/p\u003e\n\u003cp\u003e\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi mathvariant=\"bold-italic\"\u003eA\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/msub\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmn\u003e2\u003c/mn\u003e\u003c/msub\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmo\u003e…\u003c/mo\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmi\u003eN\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\bm{A} = A_1, A_2, \\dots , A_N\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68611em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord boldsymbol\"\u003eA\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.30110799999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.30110799999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"\u003e\u003c/span\u003e\u003cspan class=\"minner\"\u003e…\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"\u003e\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.32833099999999993em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e と\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eK\u003c/mi\u003e\u003cmo\u003e≥\u003c/mo\u003e\u003cmn\u003e0\u003c/mn\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eK \\geq 0\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8193em;vertical-align:-0.13597em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.07153em;\"\u003eK\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e≥\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e0\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eが与えられる.\u003cbr\u003e\n\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ef\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmsubsup\u003e\u003cmo\u003e∑\u003c/mo\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmi\u003eN\u003c/mi\u003e\u003c/msubsup\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003eX\u003c/mi\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmi\u003eo\u003c/mi\u003e\u003cmi\u003er\u003c/mi\u003e\u003cmsub\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmtext\u003e  \u003c/mtext\u003e\u003cmi\u003ew\u003c/mi\u003e\u003cmi\u003eh\u003c/mi\u003e\u003cmi\u003ee\u003c/mi\u003e\u003cmi\u003er\u003c/mi\u003e\u003cmi\u003ee\u003c/mi\u003e\u003cmtext\u003e  \u003c/mtext\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmo\u003e≤\u003c/mo\u003e\u003cmi\u003eK\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ef(x) = \\sum^{N}_{i}(X xor A_i) \\; where \\; x \\leq K\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10764em;\"\u003ef\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1.2809409999999999em;vertical-align:-0.29971000000000003em;\"\u003e\u003c/span\u003e\u003cspan class=\"mop\"\u003e\u003cspan class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\"\u003e∑\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.981231em;\"\u003e\u003cspan style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.2029em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.29971000000000003em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.07847em;\"\u003eX\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02778em;\"\u003eor\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.31166399999999994em;\"\u003e\u003cspan style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02691em;\"\u003ew\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eh\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eere\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e≤\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.07153em;\"\u003eK\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cbr\u003e\nの最大値を求める.\u003c/p\u003e\n\u003chr\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003e3 7\n1 6 3\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e上の入力例\u003ccode\u003e1 6 3\u003c/code\u003eを2進数で表してみる.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003e0 1 1 0 # 6\n0 0 1 1 # 3\n0 0 0 1 # 1\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e各々とのXORが最大になるようにするには, 各桁で\u003ccode\u003e0/1\u003c/code\u003eの少ない方を立てればいい.\u003c/p\u003e\n\u003ch2 id=\"所感\"\u003e\u003ca href=\"#%E6%89%80%E6%84%9F\"\u003e所感\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eDの方針が立ってから無限にバグらせてた.\nC迄のスピード感は良かったのでもったいなかった.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"http://drken1215.hatenablog.com/entry/2019/02/03/224200\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ehttp://drken1215.hatenablog.com/entry/2019/02/03/224200\u003c/a\u003e にある\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eX\u003c/mi\u003e\u003cmo\u003e≤\u003c/mo\u003e\u003cmi\u003eK\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eX \\leq K\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8193em;vertical-align:-0.13597em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.07847em;\"\u003eX\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e≤\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.07153em;\"\u003eK\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e であるとは、上位ビットから見たときに\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eX\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eX\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.07847em;\"\u003eX\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eと\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eK\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eK\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.07153em;\"\u003eK\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eのビットが初めて一致しなかった桁が \u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ed\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ed\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ed\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eであったとしたとき\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ed\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ed\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ed\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eより上位の桁については、\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eX\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eX\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.07847em;\"\u003eX\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eは\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eK\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eK\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.07153em;\"\u003eK\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eと一致\u003c/li\u003e\n\u003cli\u003e\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ed\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ed\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ed\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e桁目については\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eX\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eX\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.07847em;\"\u003eX\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eは\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmn\u003e0\u003c/mn\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e0\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e0\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eで,\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eK\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eK\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.07153em;\"\u003eK\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eは\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e1\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eである\u003c/li\u003e\n\u003cli\u003e\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ed\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ed\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ed\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eより下位の桁については\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eX\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eX\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.07847em;\"\u003eX\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eはなんでもいい\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eがわかりやすかった. 各桁のビット比較で大小比較が行えればデータをbit列のまま取り扱うことができ, bit - usize間の変換がいらず実装が楽になる.\u003c/p\u003e","description":"考察","commits":[{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"35b550ae.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 35b550ae83af4efaeadf33471c8ca8a32c1079c8\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2019-02-03-abc117.md b/_posts/2019-02-03-abc117.md\nnew file mode 100644\nindex 0000000..0fd5477\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2019-02-03-abc117.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,155 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: ABC117\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2019-02-03\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Competitive Programming\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tags:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - AtCoder\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - TODO\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+description: 考察\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+AtCoder Beginners Contest 117の参加記録。\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## [A-Entrance Examination](https://atcoder.jp/contests/abc117/tasks/abc117_a)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$X \\cdot T : T = T : x$\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+を満たす$x$を求める.式変形して  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$x = \\frac{T}{X}$\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 解答\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn main() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let (t, x) = {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let i = read::\u0026#x26;lt;f64\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        (i[0], i[1])\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    };\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    println!(\"{}\", t / x);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## [B-Polygon](https://atcoder.jp/contests/abc117/tasks/abc117_b)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$\\bm{L} = L_1, L_2, \\dots , L_N$ の$N$角形は存在するか.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;gt; 定理 : 一番長い辺が他の$N−1$辺の長さの合計よりも真に短い場合に限り、条件を満たす$N$角形が描ける。\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+から, 最も長い辺とその他の辺の和を比較する.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+その他の辺の和は, (全ての辺の和) - (最長辺)とすれば楽.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 解答\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn main() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let _ = read_one::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let ln = read::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let max = ln.iter().max().unwrap();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let sum = ln.iter().sum::\u0026#x26;lt;usize\u0026#x26;gt;() - max;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    if max \u0026#x26;lt; \u0026#x26;sum {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        println!(\"Yes\");\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    } else {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        println!(\"No\");\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## [C - Streamline](https://atcoder.jp/contests/abc117/tasks/abc117_c)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$N$個の駒と数直線上に$M$個の座標が与えられる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+最初に$N$個の駒を好きな座標に置いてから,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- ある駒を1つ選び, その駒の座標を$+1$または$-1$する  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+操作を行い, $M$個全ての座標を訪れる為の操作の最小回数を求める.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+初期配置にはコストがかからない.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`-90 -10 0 1 4`に対して2つ駒を置くとする. このとき移動コストは以下のようになる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;div class=\"graph\"\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;-90\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"node\"\u0026#x26;gt;80\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;-10\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"node\"\u0026#x26;gt;10\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;0\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"node\"\u0026#x26;gt;1\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;1\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"node\"\u0026#x26;gt;3\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;4\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$x_i$から$x_j$に移動する為の操作回数は$abs(x_i - x_j)$ だから, 移動コストが大きい座標$x_i, x_j$に配置すればその2点間の移動コストが節約できる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;div class=\"graph\"\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge piece\"\u0026#x26;gt;-90\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"node cut\"\u0026#x26;gt;80\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge piece\"\u0026#x26;gt;-10\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"node\"\u0026#x26;gt;10\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;0\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"node\"\u0026#x26;gt;1\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;1\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"node\"\u0026#x26;gt;3\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u0026#x26;lt;div class=\"edge\"\u0026#x26;gt;4\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;/div\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+3つ目以降の駒や, 駒を座標の途中に置いた場合でも, 右端からその座標までの移動と, その座標から左端までをそれぞれの駒で行なえばよい.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+したがって(駒数 - 1)個分だけ座標間の移動コストを取り除けばよい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 解答\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn main() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let (n, m) = {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let i = read::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        (i[0], i[1])\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    };\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut xm = read::\u0026#x26;lt;isize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    xm.sort();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut cost = Vec::new();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for i in 0..m - 1 {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        cost.push((xm[i] - xm[i + 1]).abs() as usize);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    cost.sort();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for _ in 0..n - 1 { cost.pop(); }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    println!(\"{}\", cost.into_iter().sum::\u0026#x26;lt;usize\u0026#x26;gt;());\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## [D - XXOR](https://atcoder.jp/contests/abc117/tasks/abc117_d)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+::: warning TODO\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  桁DPについて復習\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+:::\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$\\bm{A} = A_1, A_2, \\dots , A_N$ と$K \\geq 0$が与えられる.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$f(x) = \\sum^{N}_{i}(X xor A_i) \\; where \\; x \\leq K$  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+の最大値を求める.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+3 7\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+1 6 3\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+上の入力例`1 6 3`を2進数で表してみる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+0 1 1 0 # 6\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+0 0 1 1 # 3\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+0 0 0 1 # 1\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+各々とのXORが最大になるようにするには, 各桁で`0/1`の少ない方を立てればいい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## 所感\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Dの方針が立ってから無限にバグらせてた.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+C迄のスピード感は良かったのでもったいなかった.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[http://drken1215.hatenablog.com/entry/2019/02/03/224200](http://drken1215.hatenablog.com/entry/2019/02/03/224200) にある\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;gt; $X \\leq K$ であるとは、上位ビットから見たときに$X$と$K$のビットが初めて一致しなかった桁が $d$であったとしたとき\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;gt; - $d$より上位の桁については、$X$は$K$と一致\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;gt; - $d$桁目については$X$は$0$で,$K$は$1$である\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;gt; - $d$より下位の桁については$X$はなんでもいい\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+がわかりやすかった. 各桁のビット比較で大小比較が行えればデータをbit列のまま取り扱うことができ, bit - usize間の変換がいらず実装が楽になる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2019-02-03","updatedAt":"2021-01-30"},{"slug":"2019-01-17-hello2nand","title":"Hello2NAND","categories":["diary"],"image":"https://koka831.github.io/img/icon.png","tags":["発表資料","Python"],"content":"\u003cp\u003e先日 \u003ca href=\"https://connpass.com/event/115301/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eHello, World から トランジスタまで\u003c/a\u003eという勉強会を開催した. \u003ca href=\"https://koka831.github.io/slide/hello2nand/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eこれ\u003c/a\u003eが発表資料というか勉強会でつかった資料.\u003c/p\u003e\n\u003ciframe src=\"https://koka831.github.io/slide/hello2nand/\" width=\"100%\" height=\"300px\" /\u003e\n\u003cp\u003e会場を提供してくださった\u003ca href=\"https://www.nefrock.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eNefrock\u003c/a\u003eさんありがとうございます.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e勉強会を開催した目的は主に自分が発表練習をしたい,という個人的なものだけど,\n今までいくつか勉強会に参加した経験から, 自分がやるならどういう勉強会にしたいかというのを考えていて, 今回はそれを試す場でもあった.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e聴講者側の受け身感を減らしたい\u003c/li\u003e\n\u003cli\u003e発表者側のメリットを高めたい\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eつまるところ参加者全体がフラットに利益を享受できる場にしたかった.\u003c/p\u003e\n\u003cp\u003e聴講者の受け身感, これは勉強会に参加して分かった気になって帰ることなく, その場で疑問をできる限り解消してほしい.\u003c/p\u003e\n\u003cp\u003eそして発表者には, 発表という行為自体の利益に加えて, 技術的なフィードバックを多く受け取って欲しい.\u003c/p\u003e\n\u003cp\u003e発表者は元々発表するという行為自体が当人のメリットになっているものの, その利益は主にプレゼンスキルであったり登壇経験であったりで, 技術的な利益は発表資料をつくる時に曖昧な部分を自分で調べて解消している, という程度である.\u003cbr\u003e\nこの時点で各々の知識量において, 発表者 \u003e 聴講者 の構図ができてしまっている.\u003c/p\u003e\n\u003cp\u003e知識というのは聴講者\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmo\u003e∈\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\in\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e∈\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e発表者ではなく, 聴講者\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmo\u003e∩\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\cap\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.55556em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e∩\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e発表者 な部分があるだけで, 聴講者がしっているけど発表者が知らない内容はザラにある.\nその上で勉強会では聴講者が知らなくて発表者が知っている内容が発表される.\u003c/p\u003e\n\u003cp\u003eそうではなく双方向の知識の交換があるべきだと思う.\u003c/p\u003e\n\u003cp\u003e大学の輪講は自分の理想形に近かった.\n発表者側は発表後, 発表中に\u003cdel\u003eマサカリ\u003c/del\u003eフィードバックが貰える. 聴講者側は気軽に質問を投げられる. この質問自体もお互いの共通認識の共有になる. andでしかなかった共通認識がorにまで広がる.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e勉強会で輪講を再現するにはなにが必要か. 今回は質問しやすい空気感が必要だと仮定して開催してみた.\n質問者が発表を遮ることをためらわない規模感はどれくらいなのか. また発表者が質問したい人を見つけられるのはどれくらいの人数が限度なのか.\nまずは控えめに発表者3人, 聴講者3人としてみた.\u003cbr\u003e\n当日の参加者は発表者2人, 聴講者2人だったが結果的にこれは正解だった.\n会場を提供してくれた会社の方々も参加してくれたのだが, 全員がつよつよだったのである種教授陣に囲まれながらの輪講ができあがった.\u003c/p\u003e\n\u003cp\u003e発表内容自体はここでは触れないが, 聴講者は2人とも発表内容のレイヤーを専門としていない.\nけれど沢山の質問をしてもらえた. 終わった後にも楽しんでもらえた旨をDMで頂いたので, やってよかったと思う. ぼくは結構鋭いマサカリを食らってしんだ.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eおわりに\u003c/p\u003e\n\u003cp\u003e会場を提供してくださっただけでなく楽しんで参加してくれたNefrockの皆さん, 参加してくれた両名, そして企画をめっちゃやってくれたatsuki, どうもありがとう.\u003c/p\u003e","description":"勉強会やってみた","commits":[{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"35b550ae.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 35b550ae83af4efaeadf33471c8ca8a32c1079c8\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2019-01-17-hello2nand.md b/_posts/2019-01-17-hello2nand.md\nnew file mode 100644\nindex 0000000..30dd1ce\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2019-01-17-hello2nand.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,60 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: Hello2NAND\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2019-01-17\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- diary\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tags:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- 発表資料\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Python\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+description: 勉強会やってみた\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+先日 [Hello, World から トランジスタまで](https://connpass.com/event/115301/)という勉強会を開催した. [これ](https://koka831.github.io/slide/hello2nand/)が発表資料というか勉強会でつかった資料.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;lt;iframe src=\"https://koka831.github.io/slide/hello2nand/\" width=\"100%\" height=\"300px\" /\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+会場を提供してくださった[Nefrock](https://www.nefrock.com/)さんありがとうございます.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+勉強会を開催した目的は主に自分が発表練習をしたい,という個人的なものだけど, \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+今までいくつか勉強会に参加した経験から, 自分がやるならどういう勉強会にしたいかというのを考えていて, 今回はそれを試す場でもあった.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- 聴講者側の受け身感を減らしたい\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- 発表者側のメリットを高めたい\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+つまるところ参加者全体がフラットに利益を享受できる場にしたかった.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+聴講者の受け身感, これは勉強会に参加して分かった気になって帰ることなく, その場で疑問をできる限り解消してほしい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+そして発表者には, 発表という行為自体の利益に加えて, 技術的なフィードバックを多く受け取って欲しい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+発表者は元々発表するという行為自体が当人のメリットになっているものの, その利益は主にプレゼンスキルであったり登壇経験であったりで, 技術的な利益は発表資料をつくる時に曖昧な部分を自分で調べて解消している, という程度である.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+この時点で各々の知識量において, 発表者 \u0026#x26;gt; 聴講者 の構図ができてしまっている.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+知識というのは聴講者$\\in$発表者ではなく, 聴講者$\\cap$発表者 な部分があるだけで, 聴講者がしっているけど発表者が知らない内容はザラにある.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+その上で勉強会では聴講者が知らなくて発表者が知っている内容が発表される.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+そうではなく双方向の知識の交換があるべきだと思う.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+大学の輪講は自分の理想形に近かった.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+発表者側は発表後, 発表中に~~マサカリ~~フィードバックが貰える. 聴講者側は気軽に質問を投げられる. この質問自体もお互いの共通認識の共有になる. andでしかなかった共通認識がorにまで広がる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+勉強会で輪講を再現するにはなにが必要か. 今回は質問しやすい空気感が必要だと仮定して開催してみた.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+質問者が発表を遮ることをためらわない規模感はどれくらいなのか. また発表者が質問したい人を見つけられるのはどれくらいの人数が限度なのか.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+まずは控えめに発表者3人, 聴講者3人としてみた.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+当日の参加者は発表者2人, 聴講者2人だったが結果的にこれは正解だった.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+会場を提供してくれた会社の方々も参加してくれたのだが, 全員がつよつよだったのである種教授陣に囲まれながらの輪講ができあがった.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+発表内容自体はここでは触れないが, 聴講者は2人とも発表内容のレイヤーを専門としていない.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+けれど沢山の質問をしてもらえた. 終わった後にも楽しんでもらえた旨をDMで頂いたので, やってよかったと思う. ぼくは結構鋭いマサカリを食らってしんだ.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+おわりに\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+会場を提供してくださっただけでなく楽しんで参加してくれたNefrockの皆さん, 参加してくれた両名, そして企画をめっちゃやってくれたatsuki, どうもありがとう.\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2019-01-17","updatedAt":"2021-01-30"},{"slug":"2018-12-22-caddi2018b","title":"CADDi2018","categories":["Competitive Programming"],"image":"https://koka831.github.io/img/icon.png","tags":["AtCoder"],"content":"\u003cp\u003eCADDi 2018 for Beginners の参加記録。\u003c/p\u003e\n\u003ch2 id=\"a---1222\"\u003e\u003ca href=\"#a---1222\"\u003eA - 12/22\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e与えられる数字の中に\u003ccode\u003e2\u003c/code\u003eがいくつあるか.\n数字を一桁毎に走査していくのはしんどいので, 文字の配列として扱うのが吉.\u003c/p\u003e\n\u003ch3 id=\"解答\"\u003e\u003ca href=\"#%E8%A7%A3%E7%AD%94\"\u003e解答\u003c/a\u003e\u003c/h3\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e n \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread_one\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eString\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003echars\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ecollect\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eVec\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003echar\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e cnt \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e c \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e n \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e c \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token char string\"\u003e'2'\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e cnt \u003cspan class=\"token operator\"\u003e+=\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"{}\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e cnt\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"b---atcoder-alloy\"\u003e\u003ca href=\"#b---atcoder-alloy\"\u003eB - AtCoder Alloy\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eN枚の板のうち\u003ccode\u003eH * W\u003c/code\u003eの大きさが切り出せるものは何枚あるか.\u003cbr\u003e\n今回は\u003ccode\u003eH * W\u003c/code\u003eを\u003ccode\u003eW * H\u003c/code\u003eにしてはいけないことに注意したくらい.\u003c/p\u003e\n\u003ch3 id=\"解答-1\"\u003e\u003ca href=\"#%E8%A7%A3%E7%AD%94-1\"\u003e解答\u003c/a\u003e\u003c/h3\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003en\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e h\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e w\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e ans \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e _ \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003en \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eh_i\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e w_i\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e h_i \u003cspan class=\"token operator\"\u003e\u003e=\u003c/span\u003e h \u003cspan class=\"token operator\"\u003e\u0026#x26;\u0026#x26;\u003c/span\u003e w_i \u003cspan class=\"token operator\"\u003e\u003e=\u003c/span\u003e w \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e ans \u003cspan class=\"token operator\"\u003e+=\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"{}\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ans\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"c---product-and-gcd\"\u003e\u003ca href=\"#c---product-and-gcd\"\u003eC - Product and GCD\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003en個の整数からなる配列があって,その要素数と積が与えられる\u003ccode\u003e(N, P)\u003c/code\u003e.\u003cbr\u003e\n各要素の最大公約数として考えられるもののうち, 最も大きいものを求める.\u003c/p\u003e\n\u003cp\u003e配列\u003ccode\u003ean\u003c/code\u003eが\u003ccode\u003ex\u003c/code\u003eを公約数にもつ ←→ \u003ccode\u003ean\u003c/code\u003eの各要素は\u003ccode\u003ex\u003c/code\u003eを約数に持っている\u003cbr\u003e\nなので, \u003ccode\u003ean\u003c/code\u003eを素因数分解して, \u003ccode\u003en\u003c/code\u003e個以上ある素因数の積が答えになる.\u003c/p\u003e\n\u003ch3 id=\"解答-2\"\u003e\u003ca href=\"#%E8%A7%A3%E7%AD%94-2\"\u003e解答\u003c/a\u003e\u003c/h3\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003en\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e p\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eu64\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e hm \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eHashMap\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e x \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e p\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e// 素因数分解してhashmapにいれる\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ewhile\u003c/span\u003e \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSome\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ef\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003edivide\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        x \u003cspan class=\"token operator\"\u003e/=\u003c/span\u003e f\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token operator\"\u003e*\u003c/span\u003ehm\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eentry\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ef\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eor_insert\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+=\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token operator\"\u003e*\u003c/span\u003ehm\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eentry\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eor_insert\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+=\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e ans\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eu64\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ek\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e v\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e hm\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eiter\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token comment\"\u003e// 因数kが2n個以上あったときにk^xする(2敗)\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e v \u003cspan class=\"token operator\"\u003e\u003e=\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x26;\u003c/span\u003en \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            ans \u003cspan class=\"token operator\"\u003e*=\u003c/span\u003e k\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003epow\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ev \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eu32\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"{}\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ans\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\n\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003edivide\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003en\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eu64\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eOption\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eu64\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003en \u003cspan class=\"token keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ef64\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003esqrt\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eceil\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eu64\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e n \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSome\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \n    \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eNone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"d---harlequin\"\u003e\u003ca href=\"#d---harlequin\"\u003eD - Harlequin\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e格子の交点を横線または点でなぞって、最後の点をなぞった人の勝ち.\nお互いに最善手をとる前提で実験してみる.\u003cbr\u003e\nやった実験は\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e2 * 2\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e↑を横にのばす\u003c/li\u003e\n\u003cli\u003e↑を縦にのばす\u003c/li\u003e\n\u003cli\u003e↑を合成したやつ\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eの4パターン.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003eo o\no o\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eのように\u003ccode\u003e2*2\u003c/code\u003eの格子があった場合, 先手の取り得る点は1か2.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003eo o\nx o\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eのように一つとった場合, 後手は同列の点を一つとればよい.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003ex o\nx o\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eまた, 2つとった場合 後手はそのまま2つ取って勝ち.\u003c/p\u003e\n\u003cp\u003e次に\u003ccode\u003e2 * k\u003c/code\u003eのように引き伸ばした場合.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003eo o o ..... o o\no o o ..... o o\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eこれについても\u003ccode\u003e2 * 2\u003c/code\u003eの場合と同様で, 先手のとった数だけ後手もとれば負けることはない(最終的に\u003ccode\u003e2 * 2\u003c/code\u003eに帰着するので).\u003c/p\u003e\n\u003cp\u003eでは\u003ccode\u003ek * 2\u003c/code\u003eの場合はどうか.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003eo o\no o\n...\no o\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eこれまでの実験から, \u003ccode\u003e2 * k\u003c/code\u003eの形に持ち込んだら勝敗がきまることがわかったので, そうしない立ち回りを行なえば良い.\n\u003ccode\u003ek\u003c/code\u003eが偶数の場合, 後手の勝ち. \u003ccode\u003ek\u003c/code\u003eが奇数の場合, 先手の勝ち.\u003c/p\u003e\n\u003cp\u003e最後に一般形を考える.\n元の問題では\u003ccode\u003e1 4 5 2 4\u003c/code\u003eのようにランダムに並んでるけどソートしてしまっても問題ない.\nすると\u003ccode\u003en * (偶数)\u003c/code\u003eの形をつくるかどうか, になるので,初期配置の各列の偶奇を判断すればよい.\u003c/p\u003e\n\u003ch3 id=\"解答-3\"\u003e\u003ca href=\"#%E8%A7%A3%E7%AD%94-3\"\u003e解答\u003c/a\u003e\u003c/h3\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e n \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread_one\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e an \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eVec\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e _ \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003en \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        an\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003epush\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token function\"\u003eread_one\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e an\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eiter\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eall\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token closure-params\"\u003e\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003ea\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003e\u003c/span\u003e a \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"second\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"first\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3 id=\"所感\"\u003e\u003ca href=\"#%E6%89%80%E6%84%9F\"\u003e所感\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e一番よかったとき(!)\n\u003cfigure\u003e\u003cimg src=\"./img/caddi2018b.png\" alt=\"\"\u003e\u003cfigcaption\u003eimg.1 \u003c/figcaption\u003e\u003c/figure\u003e\n(結果は31位)\u003c/p\u003e\n\u003cp\u003eDの考察をスムーズに行なえたのに, Cでの2WAがもったいない.\nデバッグを如何にやるかが課題っぽい.\u003c/p\u003e","description":"考察","commits":[{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"35b550ae.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 35b550ae83af4efaeadf33471c8ca8a32c1079c8\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2018-12-22-caddi2018b.md b/_posts/2018-12-22-caddi2018b.md\nnew file mode 100644\nindex 0000000..2225289\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2018-12-22-caddi2018b.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,191 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: CADDi2018\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2018-12-15\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Competitive Programming\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tags:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - AtCoder\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+description: 考察\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+CADDi 2018 for Beginners の参加記録。\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## [A - 12/22](https://caddi2018b.contest.atcoder.jp/tasks/caddi2018b_a)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+与えられる数字の中に`2`がいくつあるか.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+数字を一桁毎に走査していくのはしんどいので, 文字の配列として扱うのが吉.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 解答\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn main() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let n = read_one::\u0026#x26;lt;String\u0026#x26;gt;().chars().collect::\u0026#x26;lt;Vec\u0026#x26;lt;char\u0026#x26;gt;\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut cnt = 0;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for c in n {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        if c == '2' { cnt += 1; }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    println!(\"{}\", cnt);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## [B - AtCoder Alloy](https://caddi2018b.contest.atcoder.jp/tasks/caddi2018b_b)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+N枚の板のうち`H * W`の大きさが切り出せるものは何枚あるか.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+今回は`H * W`を`W * H`にしてはいけないことに注意したくらい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 解答\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn main() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let (n, h, w) = {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let i = read::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        (i[0], i[1], i[2])\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    };\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut ans = 0;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for _ in 0..n {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let (h_i, w_i) = {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            let i = read::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            (i[0], i[1])\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        };\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        if h_i \u0026#x26;gt;= h \u0026#x26;\u0026#x26; w_i \u0026#x26;gt;= w { ans += 1; }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    println!(\"{}\", ans);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## [C - Product and GCD](https://caddi2018b.contest.atcoder.jp/tasks/caddi2018_a)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+n個の整数からなる配列があって,その要素数と積が与えられる`(N, P)`.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+各要素の最大公約数として考えられるもののうち, 最も大きいものを求める.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+配列`an`が`x`を公約数にもつ ←→ `an`の各要素は`x`を約数に持っている  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+なので, `an`を素因数分解して, `n`個以上ある素因数の積が答えになる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 解答\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn main() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let (n, p) = {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let i = read::\u0026#x26;lt;u64\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        (i[0], i[1])\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    };\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut hm = HashMap::new();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut x = p;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    // 素因数分解してhashmapにいれる\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    while let Some(f) = divide(x) {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        x /= f;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        *hm.entry(f).or_insert(0) += 1;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    *hm.entry(x).or_insert(0) += 1;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut ans: u64 = 1;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for (k, v) in hm.iter() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        // 因数kが2n個以上あったときにk^xする(2敗)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        if v \u0026#x26;gt;= \u0026#x26;n {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            ans *= k.pow((v / n) as u32);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    println!(\"{}\", ans);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn divide(n: u64) -\u0026#x26;gt; Option\u0026#x26;lt;u64\u0026#x26;gt; {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for i in 2..(n as f64).sqrt().ceil() as u64 + 2 {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        if n % i == 0 {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            return Some(i);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    } \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    return None;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## [D - Harlequin](https://caddi2018b.contest.atcoder.jp/tasks/caddi2018_b)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+格子の交点を横線または点でなぞって、最後の点をなぞった人の勝ち.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+お互いに最善手をとる前提で実験してみる.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+やった実験は\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- `2 * 2`\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- ↑を横にのばす\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- ↑を縦にのばす\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- ↑を合成したやつ\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+の4パターン.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+o o\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+o o\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+のように`2*2`の格子があった場合, 先手の取り得る点は1か2.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+o o\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+x o\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+のように一つとった場合, 後手は同列の点を一つとればよい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+x o\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+x o\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+また, 2つとった場合 後手はそのまま2つ取って勝ち.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+次に`2 * k`のように引き伸ばした場合.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+o o o ..... o o\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+o o o ..... o o\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+これについても`2 * 2`の場合と同様で, 先手のとった数だけ後手もとれば負けることはない(最終的に`2 * 2`に帰着するので).  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+では`k * 2`の場合はどうか.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+o o\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+o o\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+...\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+o o\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+これまでの実験から, `2 * k`の形に持ち込んだら勝敗がきまることがわかったので, そうしない立ち回りを行なえば良い.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`k`が偶数の場合, 後手の勝ち. `k`が奇数の場合, 先手の勝ち.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+最後に一般形を考える.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+元の問題では`1 4 5 2 4`のようにランダムに並んでるけどソートしてしまっても問題ない.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+すると`n * (偶数)`の形をつくるかどうか, になるので,初期配置の各列の偶奇を判断すればよい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 解答\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn main() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let n = read_one::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut an = Vec::new();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for _ in 0..n {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        an.push(read_one::\u0026#x26;lt;usize\u0026#x26;gt;());\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    if an.iter().all(|a| a % 2 == 0) {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        println!(\"second\");\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    } else {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        println!(\"first\");\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 所感\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+一番よかったとき(!)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+![](./img/caddi2018b.png)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+(結果は31位)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Dの考察をスムーズに行なえたのに, Cでの2WAがもったいない.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+デバッグを如何にやるかが課題っぽい.\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2018-12-15","updatedAt":"2021-01-30"},{"slug":"2018-12-15-agc029","title":"AGC029","categories":["Competitive Programming"],"image":"https://koka831.github.io/img/icon.png","tags":["AtCoder"],"content":"\u003cp\u003eAtCoder Grand Contest 29の参加記録。\u003c/p\u003e\n\u003ch1 id=\"a\"\u003e\u003ca href=\"#a\"\u003eA\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003e\u003ccode\u003exoxooox\u003c/code\u003e のようにオセロの並びが与えられるので, 隣合う\u003ccode\u003eox\u003c/code\u003e を \u003ccode\u003exo\u003c/code\u003e にする操作が最大何回行えるか求める.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eoooox\u003c/code\u003e の場合, \u003ccode\u003exoooo\u003c/code\u003eとなるまでに4回操作できる.\u003cbr\u003e\n\u003ccode\u003eooooxx\u003c/code\u003e の場合, まず右から二つ目の\u003ccode\u003ex\u003c/code\u003eを↑の様に動かしてから\u003ccode\u003exoooo + x\u003c/code\u003eとみるとそれぞれの\u003ccode\u003ex\u003c/code\u003eに対する操作は独立.\u003cbr\u003e\nなので各\u003ccode\u003ex\u003c/code\u003eの左側にある\u003ccode\u003eo\u003c/code\u003eの数の和を求めればいい.\u003c/p\u003e\n\u003ch2 id=\"解答\"\u003e\u003ca href=\"#%E8%A7%A3%E7%AD%94\"\u003e解答\u003c/a\u003e\u003c/h2\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e ans \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e s \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread_one\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eString\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003echars\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ecollect\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eVec\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003echar\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e cnt \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003es\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003elen\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e s\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token char string\"\u003e'B'\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e cnt \u003cspan class=\"token operator\"\u003e+=\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e s\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token char string\"\u003e'W'\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e ans \u003cspan class=\"token operator\"\u003e+=\u003c/span\u003e cnt\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"{}\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ans\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n \n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e上の解答はWAになります()\u003cbr\u003e\nRustの数値リテラルにおける型推論のデフォルトは\u003ccode\u003ei32\u003c/code\u003eのため, \u003ccode\u003es.len() \u0026#x3C; O(10^5)\u003c/code\u003eの制約ではオーバーフローしうる.\u003c/p\u003e\n\u003cp\u003e5分で解答してWA食らって正直全く分からなかった.これに気付くまで25分.\u003cbr\u003e\n流石に初歩過ぎるので反省.\u003c/p\u003e\n\u003ch1 id=\"b\"\u003e\u003ca href=\"#b\"\u003eB\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003e\u003ccode\u003e3 11 14 5 13\u003c/code\u003e のように数列が与えられる. この中から和が\u003ccode\u003e2^k\u003c/code\u003eの形になるようにペアをつくるとき, 最大いくつ作れるか.\u003c/p\u003e\n\u003cp\u003e↑の例だと, ペアは\u003ccode\u003e(3, 5), (3, 13), (5, 11)\u003c/code\u003e の3通り考えられる. 複数回使うことは出来ないので, 2部グラフの最大マッチングか? \u003ccode\u003en \u0026#x3C;= 2 * 10^5\u003c/code\u003eからできる候補なら計算量\u003ccode\u003eO(NM)\u003c/code\u003eでも間に合うのか? などと考えていた(無事TLE).\u003c/p\u003e\n\u003cp\u003eまずソートして, 各\u003ccode\u003ea_i\u003c/code\u003eに対しそれより大きい最小の\u003ccode\u003e2^k\u003c/code\u003eを求める.\u003cbr\u003e\n\u003ccode\u003e2^k - a_i\u003c/code\u003eが数列の中に存在するかどうかbinary search等で求めてペアの候補とする.\u003c/p\u003e\n\u003cp\u003eペアの候補は, 大きいものから順に選択していけば最大となる.\u003c/p\u003e\n\u003ch2 id=\"解答-1\"\u003e\u003ca href=\"#%E8%A7%A3%E7%AD%94-1\"\u003e解答\u003c/a\u003e\u003c/h2\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e n \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread_one\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e an \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    an\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003esort\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n \n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e graph \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eVec\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e bn \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e an\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eclone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n \n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003en \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e x \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e bn\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ebinary_search\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x26;\u003c/span\u003ean\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eunwrap\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token comment\"\u003e// 自身がペア対象にならないように一旦\u003c/span\u003e\n        bn\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eremove\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n \n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e ceil \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ewhile\u003c/span\u003e ceil \u003cspan class=\"token operator\"\u003e\u0026#x3C;=\u003c/span\u003e an\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            ceil \u003cspan class=\"token operator\"\u003e*=\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n \n        \u003cspan class=\"token keyword\"\u003ematch\u003c/span\u003e bn\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ebinary_search\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eceil \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e an\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token class-name\"\u003eOk\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003en\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e graph\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003epush\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n            _ \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token comment\"\u003e// 自身を戻す\u003c/span\u003e\n        bn\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003einsert\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e an\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token comment\"\u003e/* 最大マッチングWA\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e    let n = graph.len();\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e    let mut dinitz = Dinitz::new(n * 2 + 2);\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e    for (a, b) in graph {\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e        dinitz.add_edge(a, b, 1);\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e        dinitz.add_edge(b, a, 1);\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e    }\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e    println!(\"{:?}\", dinitz.max_flow(n * 2, n * 2 + 1));\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e    */\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"所感\"\u003e\u003ca href=\"#%E6%89%80%E6%84%9F\"\u003e所感\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eAのミスで800位くらい落ちてて草も生えない.\u003cbr\u003e\nBは2部マッチングを勉強したあとだったのでそれに引っ張られた.\u003cbr\u003e\n精進の量がたりてないので300~500埋めをやろう.\u003c/p\u003e","description":"考察","commits":[{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"35b550ae.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 35b550ae83af4efaeadf33471c8ca8a32c1079c8\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2018-12-15-agc029.md b/_posts/2018-12-15-agc029.md\nnew file mode 100644\nindex 0000000..1b81973\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2018-12-15-agc029.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,102 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: AGC029\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2018-12-15\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Competitive Programming\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tags:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - AtCoder\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+description: 考察\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+AtCoder Grand Contest 29の参加記録。\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# [A](https://beta.atcoder.jp/contests/agc029/tasks/agc029_a)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`xoxooox` のようにオセロの並びが与えられるので, 隣合う`ox` を `xo` にする操作が最大何回行えるか求める.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`oooox` の場合, `xoooo`となるまでに4回操作できる.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`ooooxx` の場合, まず右から二つ目の`x`を↑の様に動かしてから`xoooo + x`とみるとそれぞれの`x`に対する操作は独立.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+なので各`x`の左側にある`o`の数の和を求めればいい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## 解答\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn main() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut ans = 0;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let s = read_one::\u0026#x26;lt;String\u0026#x26;gt;().chars().collect::\u0026#x26;lt;Vec\u0026#x26;lt;char\u0026#x26;gt;\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut cnt = 0;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for i in 0..s.len() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        if s[i] == 'B' { cnt += 1; }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        if s[i] == 'W' { ans += cnt; }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    println!(\"{}\", ans);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+上の解答はWAになります()  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Rustの数値リテラルにおける型推論のデフォルトは`i32`のため, `s.len() \u0026#x26;lt; O(10^5)`の制約ではオーバーフローしうる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+5分で解答してWA食らって正直全く分からなかった.これに気付くまで25分.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+流石に初歩過ぎるので反省.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# [B](https://beta.atcoder.jp/contests/agc029/tasks/agc029_b)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`3 11 14 5 13` のように数列が与えられる. この中から和が`2^k`の形になるようにペアをつくるとき, 最大いくつ作れるか.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+↑の例だと, ペアは`(3, 5), (3, 13), (5, 11)` の3通り考えられる. 複数回使うことは出来ないので, 2部グラフの最大マッチングか? `n \u0026#x26;lt;= 2 * 10^5`からできる候補なら計算量`O(NM)`でも間に合うのか? などと考えていた(無事TLE).\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+まずソートして, 各`a_i`に対しそれより大きい最小の`2^k`を求める.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`2^k - a_i`が数列の中に存在するかどうかbinary search等で求めてペアの候補とする.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ペアの候補は, 大きいものから順に選択していけば最大となる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## 解答\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn main() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let n = read_one::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut an = read::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    an.sort();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut graph = Vec::new();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut bn = an.clone();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for i in 0..n {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let x = bn.binary_search(\u0026#x26;an[i]).unwrap();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        // 自身がペア対象にならないように一旦\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        bn.remove(x);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let mut ceil = 2;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        while ceil \u0026#x26;lt;= an[i] {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            ceil *= 2;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        match bn.binary_search(\u0026#x26;(ceil - an[i])) {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            Ok(n) =\u0026#x26;gt; { graph.push((i, n)); },\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            _ =\u0026#x26;gt; {}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        // 自身を戻す\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        bn.insert(x, an[i]);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    /* 最大マッチングWA\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let n = graph.len();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut dinitz = Dinitz::new(n * 2 + 2);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for (a, b) in graph {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        dinitz.add_edge(a, b, 1);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        dinitz.add_edge(b, a, 1);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    println!(\"{:?}\", dinitz.max_flow(n * 2, n * 2 + 1));\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    */\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## 所感\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Aのミスで800位くらい落ちてて草も生えない.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Bは2部マッチングを勉強したあとだったのでそれに引っ張られた.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+精進の量がたりてないので300~500埋めをやろう.\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2018-12-15","updatedAt":"2021-01-30"},{"slug":"2018-11-11-influxdb","title":"InfluxDB","categories":["memo"],"image":"https://koka831.github.io/img/icon.png","tags":["database","時系列データ"],"content":"\u003ch2 id=\"background\"\u003e\u003ca href=\"#background\"\u003eBackground\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eセンサから取得した時系列データを解析することになった.\u003cbr\u003e\n普段の研究ではDynamoDB等のNoSQLを利用しているのだけど, 今回のセンサデータはセンサ数が多い上に欠損率が結構高い.\u003c/p\u003e\n\u003cp\u003eなので,\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e書き込み速度重視\u003c/li\u003e\n\u003cli\u003eデータの線形補間ができる・やりやすい\u003c/li\u003e\n\u003cli\u003eできればローカルで使える\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eことを要件として調査した.\u003cbr\u003e\n補間に関してはDB側で巻いてくれると嬉しいけど, パフォーマンスをみてクライアント側でやるのでもまあいい.\u003cbr\u003e\nこれはそのときのログと, (結果的にInfluxDBを選択したのだけど)その結果をまとめたもの.\u003c/p\u003e\n\u003ch1 id=\"調査\"\u003e\u003ca href=\"#%E8%AA%BF%E6%9F%BB\"\u003e調査\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003e今回調べたソフトウェアは以下.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eOpenTSDB 2.3.0\u003c/li\u003e\n\u003cli\u003eInfluxDB 1.7\u003c/li\u003e\n\u003cli\u003ePrometheus 2.5.0\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e調査対象はデータベースの中でも時系列データベースと呼ばれるものに絞った.\u003cbr\u003e\n一般的なRDBはそのインデクスにBTree(もしくはB+Tree)を用いているが, BTreeの挿入コストはO(n) ~ O(log n)程度かかってしまう. もちろん最適化はされているのだろうからコストは抑えられるだろうが, 挿入に限ってはO(1)で行いたい.  このあたり勉強しないとなあ\u003c/p\u003e\n\u003ch2 id=\"opentsdb\"\u003e\u003ca href=\"#opentsdb\"\u003eOpenTSDB\u003c/a\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eopen source time series database\u003c/li\u003e\n\u003cli\u003estore trillions of data points(!)\u003c/li\u003e\n\u003cli\u003escales using HBase\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e分散型の時系列データベース. OpenTSDBでのデータはHBase/Hadoopのクラスタ側で保持する.\u003c/p\u003e\n\u003cp\u003ePinterestやYahooで使われているとのこと\u003csup id=\"fnref-1\"\u003e\u003ca href=\"#fn-1\" class=\"footnote-ref\"\u003e1\u003c/a\u003e\u003c/sup\u003e.\nYahooの例では, 200k TSD / s の書き込みを50サーバで行っており, 10億件を超えるデータを保持している.\u003c/p\u003e\n\u003ch4 id=\"tsd形式\"\u003e\u003ca href=\"#tsd%E5%BD%A2%E5%BC%8F\"\u003eTSD形式\u003c/a\u003e\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003emetric: 時系列データの属性の名前. RDBでいうテーブル名.\u003c/li\u003e\n\u003cli\u003etimestamp\u003c/li\u003e\n\u003cli\u003evalue: integer / float\u003c/li\u003e\n\u003cli\u003etag(s): { \"key\": \"value\" }のペア.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003etagについては最低一つつける必要がある(最大8つまでサポートされているが, usually up to 4 or 5 tags とのこと).\u003cbr\u003e\n時系列DBではvalueが数値しか取れない代わりに, tagsのkeyを組み合わせて集計を行うみたい.\u003c/p\u003e\n\u003cp\u003eAPIはHTTP RestとTelnet Style(!)がある.\u003c/p\u003e\n\u003cp\u003e補間については, 分散データベースなので物理的な断片化が考慮されており, OpenTSDB側で線形補間・スキップ・ゼロ補間がサポートされている.\u003c/p\u003e\n\u003ch2 id=\"prometheus\"\u003e\u003ca href=\"#prometheus\"\u003ePrometheus\u003c/a\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003emonitoring system \u0026#x26; time series database\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e今回調べるまで存在を知らなかった. 用途を見るとどうもElasticSearch等の用途と似ていて, モニター側に重きを置いているっぽい.\u003c/p\u003e\n\u003cp\u003eそのためデータは別口からインポートする必要がある.\u003c/p\u003e\n\u003cp\u003eデータについては15日間分の保持がデフォルトのようで, Prometheus単体で利用するのは(データ解析のフェーズにおいても)今回の用途では厳しそう.\u003c/p\u003e\n\u003ch2 id=\"influxdb\"\u003e\u003ca href=\"#influxdb\"\u003eInfluxDB\u003c/a\u003e\u003c/h2\u003e\n\u003ch4 id=\"tsd形式-1\"\u003e\u003ca href=\"#tsd%E5%BD%A2%E5%BC%8F-1\"\u003eTSD形式\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003e\u003ca href=\"https://docs.influxdata.com/influxdb/v1.7/write_protocols/line_protocol_tutorial/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eLine Protocol\u003c/a\u003eと呼ばれる行データの書式に従う.\u003cbr\u003e\n以下の書式のように, 配列はスペースなしのカンマ区切りで, tagとmeasurementの区切り, measurementとtimestampの区切りにはスペースをいれる.\u003cbr\u003e\nmeasurementが値部分となっていて, こちらもtagと同様カンマ区切りで複数のtag付のmeasurementを持てる.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003emetrix,\u0026#x26;lt;tag_key\u0026#x26;gt;=\u0026#x26;lt;tag_value\u0026#x26;gt;,\u0026#x26;lt;tag_key\u0026#x26;gt;=\u0026#x26;lt;tag_value\u0026#x26;gt; \u0026#x26;lt;measurement\u0026#x26;gt;=\u0026#x26;lt;value\u0026#x26;gt; \u0026#x26;lt;timestamp\u0026#x26;gt;\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eMeasurementにはinteger, floatの他にstring, booleanも扱える.\u003c/p\u003e\n\u003cp\u003e補間については, \u003ccode\u003efill()\u003c/code\u003eを用いてnull, 指定値, 線形補間, 前データ値が利用できる.\u003csup id=\"fnref-2\"\u003e\u003ca href=\"#fn-2\" class=\"footnote-ref\"\u003e2\u003c/a\u003e\u003c/sup\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://www.influxdata.com/blog/influxdb-markedly-outperforms-opentsdb-in-time-series-data-metrics-benchmark/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eblog\u003c/a\u003e によるとwrite performanceがOpenTSDBの9倍.\u003c/p\u003e\n\u003ch2 id=\"まとめ\"\u003e\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003eまとめ\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e結論としては補間が必要なデータストアにはInfluxDB一択だと思う.\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth align=\"center\"\u003eDB\u003c/th\u003e\n\u003cth align=\"center\"\u003e書き込み\u003c/th\u003e\n\u003cth align=\"center\"\u003eデータ量\u003c/th\u003e\n\u003cth align=\"center\"\u003e補間\u003c/th\u003e\n\u003cth align=\"center\"\u003eローカル\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003eOpenTSDB\u003c/td\u003e\n\u003ctd align=\"center\"\u003e○\u003c/td\u003e\n\u003ctd align=\"center\"\u003e◎\u003c/td\u003e\n\u003ctd align=\"center\"\u003e○\u003c/td\u003e\n\u003ctd align=\"center\"\u003eDocker\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003eInfluxDB\u003c/td\u003e\n\u003ctd align=\"center\"\u003e◎\u003c/td\u003e\n\u003ctd align=\"center\"\u003e○\u003c/td\u003e\n\u003ctd align=\"center\"\u003e○\u003c/td\u003e\n\u003ctd align=\"center\"\u003eDocker\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003ePrometheus\u003c/td\u003e\n\u003ctd align=\"center\"\u003e-\u003c/td\u003e\n\u003ctd align=\"center\"\u003ex\u003c/td\u003e\n\u003ctd align=\"center\"\u003e-\u003c/td\u003e\n\u003ctd align=\"center\"\u003eDocker\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch2 id=\"ref\"\u003e\u003ca href=\"#ref\"\u003eref\u003c/a\u003e\u003c/h2\u003e\n\u003cdiv class=\"footnotes\"\u003e\n\u003chr\u003e\n\u003col\u003e\n\u003cli id=\"fn-1\"\u003e\u003ca href=\"https://www.slideshare.net/HBaseCon/operations-session-3-49043534?qid=5547eada-f70d-4730-bacb-6aeb6f37c068\u0026#x26;v=\u0026#x26;b=\u0026#x26;from_search=5\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eslideshare\u003c/a\u003e\u003ca href=\"#fnref-1\" class=\"footnote-backref\"\u003e↩\u003c/a\u003e\u003c/li\u003e\n\u003cli id=\"fn-2\"\u003e\u003ca href=\"https://docs.influxdata.com/influxdb/v1.3/query_language/data_exploration/#advanced-group-by-time-syntax\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003edocument\u003c/a\u003e\u003ca href=\"#fnref-2\" class=\"footnote-backref\"\u003e↩\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e","description":"色々と必要になったのでまとめ","commits":[{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"35b550ae.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 35b550ae83af4efaeadf33471c8ca8a32c1079c8\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2018-11-11-influxdb.md b/_posts/2018-11-11-influxdb.md\nnew file mode 100644\nindex 0000000..534d52b\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2018-11-11-influxdb.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,97 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: InfluxDB\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2018-11-11\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- memo\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tags:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - database\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - 時系列データ\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+description: 色々と必要になったのでまとめ\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## Background\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+センサから取得した時系列データを解析することになった.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+普段の研究ではDynamoDB等のNoSQLを利用しているのだけど, 今回のセンサデータはセンサ数が多い上に欠損率が結構高い.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+なので, \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- 書き込み速度重視\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- データの線形補間ができる・やりやすい\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- できればローカルで使える\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ことを要件として調査した.   \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+補間に関してはDB側で巻いてくれると嬉しいけど, パフォーマンスをみてクライアント側でやるのでもまあいい.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+これはそのときのログと, (結果的にInfluxDBを選択したのだけど)その結果をまとめたもの.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# 調査\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+今回調べたソフトウェアは以下.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- OpenTSDB 2.3.0\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- InfluxDB 1.7\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Prometheus 2.5.0\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+調査対象はデータベースの中でも時系列データベースと呼ばれるものに絞った.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+一般的なRDBはそのインデクスにBTree(もしくはB+Tree)を用いているが, BTreeの挿入コストはO(n) ~ O(log n)程度かかってしまう. もちろん最適化はされているのだろうからコストは抑えられるだろうが, 挿入に限ってはO(1)で行いたい.  このあたり勉強しないとなあ\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## OpenTSDB\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- open source time series database\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- store trillions of data points(!)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- scales using HBase\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+分散型の時系列データベース. OpenTSDBでのデータはHBase/Hadoopのクラスタ側で保持する.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+PinterestやYahooで使われているとのこと[^1].\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Yahooの例では, 200k TSD / s の書き込みを50サーバで行っており, 10億件を超えるデータを保持している.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+#### TSD形式\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- metric: 時系列データの属性の名前. RDBでいうテーブル名.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- timestamp \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- value: integer / float\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- tag(s): { \"key\": \"value\" }のペア. \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tagについては最低一つつける必要がある(最大8つまでサポートされているが, usually up to 4 or 5 tags とのこと).  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+時系列DBではvalueが数値しか取れない代わりに, tagsのkeyを組み合わせて集計を行うみたい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+APIはHTTP RestとTelnet Style(!)がある. \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+補間については, 分散データベースなので物理的な断片化が考慮されており, OpenTSDB側で線形補間・スキップ・ゼロ補間がサポートされている.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## Prometheus\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- monitoring system \u0026#x26; time series database\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+今回調べるまで存在を知らなかった. 用途を見るとどうもElasticSearch等の用途と似ていて, モニター側に重きを置いているっぽい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+そのためデータは別口からインポートする必要がある.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+データについては15日間分の保持がデフォルトのようで, Prometheus単体で利用するのは(データ解析のフェーズにおいても)今回の用途では厳しそう.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## InfluxDB\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+#### TSD形式\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[Line Protocol](https://docs.influxdata.com/influxdb/v1.7/write_protocols/line_protocol_tutorial/)と呼ばれる行データの書式に従う.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+以下の書式のように, 配列はスペースなしのカンマ区切りで, tagとmeasurementの区切り, measurementとtimestampの区切りにはスペースをいれる.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+measurementが値部分となっていて, こちらもtagと同様カンマ区切りで複数のtag付のmeasurementを持てる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+metrix,\u0026#x26;lt;tag_key\u0026#x26;gt;=\u0026#x26;lt;tag_value\u0026#x26;gt;,\u0026#x26;lt;tag_key\u0026#x26;gt;=\u0026#x26;lt;tag_value\u0026#x26;gt; \u0026#x26;lt;measurement\u0026#x26;gt;=\u0026#x26;lt;value\u0026#x26;gt; \u0026#x26;lt;timestamp\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Measurementにはinteger, floatの他にstring, booleanも扱える.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+補間については, `fill()`を用いてnull, 指定値, 線形補間, 前データ値が利用できる.[^2]\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[blog](https://www.influxdata.com/blog/influxdb-markedly-outperforms-opentsdb-in-time-series-data-metrics-benchmark/) によるとwrite performanceがOpenTSDBの9倍.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## まとめ\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+結論としては補間が必要なデータストアにはInfluxDB一択だと思う.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+|   DB   | 書き込み |  データ量 |  補間 | ローカル |\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+|:------:|:--------:|:---------:|:-----:|:--------:|\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+|OpenTSDB|  ○       |  ◎        |   ○   | Docker   |\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+|InfluxDB|  ◎       |  ○        |   ○   | Docker   |\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+|Prometheus| -      |  x        |   -   | Docker   |\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## ref\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[^1]: [slideshare](https://www.slideshare.net/HBaseCon/operations-session-3-49043534?qid=5547eada-f70d-4730-bacb-6aeb6f37c068\u0026#x26;v=\u0026#x26;b=\u0026#x26;from_search=5)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[^2]: [document](https://docs.influxdata.com/influxdb/v1.3/query_language/data_exploration/#advanced-group-by-time-syntax)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2018-11-11","updatedAt":"2021-01-30"},{"slug":"2018-10-14-code-festival-b","title":"Code Festival 2018 qual B","categories":["Competitive Programming"],"image":"https://koka831.github.io/img/icon.png","tags":["AtCoder","Grid"],"content":"\u003cp\u003e\u003ca href=\"https://code-festival-2018-qualb.contest.atcoder.jp/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eCODE FESTIVAL 2018 qual B\u003c/a\u003e 予選参加記録。\u003c/p\u003e\n\u003ch2 id=\"a\"\u003e\u003ca href=\"#a\"\u003eA\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e1から100の目が出るサイコロを振った時、出た目が入力\u003ccode\u003eN\u003c/code\u003eの倍数でない確率を求める。\u003c/p\u003e\n\u003cp\u003e1から100のうち、\u003ccode\u003eN\u003c/code\u003eの倍数であるものは\u003ccode\u003eN\u003c/code\u003eで割り切れるものの個数であるから、\u003ccode\u003e100 / N\u003c/code\u003e個.\u003c/p\u003e\n\u003cp\u003eなので\u003ccode\u003eN\u003c/code\u003eの倍数でないものは\u003ccode\u003e100 - 100 / N\u003c/code\u003e個.\u003c/p\u003e\n\u003ch3 id=\"解答\"\u003e\u003ca href=\"#%E8%A7%A3%E7%AD%94\"\u003e解答\u003c/a\u003e\u003c/h3\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e n \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread_one\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"{}\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e100\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e \u003cspan class=\"token number\"\u003e100\u003c/span\u003e \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"b\"\u003e\u003ca href=\"#b\"\u003eB\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e数列\u003ccode\u003ea_n, b_n\u003c/code\u003eが与えられた時, 任意の\u003ccode\u003ea_i in a_n\u003c/code\u003eの値を1だけ増加させることができる。\nこれを\u003ccode\u003eX\u003c/code\u003e回以内行った場合に\u003ccode\u003e\\sum a_i * b_i = a_1 * b_1 + a_2 * b_2 + ... + a_N * b_N\u003c/code\u003eの最大値を求める。\u003c/p\u003e\n\u003cp\u003e制約\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003e1 \u0026#x26;lt;= a_i, b_i \u0026#x26;lt;= 100\n0 \u0026#x26;lt;= X \u0026#x26;lt;= 100\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e任意の\u003ccode\u003ea_j\u003c/code\u003eの値を一度だけ1増加させたとすると、元の配列の和からの差分は\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003e(a_1 * b_1 + ... + a_j * b_j + ... a_N * b_N) - (a_1 * b_1 + ... + (a_j + 1) * b_j + ... + a_N + b_N)\n= a_j\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eなので、増分は\u003ccode\u003ea_j\u003c/code\u003eに比例する.\u003cbr\u003e\nこれを\u003ccode\u003eX\u003c/code\u003e回繰り返しても増分は\u003ccode\u003ea_j\u003c/code\u003eに比例するし、\u003ccode\u003ea_j\u003c/code\u003eの大きさは変動しない.\u003cbr\u003e\nまた、\u003ccode\u003eb_i\u003c/code\u003eが1以上なので、\u003ccode\u003ea_i\u003c/code\u003eは大きいものから1つだけ選び、その\u003ccode\u003ea_i\u003c/code\u003eに対して処理を行えばよい。\u003cbr\u003e\n(仮に\u003ccode\u003eb_i = 0\u003c/code\u003eとなる場合があるなら, そのような\u003ccode\u003eb_i\u003c/code\u003eに対しては\u003ccode\u003e(a_i + k) * b_i =\u003e 0\u003c/code\u003eなので)\u003c/p\u003e\n\u003cp\u003eしたがって求める値は, \u003ccode\u003e\\sum a_n * b_n + max(a_n) * X\u003c/code\u003e.\u003c/p\u003e\n\u003ch3 id=\"解答-1\"\u003e\u003ca href=\"#%E8%A7%A3%E7%AD%94-1\"\u003e解答\u003c/a\u003e\u003c/h3\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003en\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e x\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e ab \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eVec\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e _ \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003en \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        ab\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003epush\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    ab\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003esort_by_key\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token closure-params\"\u003e\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003ex\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003e\u003c/span\u003e x\u003cspan class=\"token number\"\u003e.1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    ab\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ereverse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e sum \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e x \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e ab\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eiter\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        sum \u003cspan class=\"token operator\"\u003e+=\u003c/span\u003e x\u003cspan class=\"token number\"\u003e.0\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e x\u003cspan class=\"token number\"\u003e.1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"{}\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e sum \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e ab\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e x\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"c\"\u003e\u003ca href=\"#c\"\u003eC\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003eN * N (N \u0026#x3C;= 1000)\u003c/code\u003eマスのグリッドが与えられる.\u003cbr\u003e\nあるマスを塗るとその4近傍も塗られるとした時, グリッドを全て塗る方法を出力する.\u003c/p\u003e\n\u003cp\u003eこのときに塗っていいマスの上限が\u003ccode\u003e201,800\u003c/code\u003eマスである.\u003c/p\u003e\n\u003cp\u003e以下のようにチェスのナイトが動けるマス目っぽく塗ると, 無駄なく4近傍をカバーできる.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003ex . . . . x . . . . x . .\n. . . x . . . . x . . . .\n. x . . . . x . . . . x .\n. . . . x . . . . x . . .\n. . x . . . . x . . . . x\nx . . . . x . . . . x . .\n. . . x . . . . x . . . .\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eこのときに\u003ccode\u003eN * N\u003c/code\u003eの四隅が切り取られるので、はみ出た部分を押し込む形で塗ると上手くいく.\u003c/p\u003e\n\u003cp\u003eこのアプローチでいくと, \u003ccode\u003eN = 1000\u003c/code\u003eのときに塗るマスが\u003ccode\u003e200,800\u003c/code\u003eマスとなる.\u003c/p\u003e\n\u003ch3 id=\"解答-2\"\u003e\u003ca href=\"#%E8%A7%A3%E7%AD%94-2\"\u003e解答\u003c/a\u003e\u003c/h3\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e n \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread_one\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e vec \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token macro property\"\u003evec!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token macro property\"\u003evec!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token char string\"\u003e'.'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e n\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e n\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e ar \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e4\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e ra \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e4\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003en \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e j \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003en \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e flg \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003efalse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e j \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e \u003cspan class=\"token number\"\u003e5\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e ar\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e \u003cspan class=\"token number\"\u003e5\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e flg \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e j \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e \u003cspan class=\"token number\"\u003e5\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e ra\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ej \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e \u003cspan class=\"token number\"\u003e5\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e flg \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e j \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e \u003cspan class=\"token number\"\u003e5\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e ar\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e \u003cspan class=\"token number\"\u003e5\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e flg \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e n \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e j \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e \u003cspan class=\"token number\"\u003e5\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e ar\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e \u003cspan class=\"token number\"\u003e5\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e flg \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e j \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e n \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e \u003cspan class=\"token number\"\u003e5\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e ra\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ej \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e \u003cspan class=\"token number\"\u003e5\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e flg \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e flg \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e vec\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ej\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token char string\"\u003e'X'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token comment\"\u003e// let mut cnt = 0;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003en \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e j \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003en \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token comment\"\u003e// if vec[i][j] == 'X' { cnt += 1; }\u003c/span\u003e\n            \u003cspan class=\"token macro property\"\u003eprint!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"{}\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e vec\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ej\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token comment\"\u003e// n == 1000 -\u003e 200,800\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e// println!(\"{}\", cnt);\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"所感\"\u003e\u003ca href=\"#%E6%89%80%E6%84%9F\"\u003e所感\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e最初Cでn = 2の場合をアドホックに書いてて、👆の形の解答に直した後にアドホックの部分を消すのを忘れて1テストケースだけ通らない...と無駄に悩んでしまった. 解法はすぐわかったので本当にもったいない.\u003cbr\u003e\nD, Eに関しては順位表を見てE \u0026#x3C; DっぽかったのでEを見て撤退. いつか解けるようになりたい.\u003c/p\u003e","description":"考察","commits":[{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"35b550ae.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 35b550ae83af4efaeadf33471c8ca8a32c1079c8\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2018-10-14-code-festival-b.md b/_posts/2018-10-14-code-festival-b.md\nnew file mode 100644\nindex 0000000..2ba0706\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2018-10-14-code-festival-b.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,157 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: Code Festival 2018 qual B\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2017-11-29\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Competitive Programming\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tags:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - AtCoder\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - Grid\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+description: 考察\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[CODE FESTIVAL 2018 qual B](https://code-festival-2018-qualb.contest.atcoder.jp/) 予選参加記録。\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## [A](https://code-festival-2018-qualb.contest.atcoder.jp/tasks/code_festival_2018_qualb_a)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+1から100の目が出るサイコロを振った時、出た目が入力`N`の倍数でない確率を求める。\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+1から100のうち、`N`の倍数であるものは`N`で割り切れるものの個数であるから、`100 / N`個.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+なので`N`の倍数でないものは`100 - 100 / N`個.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 解答\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn main() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let n = read_one::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    println!(\"{}\", 100 - 100 / n);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## [B](https://code-festival-2018-qualb.contest.atcoder.jp/tasks/code_festival_2018_qualb_b)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+数列`a_n, b_n`が与えられた時, 任意の`a_i in a_n`の値を1だけ増加させることができる。\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+これを`X`回以内行った場合に`\\sum a_i * b_i = a_1 * b_1 + a_2 * b_2 + ... + a_N * b_N`の最大値を求める。\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+制約\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+1 \u0026#x26;lt;= a_i, b_i \u0026#x26;lt;= 100\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+0 \u0026#x26;lt;= X \u0026#x26;lt;= 100\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+任意の`a_j`の値を一度だけ1増加させたとすると、元の配列の和からの差分は\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+(a_1 * b_1 + ... + a_j * b_j + ... a_N * b_N) - (a_1 * b_1 + ... + (a_j + 1) * b_j + ... + a_N + b_N)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+= a_j\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+なので、増分は`a_j`に比例する.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+これを`X`回繰り返しても増分は`a_j`に比例するし、`a_j`の大きさは変動しない.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+また、`b_i`が1以上なので、`a_i`は大きいものから1つだけ選び、その`a_i`に対して処理を行えばよい。  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+(仮に`b_i = 0`となる場合があるなら, そのような`b_i`に対しては`(a_i + k) * b_i =\u0026#x26;gt; 0`なので)  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+したがって求める値は, `\\sum a_n * b_n + max(a_n) * X`.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 解答\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn main() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let (n, x) = {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let i = read::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        (i[0], i[1])\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    };\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut ab = Vec::new();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for _ in 0..n {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let i = read::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        ab.push((i[0], i[1]));\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    ab.sort_by_key(|x| x.1);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    ab.reverse();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut sum = 0;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for x in ab.iter() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        sum += x.0 * x.1;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    println!(\"{}\", sum + ab[0].1 * x);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## [C](https://code-festival-2018-qualb.contest.atcoder.jp/tasks/code_festival_2018_qualb_c)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`N * N (N \u0026#x26;lt;= 1000)`マスのグリッドが与えられる.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+あるマスを塗るとその4近傍も塗られるとした時, グリッドを全て塗る方法を出力する.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+このときに塗っていいマスの上限が`201,800`マスである.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+以下のようにチェスのナイトが動けるマス目っぽく塗ると, 無駄なく4近傍をカバーできる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+x . . . . x . . . . x . .\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+. . . x . . . . x . . . .\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+. x . . . . x . . . . x .\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+. . . . x . . . . x . . .\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+. . x . . . . x . . . . x\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+x . . . . x . . . . x . .\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+. . . x . . . . x . . . .\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+このときに`N * N`の四隅が切り取られるので、はみ出た部分を押し込む形で塗ると上手くいく.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+このアプローチでいくと, `N = 1000`のときに塗るマスが`200,800`マスとなる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 解答\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn main() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let n = read_one::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut vec = vec![vec!['.'; n]; n];\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let ar = [0, 3, 1, 4, 2];\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let ra = [2, 4, 1, 3, 0];\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for i in 0..n { for j in 0..n {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let mut flg = false;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        if j % 5 == ar[i % 5] { flg = true; }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        if i == 0 {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            if j % 5 == ra[(j + 3) % 5] { flg = true; }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        if j == 0 {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            if i % 5 == ar[(i + 3) % 5] { flg = true; }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        if i == n - 1 {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            if j % 5 == ar[(i + 1) % 5] { flg = true; }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        if j == n - 1 {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            if i % 5 == ra[j % 5] { flg = true; }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        if flg { vec[i][j] = 'X'; }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    // let mut cnt = 0;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for i in 0..n { for j in 0..n {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            // if vec[i][j] == 'X' { cnt += 1; }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            print!(\"{}\", vec[i][j]);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        println!();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    // n == 1000 -\u0026#x26;gt; 200,800\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    // println!(\"{}\", cnt);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## 所感\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+最初Cでn = 2の場合をアドホックに書いてて、👆の形の解答に直した後にアドホックの部分を消すのを忘れて1テストケースだけ通らない...と無駄に悩んでしまった. 解法はすぐわかったので本当にもったいない.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+D, Eに関しては順位表を見てE \u0026#x26;lt; DっぽかったのでEを見て撤退. いつか解けるようになりたい.\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2017-11-29","updatedAt":"2021-01-30"},{"slug":"2018-10-06-abc112","title":"ABC112","categories":["Competitive Programming"],"image":"https://koka831.github.io/img/icon.png","tags":["AtCoder"],"content":"\u003cp\u003eAtCoder Beginners Contest 112の参加記録。\u003c/p\u003e\n\u003ch2 id=\"a\"\u003e\u003ca href=\"#a\"\u003eA\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e入力\u003ccode\u003eN\u003c/code\u003eが1なら指定の文字列を出力, 2なら更に標準入力から数字を読み、計算結果を出力.\u003c/p\u003e\n\u003cp\u003eインタラクティブに標準入力の分岐処理を行う問題はABCだと初めて?\u003c/p\u003e\n\u003ch3 id=\"解答\"\u003e\u003ca href=\"#%E8%A7%A3%E7%AD%94\"\u003e解答\u003c/a\u003e\u003c/h3\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e n \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread_one\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eString\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e n \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"1\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Hello World\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e a \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread_one\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e b \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread_one\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"{}\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e a \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e b\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"b\"\u003e\u003ca href=\"#b\"\u003eB\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003e(c_i, t_i)\u003c/code\u003eのうち、\u003ccode\u003et_i \u0026#x3C;= T\u003c/code\u003eを満たす最小の\u003ccode\u003ec_i\u003c/code\u003eを求める.\n存在しない場合には\u003ccode\u003eTLE\u003c/code\u003eを出力する。\u003c/p\u003e\n\u003ch3 id=\"解答-1\"\u003e\u003ca href=\"#%E8%A7%A3%E7%AD%94-1\"\u003e解答\u003c/a\u003e\u003c/h3\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003en\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e t\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e ct \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eVec\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e _ \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003en \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        ct\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003epush\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e ans \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e ct\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eiter\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003efilter\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token closure-params\"\u003e\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003ex\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003e\u003c/span\u003e x\u003cspan class=\"token number\"\u003e.1\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x3C;=\u003c/span\u003e t\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003emap\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token closure-params\"\u003e\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003ex\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003e\u003c/span\u003e x\u003cspan class=\"token number\"\u003e.0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003emin\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003ematch\u003c/span\u003e ans \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token class-name\"\u003eSome\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"{}\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e x\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"token class-name\"\u003eNone\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"TLE\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"c\"\u003e\u003ca href=\"#c\"\u003eC\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e座標\u003ccode\u003e(x_i, y_i)\u003c/code\u003eと高度\u003ccode\u003eh_i\u003c/code\u003e及び高度の計算式が与えられ、それを満たす中心座標及びそれの高度を求める.\u003c/p\u003e\n\u003cp\u003e制約が\u003ccode\u003ex \u0026#x3C; 10^2, y \u0026#x3C; 10^2, N \u0026#x3C; 10 ^ 2\u003c/code\u003eなので全探索でも\u003ccode\u003e10^8\u003c/code\u003eなので通る.\n\u003ccode\u003ex, y\u003c/code\u003e及び\u003ccode\u003en\u003c/code\u003eを固定すれば\u003ccode\u003eh = max(H - (X - c_x).abs() - (Y - c_y).abs(), 0)\u003c/code\u003eから\u003ccode\u003eH\u003c/code\u003eは定まるが、最初\u003ccode\u003eh_i\u003c/code\u003eが\u003ccode\u003e0\u003c/code\u003eになりうるケースを考慮せずにやってWA.\nそこで, クエリを\u003ccode\u003eh_i\u003c/code\u003eによってソートすれば\u003ccode\u003emax(..., 0)\u003c/code\u003eの結果が正になるから, ここでの条件分岐を考えずに済む.\u003c/p\u003e\n\u003cp\u003e後は各クエリがこの\u003ccode\u003ex, y, h\u003c/code\u003eと一致するか確認する.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e n \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread_one\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e vec \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eVec\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e _ \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003en \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eisize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        vec\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003epush\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    vec\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003esort_by_key\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token closure-params\"\u003e\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003ex\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003e\u003c/span\u003e x\u003cspan class=\"token number\"\u003e.2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    vec\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ereverse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e ans_x \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e ans_y \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e ans_h \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e x \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003e\u003cspan class=\"token number\"\u003e101\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e y \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003e\u003cspan class=\"token number\"\u003e101\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e flg \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e h \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e vec\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e vec\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eabs\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ey \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e vec\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eabs\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e v \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e vec\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eiter\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e v\u003cspan class=\"token number\"\u003e.2\u003c/span\u003e \u003cspan class=\"token operator\"\u003e!=\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ecmp\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token function\"\u003emax\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eh \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e v\u003cspan class=\"token number\"\u003e.0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eabs\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ey \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e v\u003cspan class=\"token number\"\u003e.1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eabs\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n                flg \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003efalse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"token keyword\"\u003econtinue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e flg \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            ans_x \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e x\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n            ans_y \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e y\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n            ans_h \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e h\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"{} {} {}\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ans_x\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ans_y\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ans_h\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"d\"\u003e\u003ca href=\"#d\"\u003eD\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e数列\u003ccode\u003ean\u003c/code\u003eの要素数\u003ccode\u003eN\u003c/code\u003eと和\u003ccode\u003eM\u003c/code\u003eが与えられるので、\u003ccode\u003ean\u003c/code\u003eの各要素の最大公約数の取りうる最大値を求める.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003ea_1 + a_2 + ... + a_N\u003c/code\u003eの最大公約数が\u003ccode\u003eK\u003c/code\u003eであるとき, 次のように括り出すことができる.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003eK * (a_1\u0026#x26;#39; + a_2\u0026#x26;#39; + ... + a_N\u0026#x26;#39;) = K * sum(a\u0026#x26;#39;)\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eしたがって\u003ccode\u003eK\u003c/code\u003eは\u003ccode\u003eM\u003c/code\u003eの約数.\u003c/p\u003e\n\u003cp\u003e次に\u003ccode\u003ean\u003c/code\u003eの要素数を\u003ccode\u003eN\u003c/code\u003eにするためには, \u003ccode\u003ea'\u003c/code\u003eの要素数が\u003ccode\u003eN\u003c/code\u003e個である必要がある.\n\u003ccode\u003emin(sum(a'))\u003c/code\u003eは全ての要素が\u003ccode\u003e1\u003c/code\u003eの場合に\u003ccode\u003eN\u003c/code\u003eとなるので, \u003ccode\u003eK\u003c/code\u003eは大きくても\u003ccode\u003eM / N\u003c/code\u003eの範囲であることがわかる.\u003c/p\u003e\n\u003cp\u003eよって, \u003ccode\u003ei in 1 ~ M / N\u003c/code\u003eについて,Mが割り切れる\u003ccode\u003ei\u003c/code\u003eのうち最大のものが答え.\u003c/p\u003e\n\u003cp\u003eまた制約から\u003ccode\u003en = 1, m = 10^9\u003c/code\u003eのケースがありうる. その場合処理が全て走ってしまうのでTLE(1WA), その場合の処理はアドホックに書いてしまった.\u003c/p\u003e\n\u003ch3 id=\"解答-2\"\u003e\u003ca href=\"#%E8%A7%A3%E7%AD%94-2\"\u003e解答\u003c/a\u003e\u003c/h3\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003en\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e m\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eu64\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e ans \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e n \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"{}\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e m\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003em \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e n \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e m \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e ans \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"{}\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ans\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"所感\"\u003e\u003ca href=\"#%E6%89%80%E6%84%9F\"\u003e所感\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eA -\u003e B -\u003e D -\u003e Cの順で解いた.\n立ち回りは悪くなかったと思う(DよりCにかけた時間の方が長かったので).\u003cbr\u003e\nただこのレベルで立ち回りとか考えずに全部解けるようにすべき,というのはそれはそうなので精進する.\nCに戻ってきたときに全探索が可能なことに気づくまでは早かったがそこからの比較ミスは2WAに抑えられるものだったので反省.\u003c/p\u003e\n\u003cp\u003eCよりDの方が簡単じゃないですか?\u003cbr\u003e\n2WA以上出した時は全部消して0から書き直すと吉っぽい.\u003cbr\u003e\nこれを書いた後に見た解説放送中のコメントに, Cは\u003ccode\u003emax(h) \u0026#x3C;= H \u0026#x3C;= max(h) + 200\u003c/code\u003eに収まるからHについても全探索が可能、とあってなるほどなあとなった.\u003c/p\u003e","description":"考察","commits":[{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"35b550ae.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 35b550ae83af4efaeadf33471c8ca8a32c1079c8\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2018-10-06-abc112.md b/_posts/2018-10-06-abc112.md\nnew file mode 100644\nindex 0000000..44ab51b\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2018-10-06-abc112.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,168 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: ABC112\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2018-10-06\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Competitive Programming\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tags:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - AtCoder\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+description: 考察\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+AtCoder Beginners Contest 112の参加記録。\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## [A](https://beta.atcoder.jp/contests/abc112/tasks/abc112_a)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+入力`N`が1なら指定の文字列を出力, 2なら更に標準入力から数字を読み、計算結果を出力.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+インタラクティブに標準入力の分岐処理を行う問題はABCだと初めて?\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 解答\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn main() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let n = read_one::\u0026#x26;lt;String\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    if n == \"1\" {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        println!(\"Hello World\");\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    } else {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let a = read_one::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let b = read_one::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        println!(\"{}\", a + b);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## [B](https://beta.atcoder.jp/contests/abc112/tasks/abc112_b)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`(c_i, t_i)`のうち、`t_i \u0026#x26;lt;= T`を満たす最小の`c_i`を求める.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+存在しない場合には`TLE`を出力する。\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 解答\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn main() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let (n, t) = {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let i = read::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        (i[0], i[1])\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    };\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut ct = Vec::new();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for _ in 0..n {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let i = read::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        ct.push((i[0], i[1]));\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let ans = ct.iter()\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        .filter(|x| x.1 \u0026#x26;lt;= t)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        .map(|x| x.0)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        .min();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    match ans {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        Some(x) =\u0026#x26;gt; println!(\"{}\", x),\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        None =\u0026#x26;gt; println!(\"TLE\"),\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## [C](https://beta.atcoder.jp/contests/abc112/tasks/abc112_c)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+座標`(x_i, y_i)`と高度`h_i`及び高度の計算式が与えられ、それを満たす中心座標及びそれの高度を求める.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+制約が`x \u0026#x26;lt; 10^2, y \u0026#x26;lt; 10^2, N \u0026#x26;lt; 10 ^ 2`なので全探索でも`10^8`なので通る.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`x, y`及び`n`を固定すれば`h = max(H - (X - c_x).abs() - (Y - c_y).abs(), 0)`から`H`は定まるが、最初`h_i`が`0`になりうるケースを考慮せずにやってWA.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+そこで, クエリを`h_i`によってソートすれば`max(..., 0)`の結果が正になるから, ここでの条件分岐を考えずに済む.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+後は各クエリがこの`x, y, h`と一致するか確認する.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn main() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let n = read_one::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut vec = Vec::new();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for _ in 0..n {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let i = read::\u0026#x26;lt;isize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        vec.push((i[0], i[1], i[2]));\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    vec.sort_by_key(|x| x.2);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    vec.reverse();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut ans_x = 0;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut ans_y = 0;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut ans_h = 0;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for x in 0..101 { for y in 0..101 {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let mut flg = true;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let h = vec[0].2 + (x - vec[0].0).abs() + (y - vec[0].1).abs();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        for v in vec.iter() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            if v.2 != cmp::max(h - (x - v.0).abs() - (y - v.1).abs(), 0) {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+                flg = false;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+                continue;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        if flg {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            ans_x = x;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            ans_y = y;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            ans_h = h;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    println!(\"{} {} {}\", ans_x, ans_y, ans_h);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## [D](https://beta.atcoder.jp/contests/abc112/tasks/abc112_d)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+数列`an`の要素数`N`と和`M`が与えられるので、`an`の各要素の最大公約数の取りうる最大値を求める.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`a_1 + a_2 + ... + a_N`の最大公約数が`K`であるとき, 次のように括り出すことができる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+K * (a_1' + a_2' + ... + a_N') = K * sum(a')\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+したがって`K`は`M`の約数.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+次に`an`の要素数を`N`にするためには, `a'`の要素数が`N`個である必要がある.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`min(sum(a'))`は全ての要素が`1`の場合に`N`となるので, `K`は大きくても`M / N`の範囲であることがわかる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+よって, `i in 1 ~ M / N`について,Mが割り切れる`i`のうち最大のものが答え.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+また制約から`n = 1, m = 10^9`のケースがありうる. その場合処理が全て走ってしまうのでTLE(1WA), その場合の処理はアドホックに書いてしまった.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### 解答\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn main() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let (n, m) = {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let i = read::\u0026#x26;lt;u64\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        (i[0], i[1])\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    };\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut ans = 1;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    if n == 1 {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        println!(\"{}\", m);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        return;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for i in 1..(m / n + 1) {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        if m % i == 0 { ans = i; }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    println!(\"{}\", ans);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## 所感\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+A -\u0026#x26;gt; B -\u0026#x26;gt; D -\u0026#x26;gt; Cの順で解いた.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+立ち回りは悪くなかったと思う(DよりCにかけた時間の方が長かったので).  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ただこのレベルで立ち回りとか考えずに全部解けるようにすべき,というのはそれはそうなので精進する.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Cに戻ってきたときに全探索が可能なことに気づくまでは早かったがそこからの比較ミスは2WAに抑えられるものだったので反省.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+CよりDの方が簡単じゃないですか?  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+2WA以上出した時は全部消して0から書き直すと吉っぽい.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+これを書いた後に見た解説放送中のコメントに, Cは`max(h) \u0026#x26;lt;= H \u0026#x26;lt;= max(h) + 200`に収まるからHについても全探索が可能、とあってなるほどなあとなった.\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2018-10-06","updatedAt":"2021-01-30"},{"slug":"2018-01-11-reading-futures-await","title":"memo:reading futures-await","categories":["Code Reading"],"image":"https://koka831.github.io/img/icon.png","tags":["Rust"],"content":"\u003cp\u003e\u003ca href=\"https://github.com/alexcrichton/futures-rs\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003efutures-rs\u003c/a\u003e is a libary allows zero cost abstruction of state machine; \u003ccode\u003eFuture\u003c/code\u003e trait in Rust.\u003c/p\u003e\n\u003cp\u003efutures-await provides Async/await syntax for \u003ccode\u003efutures-rs\u003c/code\u003e.\u003c/p\u003e\n\u003ch2 id=\"async\"\u003e\u003ca href=\"#async\"\u003e#[async]\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003emake it returns future instead of result.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token attribute attr-name\"\u003e#[async]\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// tagged with #[async] option\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003efetch\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ec\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eClient\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eResult\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eT\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e res \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e\u003cspan class=\"token operator\"\u003e!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// Optional\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token operator\"\u003e!\u003c/span\u003eres\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003estatus\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eis_success\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// Err }\u003c/span\u003e\n\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"async_stream\"\u003e\u003ca href=\"#async_stream\"\u003e#[async_stream]\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003estream instead of future\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token attribute attr-name\"\u003e#[async_stream(item=T)]\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e s \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eT\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e...\u003c/span\u003e\n  \u003cspan class=\"token macro property\"\u003estream_yield!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e\u003cspan class=\"token operator\"\u003e!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"await-macro\"\u003e\u003ca href=\"#await-macro\"\u003eawait! macro\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003eawait!\u003c/code\u003e macro allows blocking the procedure until completion, not blocking the thread.\u003c/p\u003e\n\u003cp\u003eit behaves like a function returns \u003ccode\u003eResult(e)\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003ehere is a brief procedure of \u003ccode\u003eawait!\u003c/code\u003e macro.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token macro property\"\u003emacro_rules!\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e future \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$e\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003eloop\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ematch\u003c/span\u003e \u003cspan class=\"token function\"\u003epoll\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e future\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token class-name\"\u003eOk\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eReady\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ee\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ebreak\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eOk\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ee\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"token class-name\"\u003eOk\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eNotReady\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// continue and wait\u003c/span\u003e\n      \u003cspan class=\"token class-name\"\u003eErr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ee\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eErr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ee\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e// block until NotReady -\u003e Ready(e)\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003eyield\u003c/span\u003e \u003cspan class=\"token namespace\"\u003efutures\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eAsync\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eNotReady\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"async_block-macro\"\u003e\u003ca href=\"#async_block-macro\"\u003easync_block! macro\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eit doesn't need a dedicated function like \u003ccode\u003e#[async]\u003c/code\u003e, (I think it's a like \u003ccode\u003ethread::spawn()\u003c/code\u003e, so it can be run with \u003ccode\u003ecore.run(Fn(async_block!))\u003c/code\u003e)\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003epub\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003espawn\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eF\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eT\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ef\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eF\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eJoinHandle\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eT\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003ewhere\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eF\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eFnOnce\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eT\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token class-name\"\u003eF\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSend\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token lifetime-annotation symbol\"\u003e'static\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eT\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSend\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token lifetime-annotation symbol\"\u003e'static\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003ehere's the brief internal procedure of async_block macro.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token attribute attr-name\"\u003e#[proc_macro]\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003easync_block\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eTokenStream\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eTokenStream\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e// input -\u003e TokenTree -\u003e TokenStream -\u003e parse -\u003e TokenStream\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e input \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eTokenStream\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003efrom\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eTokenTree\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e...\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e// parse input as token node\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e...\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e kind\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eTokenNode\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eGroup\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eDelimiter\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eBrace\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n  \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e expr \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token namespace\"\u003esyn\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token function\"\u003eparse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003einput\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n  \u003cspan class=\"token comment\"\u003e// token construction..\u003c/span\u003e\n  token\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003einto\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// return Stream\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"nightly-features\"\u003e\u003ca href=\"#nightly-features\"\u003enightly features\u003c/a\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/rust-lang/rust/issues/43122\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003egenerators\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/rust-lang/rust/issues/35896\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eproc_macro\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/rust-lang/rust/issues/42183\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003econservative_impl_trait\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","description":"memo","commits":[{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"35b550ae.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 35b550ae83af4efaeadf33471c8ca8a32c1079c8\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2018-01-11-reading-futures-await.md b/_posts/2018-01-11-reading-futures-await.md\nnew file mode 100644\nindex 0000000..6e034f0\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2018-01-11-reading-futures-await.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,93 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: memo:reading futures-await\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2018-01-11\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Code Reading\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tags:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - Rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+description: memo\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[futures-rs](https://github.com/alexcrichton/futures-rs) is a libary allows zero cost abstruction of state machine; `Future` trait in Rust.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+futures-await provides Async/await syntax for `futures-rs`.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## #[async]\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+make it returns future instead of result.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+#[async] // tagged with #[async] option\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn fetch(c: Client) -\u0026#x26;gt; Result\u0026#x26;lt;T\u0026#x26;gt; {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  let res = await!()?; // Optional\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  if !res.status().is_success() { // Err }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## #[async_stream]\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+stream instead of future\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+#[async_stream(item=T)]\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+for s in T {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  ...\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  stream_yield!(await!(..))\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## await! macro\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`await!` macro allows blocking the procedure until completion, not blocking the thread.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+it behaves like a function returns `Result(e)`\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+here is a brief procedure of `await!` macro.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+macro_rules! await {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  let mut future = $e\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  loop {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    match poll(\u0026#x26;mut future) {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+      Ok(Ready(e)) =\u0026#x26;gt; break Ok(e),\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+      Ok(NotReady) =\u0026#x26;gt; {}, // continue and wait\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+      Err(e) =\u0026#x26;gt; Err(e)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  // block until NotReady -\u0026#x26;gt; Ready(e)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  yield futures::Async::NotReady\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## async_block! macro\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+it doesn't need a dedicated function like `#[async]`, (I think it's a like `thread::spawn()`, so it can be run with `core.run(Fn(async_block!))`)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+pub fn spawn\u0026#x26;lt;F, T\u0026#x26;gt;(f: F) -\u0026#x26;gt; JoinHandle\u0026#x26;lt;T\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  where F: FnOnce() -\u0026#x26;gt; T,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  F: Send + 'static, T: Send + 'static\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+here's the brief internal procedure of async_block macro.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+#[proc_macro]\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn async_block(i: TokenStream) -\u0026#x26;gt; TokenStream {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  // input -\u0026#x26;gt; TokenTree -\u0026#x26;gt; TokenStream -\u0026#x26;gt; parse -\u0026#x26;gt; TokenStream\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  let input = TokenStream::from(TokenTree {...,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    // parse input as token node\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    ..., kind: TokenNode::Group(Delimiter::Brace, i)})\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  let expr = syn::parse(input)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  // token construction..\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  token.into() // return Stream\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## nightly features\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- [generators](https://github.com/rust-lang/rust/issues/43122)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- [proc_macro](https://github.com/rust-lang/rust/issues/35896)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- [conservative_impl_trait](https://github.com/rust-lang/rust/issues/42183)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2018-01-11","updatedAt":"2021-01-30"},{"slug":"2018-01-09-reading-wordpress","title":"reading wordpress","categories":["Code Reading"],"image":"https://koka831.github.io/img/2018-01-10-thumb.png","tags":["Wordpress"],"content":"\u003cp\u003e友人からコードリーディングの方法について聞かれたので,僕自身もCSバックグラウンドではないけれどソースコードの読み方を説明しようと思う.\u003cbr\u003e\n以下友人向け文体.\u003c/p\u003e\n\u003cp\u003e途中でプロジェクトにアサインされた時、過去の自分のコードをリファクタリングする時、OSSのコードを読む時など、ある程度の規模のソースコードを読む機会があると思う.\u003cbr\u003e\nサーバーだったりコマンドラインツールだったり,言語も責務も異なる様々なプログラムを読む際に一貫した読み方はあるのだろうか.\n完全な解はないと思うが、僕個人の経験からすると、\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e抽象化・抽象度を意識すること\u003c/li\u003e\n\u003cli\u003e読まないこと\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eこれらを意識するだけででソースコードはだいぶ読みやすくなる.\u003c/p\u003e\n\u003cp\u003e抽象化・抽象度を意識するとはどういうことか.\n具体的に言うと、自分が今、全体の処理の流れのうち、どの部分を読んでいるかを意識することである。\u003c/p\u003e\n\u003cp\u003e僕らは普段プログラムを書くためにOSを使っているけれど、OSは実際どんなことをしてくれているのか.\u003cbr\u003e\nプログラムをコンパイラに喰わせると実行可能なファイルを吐いてくれるけれど、内部ではなにをしているのか.\u003cbr\u003e\nCPUはフリップフロップ\u003csup id=\"fnref-1\"\u003e\u003ca href=\"#fn-1\" class=\"footnote-ref\"\u003e1\u003c/a\u003e\u003c/sup\u003eという素子からできているし、フリップフロップは半導体からできている.\u003cbr\u003e\nけれど、プログラムを組む上で僕らはそんなこと気にする必要がない.\u003cbr\u003e\nこれが抽象化である. 内部構造を隠蔽し、表に見えるのはユーザが触って良い部分だけ.\u003c/p\u003e\n\u003cp\u003e注意して欲しいのが、ここで言うユーザは必ずしも人間だけではないということ.\u003cbr\u003e\n例えば実行中のプログラムがメモリの状態を知りたい時、直接メモリを参照するのは無理がある.\n実行中のプログラムからメモリまでには以下のような層がある.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003e+-----+    +-----+    +-----------+    +---------+\n| mem | == | CPU | == | kernel/OS | == | program |\n+-----+    +-----+    +-----------+    +---------+\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eではどうするか. 見えないものは下の層が知っているかもしれない.\nOSにメモリの使用状況を尋ねる命令を送るのである.\u003c/p\u003e\n\u003cp\u003e上の例では物理的に層が分かれていたので抽象化の区切りが分かりやすかったが、ソフトウェアの構成も同様に抽象化が行われている.\u003cbr\u003e\nソフトウェアのコードを読む時にも、自分が今メモリを見ているのかOSの命令を見ているのか、また隠蔽されている処理なのか、表に見えている部分なのか、どのレベルを見ているのかを意識することが必要なのがわかると思う.\u003c/p\u003e\n\u003cp\u003e次に、読まないこと.\nこれは\u003cstrong\u003e読むべき情報以外を読まない\u003c/strong\u003eという意味.\u003c/p\u003e\n\u003cp\u003e全体像を知る、というのは全部を知ることではない. 上の話でも言ったように、基本的にソフトウェアは抽象化の繰り返しで構成されている.\u003cbr\u003e\nつまり、自分が欲しい情報の層に立った時に、表に見える情報以外は読まなくていい.\nOSがどうなっているか知りたいのにメモリを分解してみてもどうにもならない.\u003c/p\u003e\n\u003cp\u003e恐らくソースコードを読むことに慣れているエンジニアはこれらを無意識に行っている.\nそのため同じ抽象度のものを見る時に,自分の培ったパターンを当てはめることができ、更に自分がコードを書く際に、同様の設計で実装することが出来る.\u003cbr\u003e\nプロジェクトが書けるエンジニアは読む力もある.\u003c/p\u003e\n\u003cp\u003e以上を踏まえてWordPressのソースコード\u003csup id=\"fnref-2\"\u003e\u003ca href=\"#fn-2\" class=\"footnote-ref\"\u003e2\u003c/a\u003e\u003c/sup\u003eを読んでみよう.\u003c/p\u003e\n\u003cp\u003eまずなにを知りたいか.\nここでは全体的な構成とCMSとしての処理の流れを把握することを目標としてみよう.\u003c/p\u003e\n\u003cp\u003e全体構成を把握する場合、複数の層の責務を把握する必要があるため、特に\u003cstrong\u003e読まない\u003c/strong\u003eことが重要である.\u003cbr\u003e\nコードを実際に読む前に、まずは公式サイトやリファレンスに書いていないか確認してみよう.\nリファレンスがダメならコメントだ.\u003c/p\u003e\n\u003cp\u003e公式に\u003ca href=\"http://wpdocs.osdn.jp/%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E9%9A%8E%E5%B1%A4\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eディレクトリ階層\u003c/a\u003eというページがある.\u003cbr\u003e\n見てみるとこれは自作テーマにおけるディレクトリ階層のようだ. 今回はWordPress自体がどのように動作するのかを知りたいので、今回は素直にコードを読むしかなさそうだ.\u003c/p\u003e\n\u003cp\u003eでは実際にディレクトリ構成を見てみよう.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell\"\u003e\u003ccode class=\"language-shell\"\u003eindex.php\nlicense.txt\nreadme.html\nwp-activate.php\nwp-blog-header.php\nwp-comments-post.php\nwp-config-sample.php\nwp-cron.php\nwp-links-opml.php\nwp-load.php\nwp-login.php\nwp-mail.php\nwp-settings.php\nwp-signup.php\nwp-trackback.php\nxmlrpc.php\n\u003cspan class=\"token builtin class-name\"\u003e.\u003c/span\u003e\n├── wp-admin\n│   ├── css\n│   ├── images\n│   ├── includes\n│   ├── js\n│   ├── maint\n│   ├── network\n│   └── user\n├── wp-content\n│   ├── plugins\n│   ├── themes\n│   └index.php\n└── wp-includes\n    ├── certificates\n    ├── css\n    ├── customize\n    ├── fonts\n    ├── ID3\n    ├── images\n    ├── IXR\n    ├── js\n    ├── pomo\n    ├── random_compat\n    ├── Requests\n    ├── rest-api\n    ├── SimplePie\n    ├── Text\n    ├── theme-compat\n    ├── widgets\n    └\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003e.\n\n\u003cspan class=\"token number\"\u003e28\u003c/span\u003e directories\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e構成を見つつ、このうちどれが読まなくてもいいものか考えてみよう.\u003c/p\u003e\n\u003cp\u003eまず\u003ccode\u003ewp-admin/\u003c/code\u003e. これは管理者パネル用のディレクトリだろう. CMSとしてはとりあえず読まなくても良さそうだ.\u003c/p\u003e\n\u003cp\u003e次に\u003ccode\u003ewp-content/\u003c/code\u003e配下. \u003ccode\u003eplugins/\u003c/code\u003e, \u003ccode\u003ethemes/\u003c/code\u003eは それぞれユーザインストールのプラグインとテーマ用のディレクトリだろうか.\u003cbr\u003e\n\u003ccode\u003eindex.php\u003c/code\u003eはルートディレクトリにもあったがどちらがエントリーポイントになるのだろう. テーマを読み込む処理はルーティング後に行われるだろうからとりあえずは後回しにしよう.\u003c/p\u003e\n\u003cp\u003e最後に\u003ccode\u003ewp-includes\u003c/code\u003eはどうだろう.\u003cbr\u003e\n大抵\u003ccode\u003eincludes/\u003c/code\u003eディレクトリにはシステムで利用するライブラリ等が置かれる. 読むのは必要な機能が出てきてからで良さそうだ.\u003c/p\u003e\n\u003cp\u003eつまり最初に読む必要があるのはこれらになりそうだ.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell\"\u003e\u003ccode class=\"language-shell\"\u003e$ tree -I \u003cspan class=\"token string\"\u003e'wp-includes|wp-admin|themes|plugins|licence|readme'\u003c/span\u003e\n\n├── index.php\n├── wp-activate.php\n├── wp-blog-header.php\n├── wp-comments-post.php\n├── wp-config-sample.php\n├── wp-content\n│   └── index.php\n├── wp-cron.php\n├── wp-links-opml.php\n├── wp-load.php\n├── wp-login.php\n├── wp-mail.php\n├── wp-settings.php\n├── wp-signup.php\n├── wp-trackback.php\n└── xmlrpc.php\n\n\u003cspan class=\"token number\"\u003e1\u003c/span\u003e directory, \u003cspan class=\"token number\"\u003e17\u003c/span\u003e files\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eでは実際の処理の流れを追っていこう.\u003c/p\u003e\n\u003cp\u003e大抵WordPressはApacheやNginx等のウェブサーバを介してPHP-FPMやFastCGIを用いてホスティングされる.\u003cbr\u003e\nApacheであれば\u003ccode\u003eDirectoryIndex\u003c/code\u003e, Nginxであれば\u003ccode\u003ehttp\u003c/code\u003eディレクティブ内の\u003ccode\u003eindex\u003c/code\u003eに、ウェブサーバにアクセスがあった時に最初にアクセスされるファイルが指定されている.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-nginx\"\u003e\u003ccode class=\"language-nginx\"\u003e\u003cspan class=\"token comment\"\u003e# nginx.conf\u003c/span\u003e\n\u003cspan class=\"token directive\"\u003e\u003cspan class=\"token keyword\"\u003ehttp\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e# ...\u003c/span\u003e\n  \u003cspan class=\"token directive\"\u003e\u003cspan class=\"token keyword\"\u003eindex\u003c/span\u003e                index.php index.html index.htm\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eなので\u003ccode\u003e/index.php\u003c/code\u003eが最初に読み込まれる.\n処理より流れを把握することを意識して実際に読んでいこう.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-php\"\u003e\u003ccode class=\"language-php\"\u003e\u003cspan class=\"token comment\"\u003e/* index.php */\u003c/span\u003e\n\u003cspan class=\"token function\"\u003edefine\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string single-quoted-string\"\u003e'WP_USE_THEMES'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token constant boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003erequire\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e \u003cspan class=\"token function\"\u003edirname\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token constant\"\u003e__FILE__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e.\u003c/span\u003e\u003cspan class=\"token string single-quoted-string\"\u003e'/wp-blog-header.php'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003ccode\u003eindex.php\u003c/code\u003eでは定数を定義して、\u003ccode\u003ewp-blog-header.php\u003c/code\u003eを読み込んでいる.\nでは\u003ccode\u003ewp-blog-header.php\u003c/code\u003eを見てみよう.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-php\"\u003e\u003ccode class=\"language-php\"\u003e\u003cspan class=\"token comment\"\u003e/* wp-blog-header.php */\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e/* Loads the WordPress environment and template. */\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e!\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eisset\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$wp_did_header\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token variable\"\u003e$wp_did_header\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token constant boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e/* Load the WordPress library. */\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003erequire_once\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e \u003cspan class=\"token function\"\u003edirname\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token constant\"\u003e__FILE__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e.\u003c/span\u003e \u003cspan class=\"token string single-quoted-string\"\u003e'/wp-load.php'\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e/* Set up the WordPress query. */\u003c/span\u003e\n  \u003cspan class=\"token function\"\u003ewp\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e/* Load the theme template. */\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003erequire_once\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e \u003cspan class=\"token constant\"\u003eABSPATH\u003c/span\u003e \u003cspan class=\"token operator\"\u003e.\u003c/span\u003e \u003cspan class=\"token constant\"\u003eWPINC\u003c/span\u003e \u003cspan class=\"token operator\"\u003e.\u003c/span\u003e \u003cspan class=\"token string single-quoted-string\"\u003e'/template-loader.php'\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eLoads the WordPress environment and template.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eとあるので、\u003ccode\u003ewp-load.php\u003c/code\u003eが\"environment\"、定数やデータベースの設定を、\u003ccode\u003etemplate-loader.php\u003c/code\u003eが\"template\"、\u003ccode\u003ewp-contents/themes\u003c/code\u003eのテーマテンプレートをロードするファイルなのだろう.\u003cbr\u003e\nでは\u003ccode\u003ewp()\u003c/code\u003eは? \u003ccode\u003ewp()\u003c/code\u003eを呼ぶ前にインクルードしたファイルは\u003ccode\u003ewp-load.php\u003c/code\u003eしかないので、ここで定義されているのだろう.\u003cbr\u003e\nそして\"Set up the WordPress query.\"とはどういうことだろう.\u003cbr\u003e\n順に追っていこう.\u003c/p\u003e\n\u003ch4 id=\"wp-loadphp\"\u003e\u003ca href=\"#wp-loadphp\"\u003ewp-load.php\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003eコメントを読むと\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eABSPATHの定義\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ewp-config.php\u003c/code\u003e, \u003ccode\u003ewp-settings.php\u003c/code\u003eのロード\n\u003cul\u003e\n\u003cli\u003eファイルが存在しなければセットアップするように表示する\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eと書いてある.\nセットアップ時のエラーハンドリングもCMSの機能としては本質ではないので、ここもコメントを読んでこれくらいで次に進むようにしよう.\u003c/p\u003e\n\u003ch4 id=\"wp-configphp\"\u003e\u003ca href=\"#wp-configphp\"\u003ewp-config.php\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003eこれは初期状態では存在しない. \u003ccode\u003ewp-config-sample.php\u003c/code\u003eをベースにセットアップ時に作成されるようだ.\nこのファイルでは\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eMySQL settings\u003c/li\u003e\n\u003cli\u003eSecret Keys\u003c/li\u003e\n\u003cli\u003eDatabase table prefix\u003c/li\u003e\n\u003cli\u003eABSPATH\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eの定義がされるようだ.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003ewp-load.php\u003c/code\u003eでABSPATHの定義をしたはずなのに、どうしてまた定義するのだろうか?\nとりあえず全体像を確認するためにこれは置いておこう.\u003c/p\u003e\n\u003ch4 id=\"wp-settingsphp\"\u003e\u003ca href=\"#wp-settingsphp\"\u003ewp-settings.php\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003eトップレベルコメントには、\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eUsed to set up and fix common variables and include the WordPress procedural and class library\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eとあるので、基本的な関数やクラスのロードが行われるのだろう.\u003c/p\u003e\n\u003cp\u003e次に進みたいけれどまだ\u003ccode\u003ewp()\u003c/code\u003eが見つかっていない. 恐らく\u003ccode\u003ewp-settings.php\u003c/code\u003eで読み込んでいるファイルのどれかに定義されているのだろう.\u003cbr\u003e\nただこの量の\u003ccode\u003erequire\u003c/code\u003e文を全て読んでいくのはしんどい.\u003c/p\u003e\n\u003cp\u003eこんな時は\u003cstrong\u003eタグジャンプ\u003c/strong\u003eを使ってみよう.\u003cbr\u003e\nタグジャンプとは、ctagsを用いてソースコードを静的解析し、定義元のファイルを開く方法である.\nVimやSublime Textのプラグインとして公開されているものがあるので使ってみよう.\nもちろんgrepでもいい.\u003c/p\u003e\n\u003cp\u003eそうして\u003ccode\u003ewp-includes/functions.php\u003c/code\u003eに\u003ccode\u003ewp()\u003c/code\u003eを見つけた.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-php\"\u003e\u003ccode class=\"language-php\"\u003e\u003cspan class=\"token doc-comment comment\"\u003e/**\n * Set up the WordPress query.\n *\n * \u003cspan class=\"token keyword\"\u003e@since\u003c/span\u003e 2.0.0\n *\n * \u003cspan class=\"token keyword\"\u003e@global\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eWP\u003c/span\u003e       \u003cspan class=\"token parameter\"\u003e$wp_locale\u003c/span\u003e\n * \u003cspan class=\"token keyword\"\u003e@global\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eWP_Query\u003c/span\u003e \u003cspan class=\"token parameter\"\u003e$wp_query\u003c/span\u003e\n * \u003cspan class=\"token keyword\"\u003e@global\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eWP_Query\u003c/span\u003e \u003cspan class=\"token parameter\"\u003e$wp_the_query\u003c/span\u003e\n *\n * \u003cspan class=\"token keyword\"\u003e@param\u003c/span\u003e \u003cspan class=\"token class-name\"\u003e\u003cspan class=\"token keyword\"\u003estring\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e|\u003c/span\u003e\u003cspan class=\"token keyword\"\u003earray\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token parameter\"\u003e$query_vars\u003c/span\u003e Default WP_Query arguments.\n */\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003ewp\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$query_vars\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string single-quoted-string\"\u003e''\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003eglobal\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$wp\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$wp_query\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$wp_the_query\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token variable\"\u003e$wp\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e\u003cspan class=\"token function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$query_vars\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n  \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e \u003cspan class=\"token operator\"\u003e!\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eisset\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$wp_the_query\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token variable\"\u003e$wp_the_query\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$wp_query\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eなるほど、この\u003ccode\u003e$wp\u003c/code\u003eがメインのオブジェクトなのだろう.\u003cbr\u003e\n@globalとあるので、\u003ccode\u003e$GLOBALS['wp']\u003c/code\u003eを定義している箇所を探してみよう.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-php\"\u003e\u003ccode class=\"language-php\"\u003e\u003cspan class=\"token comment\"\u003e// wp-settings.php\u003c/span\u003e\n\u003cspan class=\"token doc-comment comment\"\u003e/**\n * WordPress Object\n * \u003cspan class=\"token keyword\"\u003e@global\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eWP\u003c/span\u003e \u003cspan class=\"token parameter\"\u003e$wp\u003c/span\u003e\n * \u003cspan class=\"token keyword\"\u003e@since\u003c/span\u003e 2.0.0\n */\u003c/span\u003e\n\u003cspan class=\"token global\"\u003e$GLOBALS\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string single-quoted-string\"\u003e'wp'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eWP\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003ccode\u003e$wp\u003c/code\u003eの実態はclass WPのインスタンスだった.\u003cbr\u003e\n\u003ccode\u003e$wp-\u003emain( $query_vars )\u003c/code\u003eとあったので、WPクラスのmainメソッドを見てみよう.\u003cbr\u003e\nWPクラスは\u003ccode\u003ewp-includes/class-wp.php\u003c/code\u003eに定義されている.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-php\"\u003e\u003ccode class=\"language-php\"\u003e\u003cspan class=\"token doc-comment comment\"\u003e/**\n * Sets up all of the variables required by the WordPress environment.\n *\n * The action \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token keyword\"\u003e@see\u003c/span\u003e 'wp'\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e has one parameter that references the WP object. It\n * allows for accessing the properties and methods to further manipulate the\n * object.\n *\n * \u003cspan class=\"token keyword\"\u003e@param\u003c/span\u003e \u003cspan class=\"token class-name\"\u003e\u003cspan class=\"token keyword\"\u003estring\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e|\u003c/span\u003e\u003cspan class=\"token keyword\"\u003earray\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token parameter\"\u003e$query_args\u003c/span\u003e Passed to parse_request().\n */\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$query_args\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string single-quoted-string\"\u003e''\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token this\"\u003e$this\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e\u003cspan class=\"token function\"\u003einit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token this\"\u003e$this\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e\u003cspan class=\"token function\"\u003eparse_request\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$query_args\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token this\"\u003e$this\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e\u003cspan class=\"token function\"\u003esend_headers\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token this\"\u003e$this\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e\u003cspan class=\"token function\"\u003equery_posts\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token this\"\u003e$this\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e\u003cspan class=\"token function\"\u003ehandle_404\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token this\"\u003e$this\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e\u003cspan class=\"token function\"\u003eregister_globals\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n  \u003cspan class=\"token doc-comment comment\"\u003e/**\n   * Fires once the WordPress environment has been set up.\n   *\n   * \u003cspan class=\"token keyword\"\u003e@since\u003c/span\u003e 2.1.0\n   *\n   * \u003cspan class=\"token keyword\"\u003e@param\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eWP\u003c/span\u003e \u003cspan class=\"token parameter\"\u003e$this\u003c/span\u003e Current WordPress environment instance (passed by reference).\n   */\u003c/span\u003e\n  \u003cspan class=\"token function\"\u003edo_action_ref_array\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e \u003cspan class=\"token string single-quoted-string\"\u003e'wp'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token keyword\"\u003earray\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan class=\"token this\"\u003e$this\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eようやく実態が見えてきた. ここでそれぞれのメソッドを読みたい気持ちをこらえて、最後のフェーズ、\u003ccode\u003ewp-includes/template-loader.php\u003c/code\u003eを読んでいこう.\u003c/p\u003e\n\u003ch4 id=\"template-loaderphp\"\u003e\u003ca href=\"#template-loaderphp\"\u003etemplate-loader.php\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003eまず\u003ccode\u003edo_action( 'template_redirect' )\u003c/code\u003eが目につく.\u003cbr\u003e\nコメントを見るとどのテンプレートを読むかを判断する命令を送っているようだ.\u003cbr\u003e\n\u003ccode\u003edo_action()\u003c/code\u003eは命令に応じたアクションを呼び出す関数らしい. これも後で確認してみよう.\u003c/p\u003e\n\u003cp\u003e読み進めると、elseifの分岐に圧倒されるが\u003ccode\u003eis_\u003c/code\u003eでリクエストされたページのタイプを判定して、それにあったテンプレートをレンダリングする関数を呼んでいるだけのようだ.\u003cbr\u003e\n\u003ccode\u003eis_\u003c/code\u003e系の関数が全て引数を取っていないので、先の\u003ccode\u003emain()\u003c/code\u003e関数で読んでいた\u003cbr\u003e\n\u003ccode\u003e$this-\u003eregister_globals()\u003c/code\u003eでそれらの情報もグローバル変数に定義しているのだろう.\u003c/p\u003e\n\u003cp\u003eここまで読んだ流れをまとめると次のようになる.\u003c/p\u003e\n\u003cp\u003e\u003cfigure\u003e\u003cimg src=\"./img/2018-01-10.png\" alt=\"\"\u003e\u003cfigcaption\u003eimg.1 \u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\u003ch4 id=\"終わりに\"\u003e\u003ca href=\"#%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%AB\"\u003e終わりに\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003eこれで予想も交えながらではあったが処理の流れをさらうことができた.\u003cbr\u003e\n内容の確認よりも確認する手順を自分の思考とともに紹介することに重きをおいたので、課題がそのまま残っている. 良かったら読んで教えて欲しい.\u003c/p\u003e\n\u003ch3 id=\"reference\"\u003e\u003ca href=\"#reference\"\u003ereference\u003c/a\u003e\u003c/h3\u003e\n\u003cdiv class=\"footnotes\"\u003e\n\u003chr\u003e\n\u003col\u003e\n\u003cli id=\"fn-1\"\u003e\u003ca href=\"https://ja.wikipedia.org/wiki/%E3%83%95%E3%83%AA%E3%83%83%E3%83%97%E3%83%95%E3%83%AD%E3%83%83%E3%83%97#D%E5%9E%8B%E3%83%95%E3%83%AA%E3%83%83%E3%83%97%E3%83%95%E3%83%AD%E3%83%83%E3%83%97\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ewikipedia\u003c/a\u003e\u003ca href=\"#fnref-1\" class=\"footnote-backref\"\u003e↩\u003c/a\u003e\u003c/li\u003e\n\u003cli id=\"fn-2\"\u003eWordPress/ver.4.9\u003ca href=\"#fnref-2\" class=\"footnote-backref\"\u003e↩\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e","description":"How to read source code with an example","commits":[{"title":"tweak ogp","date":"2021-04-22 15:12:31","hash":"cd43e57e","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"cd43e57e.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit cd43e57eef247d695ae5d7ec91dd77bdd26b3d1d\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Thu Apr 22 15:12:31 2021 +0900\n\n  tweak ogp\n\ndiff --git a/_posts/2018-01-09-reading-wordpress.md b/_posts/2018-01-09-reading-wordpress.md\nindex f6c20d2..d0792b0 100644\n\u003cspan class=\"token deleted\"\u003e--- a/_posts/2018-01-09-reading-wordpress.md\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2018-01-09-reading-wordpress.md\u003c/span\u003e\n@@ -3,7 +3,7 @@ title: reading wordpress\ndate: 2018-01-09\ncategories:\n\u003cspan class=\"token deleted\"\u003e- Code Reading\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-image: /img/2018-01-10-thumb.png\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+image: 2018-01-10-thumb.png\u003c/span\u003e\ntags:\n - Wordpress\ndescription: How to read source code with an example\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"},{"title":"tweak","date":"2021-04-22 01:20:00","hash":"fabe928f","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"fabe928f.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit fabe928f5f60875b34ca333ba1bd5f4c21c143d1\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Thu Apr 22 01:20:00 2021 +0900\n\n  tweak\n\ndiff --git a/_posts/2018-01-09-reading-wordpress.md b/_posts/2018-01-09-reading-wordpress.md\nindex 4934b7f..f6c20d2 100644\n\u003cspan class=\"token deleted\"\u003e--- a/_posts/2018-01-09-reading-wordpress.md\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2018-01-09-reading-wordpress.md\u003c/span\u003e\n@@ -3,7 +3,7 @@ title: reading wordpress\ndate: 2018-01-09\ncategories:\n\u003cspan class=\"token deleted\"\u003e- Code Reading\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e-image: /assets/img/2018-01-10-thumb.png\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+image: /img/2018-01-10-thumb.png\u003c/span\u003e\ntags:\n - Wordpress\ndescription: How to read source code with an example\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"},{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"35b550ae.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 35b550ae83af4efaeadf33471c8ca8a32c1079c8\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2018-01-09-reading-wordpress.md b/_posts/2018-01-09-reading-wordpress.md\nnew file mode 100644\nindex 0000000..4934b7f\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2018-01-09-reading-wordpress.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,334 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: reading wordpress\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2018-01-09\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Code Reading\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+image: /assets/img/2018-01-10-thumb.png\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tags:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - Wordpress\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+description: How to read source code with an example\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+友人からコードリーディングの方法について聞かれたので,僕自身もCSバックグラウンドではないけれどソースコードの読み方を説明しようと思う.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+以下友人向け文体.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+途中でプロジェクトにアサインされた時、過去の自分のコードをリファクタリングする時、OSSのコードを読む時など、ある程度の規模のソースコードを読む機会があると思う.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+サーバーだったりコマンドラインツールだったり,言語も責務も異なる様々なプログラムを読む際に一貫した読み方はあるのだろうか.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+完全な解はないと思うが、僕個人の経験からすると、\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- 抽象化・抽象度を意識すること\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- 読まないこと\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+これらを意識するだけででソースコードはだいぶ読みやすくなる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+抽象化・抽象度を意識するとはどういうことか.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+具体的に言うと、自分が今、全体の処理の流れのうち、どの部分を読んでいるかを意識することである。\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+僕らは普段プログラムを書くためにOSを使っているけれど、OSは実際どんなことをしてくれているのか.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+プログラムをコンパイラに喰わせると実行可能なファイルを吐いてくれるけれど、内部ではなにをしているのか.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+CPUはフリップフロップ[^1]という素子からできているし、フリップフロップは半導体からできている.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+けれど、プログラムを組む上で僕らはそんなこと気にする必要がない.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+これが抽象化である. 内部構造を隠蔽し、表に見えるのはユーザが触って良い部分だけ.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+注意して欲しいのが、ここで言うユーザは必ずしも人間だけではないということ.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+例えば実行中のプログラムがメモリの状態を知りたい時、直接メモリを参照するのは無理がある.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+実行中のプログラムからメモリまでには以下のような層がある.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e++-----+    +-----+    +-----------+    +---------+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+| mem | == | CPU | == | kernel/OS | == | program |\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e++-----+    +-----+    +-----------+    +---------+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ではどうするか. 見えないものは下の層が知っているかもしれない.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+OSにメモリの使用状況を尋ねる命令を送るのである.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+上の例では物理的に層が分かれていたので抽象化の区切りが分かりやすかったが、ソフトウェアの構成も同様に抽象化が行われている.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ソフトウェアのコードを読む時にも、自分が今メモリを見ているのかOSの命令を見ているのか、また隠蔽されている処理なのか、表に見えている部分なのか、どのレベルを見ているのかを意識することが必要なのがわかると思う.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+次に、読まないこと.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+これは**読むべき情報以外を読まない**という意味.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+全体像を知る、というのは全部を知ることではない. 上の話でも言ったように、基本的にソフトウェアは抽象化の繰り返しで構成されている.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+つまり、自分が欲しい情報の層に立った時に、表に見える情報以外は読まなくていい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+OSがどうなっているか知りたいのにメモリを分解してみてもどうにもならない.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+恐らくソースコードを読むことに慣れているエンジニアはこれらを無意識に行っている.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+そのため同じ抽象度のものを見る時に,自分の培ったパターンを当てはめることができ、更に自分がコードを書く際に、同様の設計で実装することが出来る.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+プロジェクトが書けるエンジニアは読む力もある.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+以上を踏まえてWordPressのソースコード[^2]を読んでみよう.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+まずなにを知りたいか.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ここでは全体的な構成とCMSとしての処理の流れを把握することを目標としてみよう.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+全体構成を把握する場合、複数の層の責務を把握する必要があるため、特に**読まない**ことが重要である.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+コードを実際に読む前に、まずは公式サイトやリファレンスに書いていないか確認してみよう.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+リファレンスがダメならコメントだ. \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+公式に[ディレクトリ階層](http://wpdocs.osdn.jp/%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E9%9A%8E%E5%B1%A4)というページがある.   \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+見てみるとこれは自作テーマにおけるディレクトリ階層のようだ. 今回はWordPress自体がどのように動作するのかを知りたいので、今回は素直にコードを読むしかなさそうだ.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+では実際にディレクトリ構成を見てみよう.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```shell\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+index.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+license.txt\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+readme.html\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+wp-activate.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+wp-blog-header.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+wp-comments-post.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+wp-config-sample.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+wp-cron.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+wp-links-opml.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+wp-load.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+wp-login.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+wp-mail.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+wp-settings.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+wp-signup.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+wp-trackback.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+xmlrpc.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+├── wp-admin\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+│   ├── css\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+│   ├── images\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+│   ├── includes\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+│   ├── js\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+│   ├── maint\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+│   ├── network\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+│   └── user\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+├── wp-content\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+│   ├── plugins\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+│   ├── themes\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+│   └index.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+└── wp-includes\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    ├── certificates\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    ├── css\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    ├── customize\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    ├── fonts\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    ├── ID3\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    ├── images\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    ├── IXR\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    ├── js\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    ├── pomo\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    ├── random_compat\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    ├── Requests\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    ├── rest-api\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    ├── SimplePie\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    ├── Text\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    ├── theme-compat\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    ├── widgets\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    └...\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+28 directories\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+構成を見つつ、このうちどれが読まなくてもいいものか考えてみよう.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+まず`wp-admin/`. これは管理者パネル用のディレクトリだろう. CMSとしてはとりあえず読まなくても良さそうだ.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+次に`wp-content/`配下. `plugins/`, `themes/`は それぞれユーザインストールのプラグインとテーマ用のディレクトリだろうか.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`index.php`はルートディレクトリにもあったがどちらがエントリーポイントになるのだろう. テーマを読み込む処理はルーティング後に行われるだろうからとりあえずは後回しにしよう.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+最後に`wp-includes`はどうだろう.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+大抵`includes/`ディレクトリにはシステムで利用するライブラリ等が置かれる. 読むのは必要な機能が出てきてからで良さそうだ.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+つまり最初に読む必要があるのはこれらになりそうだ.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```shell\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ tree -I 'wp-includes|wp-admin|themes|plugins|licence|readme'\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+├── index.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+├── wp-activate.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+├── wp-blog-header.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+├── wp-comments-post.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+├── wp-config-sample.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+├── wp-content\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+│   └── index.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+├── wp-cron.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+├── wp-links-opml.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+├── wp-load.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+├── wp-login.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+├── wp-mail.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+├── wp-settings.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+├── wp-signup.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+├── wp-trackback.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+└── xmlrpc.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+1 directory, 17 files\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+では実際の処理の流れを追っていこう.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+大抵WordPressはApacheやNginx等のウェブサーバを介してPHP-FPMやFastCGIを用いてホスティングされる.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Apacheであれば`DirectoryIndex`, Nginxであれば`http`ディレクティブ内の`index`に、ウェブサーバにアクセスがあった時に最初にアクセスされるファイルが指定されている.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```nginx\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# nginx.conf\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+http {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  # ...\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  index                index.php index.html index.htm;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+なので`/index.php`が最初に読み込まれる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+処理より流れを把握することを意識して実際に読んでいこう.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+/* index.php */\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+define('WP_USE_THEMES', true);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+require( dirname(__FILE__).'/wp-blog-header.php');\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`index.php`では定数を定義して、`wp-blog-header.php`を読み込んでいる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+では`wp-blog-header.php`を見てみよう.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+/* wp-blog-header.php */\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+/* Loads the WordPress environment and template. */\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+if (!isset($wp_did_header)) {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  $wp_did_header = true;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  /* Load the WordPress library. */\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  require_once( dirname(__FILE__) . '/wp-load.php' );\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  /* Set up the WordPress query. */\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  wp();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  /* Load the theme template. */\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  require_once( ABSPATH . WPINC . '/template-loader.php' );\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;gt; Loads the WordPress environment and template.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+とあるので、`wp-load.php`が\"environment\"、定数やデータベースの設定を、`template-loader.php`が\"template\"、`wp-contents/themes`のテーマテンプレートをロードするファイルなのだろう.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+では`wp()`は? `wp()`を呼ぶ前にインクルードしたファイルは`wp-load.php`しかないので、ここで定義されているのだろう.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+そして\"Set up the WordPress query.\"とはどういうことだろう.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+順に追っていこう.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+#### wp-load.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+コメントを読むと\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- ABSPATHの定義\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- `wp-config.php`, `wp-settings.php`のロード\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - ファイルが存在しなければセットアップするように表示する\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+と書いてある.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+セットアップ時のエラーハンドリングもCMSの機能としては本質ではないので、ここもコメントを読んでこれくらいで次に進むようにしよう.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+#### wp-config.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+これは初期状態では存在しない. `wp-config-sample.php`をベースにセットアップ時に作成されるようだ.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+このファイルでは\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- MySQL settings\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Secret Keys\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Database table prefix\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- ABSPATH\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+の定義がされるようだ.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`wp-load.php`でABSPATHの定義をしたはずなのに、どうしてまた定義するのだろうか?\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+とりあえず全体像を確認するためにこれは置いておこう.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+#### wp-settings.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+トップレベルコメントには、\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;gt; Used to set up and fix common variables and include the WordPress procedural and class library\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+とあるので、基本的な関数やクラスのロードが行われるのだろう.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+次に進みたいけれどまだ`wp()`が見つかっていない. 恐らく`wp-settings.php`で読み込んでいるファイルのどれかに定義されているのだろう.   \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ただこの量の`require`文を全て読んでいくのはしんどい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+こんな時は**タグジャンプ**を使ってみよう.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+タグジャンプとは、ctagsを用いてソースコードを静的解析し、定義元のファイルを開く方法である.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+VimやSublime Textのプラグインとして公開されているものがあるので使ってみよう.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+もちろんgrepでもいい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+そうして`wp-includes/functions.php`に`wp()`を見つけた.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+/**\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ * Set up the WordPress query.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ *\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ * @since 2.0.0\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ *\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ * @global WP       $wp_locale\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ * @global WP_Query $wp_query\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ * @global WP_Query $wp_the_query\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ *\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ * @param string|array $query_vars Default WP_Query arguments.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ */\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+function wp( $query_vars = '' ) {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  global $wp, $wp_query, $wp_the_query;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  $wp-\u0026#x26;gt;main( $query_vars );\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  if ( !isset($wp_the_query) )\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    $wp_the_query = $wp_query;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+なるほど、この`$wp`がメインのオブジェクトなのだろう.   \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+@globalとあるので、`$GLOBALS['wp']`を定義している箇所を探してみよう.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+// wp-settings.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+/**\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ * WordPress Object\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ * @global WP $wp\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ * @since 2.0.0\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ */\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$GLOBALS['wp'] = new WP();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`$wp`の実態はclass WPのインスタンスだった.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`$wp-\u0026#x26;gt;main( $query_vars )`とあったので、WPクラスのmainメソッドを見てみよう.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+WPクラスは`wp-includes/class-wp.php`に定義されている.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+/**\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ * Sets up all of the variables required by the WordPress environment.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ *\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ * The action {@see 'wp'} has one parameter that references the WP object. It\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ * allows for accessing the properties and methods to further manipulate the\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ * object.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ *\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ * @param string|array $query_args Passed to parse_request().\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ */\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+public function main($query_args = '') {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  $this-\u0026#x26;gt;init();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  $this-\u0026#x26;gt;parse_request($query_args);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  $this-\u0026#x26;gt;send_headers();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  $this-\u0026#x26;gt;query_posts();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  $this-\u0026#x26;gt;handle_404();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  $this-\u0026#x26;gt;register_globals();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  /**\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+   * Fires once the WordPress environment has been set up.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+   *\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+   * @since 2.1.0\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+   *\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+   * @param WP $this Current WordPress environment instance (passed by reference).\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+   */\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  do_action_ref_array( 'wp', array( \u0026#x26;$this ) );\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ようやく実態が見えてきた. ここでそれぞれのメソッドを読みたい気持ちをこらえて、最後のフェーズ、`wp-includes/template-loader.php`を読んでいこう.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+#### template-loader.php\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+まず`do_action( 'template_redirect' )`が目につく.   \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+コメントを見るとどのテンプレートを読むかを判断する命令を送っているようだ.   \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`do_action()`は命令に応じたアクションを呼び出す関数らしい. これも後で確認してみよう.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+読み進めると、elseifの分岐に圧倒されるが`is_`でリクエストされたページのタイプを判定して、それにあったテンプレートをレンダリングする関数を呼んでいるだけのようだ.   \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`is_`系の関数が全て引数を取っていないので、先の`main()`関数で読んでいた  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`$this-\u0026#x26;gt;register_globals()`でそれらの情報もグローバル変数に定義しているのだろう.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ここまで読んだ流れをまとめると次のようになる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+![](./img/2018-01-10.png)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+#### 終わりに\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+これで予想も交えながらではあったが処理の流れをさらうことができた.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+内容の確認よりも確認する手順を自分の思考とともに紹介することに重きをおいたので、課題がそのまま残っている. 良かったら読んで教えて欲しい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+### reference\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[^1]: [wikipedia](https://ja.wikipedia.org/wiki/%E3%83%95%E3%83%AA%E3%83%83%E3%83%97%E3%83%95%E3%83%AD%E3%83%83%E3%83%97#D%E5%9E%8B%E3%83%95%E3%83%AA%E3%83%83%E3%83%97%E3%83%95%E3%83%AD%E3%83%83%E3%83%97)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[^2]: WordPress/ver.4.9\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2018-01-09","updatedAt":"2021-04-22"},{"slug":"2017-11-07-github-api","title":"memo:GitHub API \u0026 Serde.rs","categories":["memo"],"image":"https://koka831.github.io/img/icon.png","tags":["Rust","GitHub"],"content":"\u003cp\u003eRusk/Task Manager in Rust の作成log.\u003c/p\u003e\n\u003cp\u003eRust とTask から命名\u003c/p\u003e\n\u003ch2 id=\"span-classolivemotivationspan\"\u003e\u003ca href=\"#span-classolivemotivationspan\"\u003e\u003cspan class=\"olive\"\u003eMotivation\u003c/span\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eGoogleカレンダーで主にスケジュール・タスク管理をしてたのだけど、\n色々と不満点があったので小さいCLIツールを作ることにした。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eWeb上でGoogle ToDoリストを作成するまでの導線が長い\u003c/li\u003e\n\u003cli\u003eToDoにタグ付けしたい \u0026#x26; Tag毎に確認したい\u003c/li\u003e\n\u003cli\u003eターミナルからも見たい\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eTask管理する上で欲しい項目/機能をリストアップ。\u003c/p\u003e\n\u003ch4 id=\"項目\"\u003e\u003ca href=\"#%E9%A0%85%E7%9B%AE\"\u003e項目\u003c/a\u003e\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003etask/name\u003c/li\u003e\n\u003cli\u003edescription\u003c/li\u003e\n\u003cli\u003etag(s)\u003c/li\u003e\n\u003cli\u003edeadline\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"機能\"\u003e\u003ca href=\"#%E6%A9%9F%E8%83%BD\"\u003e機能\u003c/a\u003e\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eCRUD\u003c/li\u003e\n\u003cli\u003eNotification\u003c/li\u003e\n\u003cli\u003eターミナル/Web(スマホ)両方から確認したい\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eで、上記を一番楽に実装しようと考えた結果、GitHubのレポジトリを立てToDoをIssueとして管理することにした。\u003cbr\u003e\nデータ構造としてのタスクの項目が多いので、ToDoの作成は主にWebから。CLIから作成する場合はinteractiveな感じに。\u003c/p\u003e\n\u003ch2 id=\"span-classoliveapproachspan\"\u003e\u003ca href=\"#span-classoliveapproachspan\"\u003e\u003cspan class=\"olive\"\u003eApproach\u003c/span\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eRustの\u003ca href=\"https://github.com/hyperium/hyper\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ehyper\u003c/a\u003eを使ってhttpクライアントを作成。\nhyper単体だとTLS対応していないので、\u003ca href=\"https://github.com/hyperium/hyper-tls\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ehyper-tls\u003c/a\u003eをコネクタに利用した。\u003cbr\u003e\nCLIには\u003ca href=\"https://github.com/TeXitoi/structopt\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003estructopt\u003c/a\u003eを用いてCRUD操作をenumとstructでいい感じに。\n出力の整形は\u003ca href=\"https://github.com/phsym/prettytable-rs\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eprettytable-rs\u003c/a\u003eを使用。OSS様様。\u003c/p\u003e\n\u003cp\u003eGitHubのAPIコールは\u003ca href=\"https://github.com/settings/tokens\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eここ\u003c/a\u003eから発行できる\u003ccode\u003epersonal access token\u003c/code\u003eをヘッダに付与するだけで、curlでも簡単に呼べる。\u003cbr\u003e\nレポジトリのissue一覧を叩くと以下のようにissueに対してユーザ情報、ラベルリストが入れ子構造になって返される。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-sh\"\u003e\u003ccode class=\"language-sh\"\u003ecurl -H \u0026#x26;quot;Authorization: token $GITHUB_API_TOKEN\u0026#x26;quot; https://api.github.com/repos/koka831/todo/issues\n\n[\n  {\n    \u0026#x26;quot;url\u0026#x26;quot;: \u0026#x26;quot;https://api.github.com/repos/...\u0026#x26;quot;,\n    ..\n    \u0026#x26;quot;id\u0026#x26;quot;: 271094185,\n    \u0026#x26;quot;number\u0026#x26;quot;: 2,\n    \u0026#x26;quot;title\u0026#x26;quot;: \u0026#x26;quot;hoge\u0026#x26;quot;,\n    \u0026#x26;quot;user\u0026#x26;quot;: {\n      \u0026#x26;quot;login\u0026#x26;quot;: \u0026#x26;quot;koka831\u0026#x26;quot;,\n      ...\n    },\n    \u0026#x26;quot;labels\u0026#x26;quot;: [\n      {\n        \u0026#x26;quot;id\u0026#x26;quot;: ...\n        \u0026#x26;quot;name\u0026#x26;quot;: \u0026#x26;quot;ToDo\u0026#x26;quot;,\n        \u0026#x26;quot;color\u0026#x26;quot;: \u0026#x26;quot;3778ba\u0026#x26;quot;,\n      }\n    ],\n    \u0026#x26;quot;state\u0026#x26;quot;: \u0026#x26;quot;open\u0026#x26;quot;,\n    ...\n  }, ...\n]\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e同じことをhyperからもやってみると、403/Forbiddenが返される。\n\u003ca href=\"https://developer.github.com/v3/#user-agent-required\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ereference\u003c/a\u003eを読み直すとUserAgentが必須とのこと。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAll API requests MUST include a valid User-Agent header. Requests with no User-Agent header will be rejected.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eしたがって最小限必要なheaderは以下の２つ。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003eUser-Agent: app/1.0\nAuthorization: token $TOKEN\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e２つ目の\u003ccode\u003eAuthorization\u003c/code\u003eの書式が曲者で、\u003ccode\u003etoken\u003c/code\u003eとトークン文字列の間の\u003cstrong\u003eスペースが２つあっても\u003c/strong\u003e\u003ccode\u003eBad credentials\u003c/code\u003eとなる。\u003c/p\u003e\n\u003cp\u003ehyperで独自ヘッダを付与する際には、hyperのマクロが便利。\nAuthorizationのheader生成関数を作成して、TLSコネクタベースのHttpClientに渡す。\nClientサイドなのでシングルスレッドで。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ehyper\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eClient\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eMethod\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eRequest\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ehyper\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003eheader\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eUserAgent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ehyper_tls\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eHttpsConnector\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003etokio_core\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003ereactor\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eCore\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// ...\u003c/span\u003e\n\u003cspan class=\"token macro property\"\u003eheader!\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAuthorization\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Authorization\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eString\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e auth_header \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token macro property\"\u003eformat!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"token {}\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e token\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e req \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eRequest\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eMethod\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eGet\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e url\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\nreq\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eheaders_mut\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eset\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eUserAgent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"todo\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\nreq\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eheaders_mut\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eset\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eAuthorization\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eauth_header\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// setup client\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e handle \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e core\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ehandle\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e client \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eClient\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003econfigure\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e// creates connector with 1 thread\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003econnector\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eHttpsConnector\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x26;\u003c/span\u003ehandle\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eunwrap\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ebuild\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x26;\u003c/span\u003ehandle\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e取得したIssueリストはdeserializeしてstructに落としこむ。\u003cbr\u003e\nとりあえずの構造体を作ってserde-jsonとすり合わせようと思っていたのだけど、\n構造体のkeyをjsonのkeyと合わせておくだけでそのままシリアライズしてくれた。\n今回はv3のREST APIを使ったけど、struct/enumのSerializerとGraphQLも相性がいいと思う。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token attribute attr-name\"\u003e#[derive(Debug, Serialize, Deserialize)]\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003estruct\u003c/span\u003e \u003cspan class=\"token type-definition class-name\"\u003eIssue\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  id\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eu32\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  number\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eu8\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  title\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eString\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  labels\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eVec\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eLabel\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  state\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eString\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  body\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eString\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token attribute attr-name\"\u003e#[derive(Debug, Serialize, Deserialize)]\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003epub\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estruct\u003c/span\u003e \u003cspan class=\"token type-definition class-name\"\u003eLabel\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    id\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eu32\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003epub\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eString\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003epub\u003c/span\u003e color\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eString\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    default\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ebool\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// ...\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e// send request\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e res \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e client\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003erequest\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ereq\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eand_then\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token closure-params\"\u003e\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003eres\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e res\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ebody\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003econcat2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eand_then\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003emove\u003c/span\u003e \u003cspan class=\"token closure-params\"\u003e\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003ebody\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e v\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eVec\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eIssue\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token namespace\"\u003eserde_json\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token function\"\u003efrom_slice\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x26;\u003c/span\u003ebody\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eunwrap\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token class-name\"\u003eOk\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ev\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\ncore\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003erun\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eres\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eunwrap\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"span-classolivetodospan\"\u003e\u003ca href=\"#span-classolivetodospan\"\u003e\u003cspan class=\"olive\"\u003eToDo\u003c/span\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eAPIコールが1~2secかかるのでその間スピナーアイコン表示したい\u003c/li\u003e\n\u003cli\u003erusk + fzf + vimでタスクをシームレスに編集できるように\n\u003cul\u003e\n\u003cli\u003eCLI側のメモは後日fzf+vimインターフェースと合わせて\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e","description":"\nRusk/Task Manager in Rust の作成log.\n\nRust とTask から命名\n## \u003cspan class=\"olive\"\u003eMotivation\u003c/span\u003e\nGoogleカ...","commits":[{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"35b550ae.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 35b550ae83af4efaeadf33471c8ca8a32c1079c8\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2017-11-07-github-api.md b/_posts/2017-11-07-github-api.md\nnew file mode 100644\nindex 0000000..032f57e\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2017-11-07-github-api.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,151 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: memo:GitHub API \u0026#x26; Serde.rs\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2017-11-07\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- memo\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tags:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- GitHub\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Rusk/Task Manager in Rust の作成log.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Rust とTask から命名\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## \u0026#x26;lt;span class=\"olive\"\u0026#x26;gt;Motivation\u0026#x26;lt;/span\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Googleカレンダーで主にスケジュール・タスク管理をしてたのだけど、\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+色々と不満点があったので小さいCLIツールを作ることにした。  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Web上でGoogle ToDoリストを作成するまでの導線が長い\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- ToDoにタグ付けしたい \u0026#x26; Tag毎に確認したい\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- ターミナルからも見たい\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Task管理する上で欲しい項目/機能をリストアップ。  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+#### 項目\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- task/name\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- description\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- tag(s)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- deadline\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+#### 機能\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- CRUD\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Notification\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- ターミナル/Web(スマホ)両方から確認したい\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+で、上記を一番楽に実装しようと考えた結果、GitHubのレポジトリを立てToDoをIssueとして管理することにした。  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+データ構造としてのタスクの項目が多いので、ToDoの作成は主にWebから。CLIから作成する場合はinteractiveな感じに。\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## \u0026#x26;lt;span class=\"olive\"\u0026#x26;gt;Approach\u0026#x26;lt;/span\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Rustの[hyper](https://github.com/hyperium/hyper)を使ってhttpクライアントを作成。\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+hyper単体だとTLS対応していないので、[hyper-tls](https://github.com/hyperium/hyper-tls)をコネクタに利用した。  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+CLIには[structopt](https://github.com/TeXitoi/structopt)を用いてCRUD操作をenumとstructでいい感じに。\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+出力の整形は[prettytable-rs](https://github.com/phsym/prettytable-rs)を使用。OSS様様。\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+GitHubのAPIコールは[ここ](https://github.com/settings/tokens)から発行できる`personal access token`をヘッダに付与するだけで、curlでも簡単に呼べる。  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+レポジトリのissue一覧を叩くと以下のようにissueに対してユーザ情報、ラベルリストが入れ子構造になって返される。\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+curl -H \"Authorization: token $GITHUB_API_TOKEN\" https://api.github.com/repos/koka831/todo/issues\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \"url\": \"https://api.github.com/repos/...\",\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    ..\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \"id\": 271094185,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \"number\": 2,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \"title\": \"hoge\",\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \"user\": {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+      \"login\": \"koka831\",\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+      ...\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    },\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \"labels\": [\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+      {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        \"id\": ...\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        \"name\": \"ToDo\",\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        \"color\": \"3778ba\",\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+      }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    ],\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    \"state\": \"open\",\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    ...\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  }, ...\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+]\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+同じことをhyperからもやってみると、403/Forbiddenが返される。\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[reference](https://developer.github.com/v3/#user-agent-required)を読み直すとUserAgentが必須とのこと。\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u0026#x26;gt; All API requests MUST include a valid User-Agent header. Requests with no User-Agent header will be rejected. \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+したがって最小限必要なheaderは以下の２つ。\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+User-Agent: app/1.0\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Authorization: token $TOKEN\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+２つ目の`Authorization`の書式が曲者で、`token`とトークン文字列の間の**スペースが２つあっても**`Bad credentials`となる。\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+hyperで独自ヘッダを付与する際には、hyperのマクロが便利。\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Authorizationのheader生成関数を作成して、TLSコネクタベースのHttpClientに渡す。\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Clientサイドなのでシングルスレッドで。\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+use hyper::{Client, Method, Request};\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+use hyper::header::UserAgent;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+use hyper_tls::HttpsConnector;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+use tokio_core::reactor::Core;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+// ...\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+header! { ( Authorization, \"Authorization\" ) =\u0026#x26;gt; [String] }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+let auth_header = format!(\"token {}\", token);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+let mut req = Request::new(Method::Get, url);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+req.headers_mut().set(UserAgent::new(\"todo\"));\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+req.headers_mut().set(Authorization(auth_header));\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+// setup client\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+let handle = core.handle();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+let client = Client::configure()\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  // creates connector with 1 thread\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  .connector(HttpsConnector::new(1, \u0026#x26;handle).unwrap())\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  .build(\u0026#x26;handle);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+取得したIssueリストはdeserializeしてstructに落としこむ。  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+とりあえずの構造体を作ってserde-jsonとすり合わせようと思っていたのだけど、\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+構造体のkeyをjsonのkeyと合わせておくだけでそのままシリアライズしてくれた。\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+今回はv3のREST APIを使ったけど、struct/enumのSerializerとGraphQLも相性がいいと思う。\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+#[derive(Debug, Serialize, Deserialize)]\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+struct Issue {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  id: u32,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  number: u8,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  title: String,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  labels: Vec\u0026#x26;lt;Label\u0026#x26;gt;,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  state: String,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  body: String\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+#[derive(Debug, Serialize, Deserialize)]\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+pub struct Label {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    id: u32,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    pub name: String,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    pub color: String,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    default: bool,\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+// ...\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+// send request\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+let res = client.request(req)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  .and_then(|res| { res.body().concat2()\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  .and_then(move |body| {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let v: Vec\u0026#x26;lt;Issue\u0026#x26;gt; = serde_json::from_slice(\u0026#x26;body).unwrap();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    Ok(v)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  })\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+});\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+core.run(res).unwrap()\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## \u0026#x26;lt;span class=\"olive\"\u0026#x26;gt;ToDo\u0026#x26;lt;/span\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- APIコールが1~2secかかるのでその間スピナーアイコン表示したい\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- rusk + fzf + vimでタスクをシームレスに編集できるように\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - CLI側のメモは後日fzf+vimインターフェースと合わせて\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2017-11-07","updatedAt":"2021-01-30"},{"slug":"2017-10-03-boot","title":"boot","categories":["diary"],"image":"https://koka831.github.io/img/icon.png","tags":[],"content":"\u003cp\u003e\u003cfigure\u003e\u003cimg src=\"/img/pyobject.png\" alt=\"\"\u003e\u003cfigcaption\u003eimg.1 \u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\u003ch1 id=\"purpose\"\u003e\u003ca href=\"#purpose\"\u003epurpose\u003c/a\u003e\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eKTP\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e一ヶ月毎を目安\u003c/li\u003e\n\u003cli\u003eログとして\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eWIP/Memo\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eその都度\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e文章構成力の向上\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e英語でのoutputよりlogical thinkingに重点\u003c/li\u003e\n\u003cli\u003e週一くらいでやれたら\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"span-classgreenhighlight-testspan\"\u003e\u003ca href=\"#span-classgreenhighlight-testspan\"\u003e\u003cspan class=\"green\"\u003ehighlight test\u003c/span\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003elocal環境でも使ってる\u003ca href=\"https://github.com/morhetz/gruvbox\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003egruvbox\u003c/a\u003eを\n\u003ca href=\"https://highlightjs.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ehighlight.js\u003c/a\u003eでアレする\u003c/p\u003e\n\u003ch1 id=\"todo\"\u003e\u003ca href=\"#todo\"\u003eTODO\u003c/a\u003e\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eDisqusがなぜか独語\u003c/li\u003e\n\u003cli\u003eh1タグもうちょい主張\u003c/li\u003e\n\u003c/ul\u003e","description":"init.","commits":[{"title":"wip","date":"2021-03-05 18:48:41","hash":"70a0aff5","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"70a0aff5.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 70a0aff5a83d4332a8c3ccff3d2d3c1c84e46ef2\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Fri Mar 5 18:48:41 2021 +0900\n\n  wip\n\ndiff --git a/_posts/2017-10-03-boot.md b/_posts/2017-10-03-boot.md\nindex 3b0b6ae..127c81a 100755\n\u003cspan class=\"token deleted\"\u003e--- a/_posts/2017-10-03-boot.md\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2017-10-03-boot.md\u003c/span\u003e\n@@ -6,7 +6,7 @@ categories:\ndescription: init.\n\u003cspan class=\"token deleted\"\u003e---\u003c/span\u003e\n\n\u003cspan class=\"token deleted\"\u003e-![](./img/pyobject.png)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+![](/img/pyobject.png)\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e# purpose\u003c/span\u003e\n\u003cspan class=\"token deleted\"\u003e- KTP\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"},{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"35b550ae.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 35b550ae83af4efaeadf33471c8ca8a32c1079c8\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2017-10-03-boot.md b/_posts/2017-10-03-boot.md\nnew file mode 100755\nindex 0000000..3b0b6ae\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2017-10-03-boot.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,31 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: boot\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2017-10-03\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - diary\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+description: init.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+![](./img/pyobject.png)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# purpose\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- KTP\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - 一ヶ月毎を目安\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - ログとして\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- WIP/Memo\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ - その都度\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- 文章構成力の向上\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - 英語でのoutputよりlogical thinkingに重点\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - 週一くらいでやれたら\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# \u0026#x26;lt;span class=\"green\"\u0026#x26;gt;highlight test\u0026#x26;lt;/span\u0026#x26;gt;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+local環境でも使ってる[gruvbox](https://github.com/morhetz/gruvbox)を\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+[highlight.js](https://highlightjs.org/)でアレする\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# TODO\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Disqusがなぜか独語\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- h1タグもうちょい主張\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2017-10-03","updatedAt":"2021-03-05"}]},"__N_SSG":true},"page":"/archives","query":{},"buildId":"70uKKhuowIQ3lJ7eUOIUA","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>