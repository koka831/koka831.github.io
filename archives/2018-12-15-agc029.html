<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><meta name="theme-color" content="#ddd4bb" data-next-head=""/><meta property="og:type" content="website" data-next-head=""/><meta property="og:url" content="https://koka831.github.io" data-next-head=""/><meta property="og:site_name" content="/var/log/koka" data-next-head=""/><meta name="twitter:card" content="summary" data-next-head=""/><meta name="twitter:title" content="/var/log/koka" data-next-head=""/><meta name="twitter:site" content="@k_0ka" data-next-head=""/><meta name="twitter:description" content="cat /var/log/koka &gt; /dev/null" data-next-head=""/><link rel="alternate" type="application/rss+xml" href="https://koka831.github.io/feed.xml" title="/var/log/koka RSS2.0" data-next-head=""/><title data-next-head=""></title><meta property="title" content="AGC029 | /var/log/koka" data-next-head=""/><meta property="og:title" content="AGC029 | /var/log/koka" data-next-head=""/><meta property="twitter:title" content="AGC029 | /var/log/koka" data-next-head=""/><meta property="description" content="考察" data-next-head=""/><meta property="og:description" content="考察" data-next-head=""/><meta property="twitter:description" content="考察" data-next-head=""/><meta property="og:image" content="https://koka831.github.io/img/icon.png" data-next-head=""/><link rel="preload" href="/_next/static/css/3ad67afbba2537c6.css" as="style"/><link rel="preload" href="/_next/static/css/5709b986f32934dd.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3ad67afbba2537c6.css" data-n-g=""/><link rel="stylesheet" href="/_next/static/css/5709b986f32934dd.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-8cac0b4b405cede1.js" defer=""></script><script src="/_next/static/chunks/framework-b8ed9b642a1d405a.js" defer=""></script><script src="/_next/static/chunks/main-5967226b86c09d72.js" defer=""></script><script src="/_next/static/chunks/pages/_app-87775d45a97146af.js" defer=""></script><script src="/_next/static/chunks/98bef5de-90a314e763d10677.js" defer=""></script><script src="/_next/static/chunks/230-8a10a6030a242aaa.js" defer=""></script><script src="/_next/static/chunks/772-fdba437487b25e1a.js" defer=""></script><script src="/_next/static/chunks/pages/archives/%5Bslug%5D-296f94b36904c5e2.js" defer=""></script><script src="/_next/static/D-2dGZGk4pQqdWzPnxE9C/_buildManifest.js" defer=""></script><script src="/_next/static/D-2dGZGk4pQqdWzPnxE9C/_ssgManifest.js" defer=""></script></head><body><div id="__next"><nav class="Header_navigation__container__QTqC2"><div class="Header_navigation___WOtz"><a href="/">/var/log/koka</a></div><div><a href="/archives">archive</a></div></nav><main class="Layout_container__p0wDU"><div class="slug_container__mEKwJ"><div class="slug_main__Z60A9"><article class="slug_article__bvmhe"><div itemScope="" class="ArticleHeader_header__container__rB6r3"><a class="ArticleHeader_post__title__2kJMT" href="/archives/2018-12-15-agc029">AGC029</a><p>考察</p><div class="ArticleHeader_flex__HuW5L"><div class="ArticleHeader_post__tags__xNlWQ"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags ArticleHeader_tags__icon__U0ED6" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M345 39.1L472.8 168.4c52.4 53 52.4 138.2 0 191.2L360.8 472.9c-9.3 9.4-24.5 9.5-33.9 .2s-9.5-24.5-.2-33.9L438.6 325.9c33.9-34.3 33.9-89.4 0-123.7L310.9 72.9c-9.3-9.4-9.2-24.6 .2-33.9s24.6-9.2 33.9 .2zM0 229.5V80C0 53.5 21.5 32 48 32H197.5c17 0 33.3 6.7 45.3 18.7l168 168c25 25 25 65.5 0 90.5L277.3 442.7c-25 25-65.5 25-90.5 0l-168-168C6.7 262.7 0 246.5 0 229.5zM144 144a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"></path></svg><p class="Tag_tag__zyzRy">AtCoder</p></div><div class="ArticleHeader_post__dates__xh42y"><time dateTime="2018-12-15" itemProp="datePublished" class="PublishDate_post__date___a8_6">published: <!-- -->2018-12-15</time><time dateTime="2021-01-30" itemProp="datePublished" class="PublishDate_post__date___a8_6">updated: 2021-01-30</time></div></div></div><div class="slug_article__body__Y96pa"><p>AtCoder Grand Contest 29の参加記録。</p>
<h1 id="a"><a href="#a"><a href="https://beta.atcoder.jp/contests/agc029/tasks/agc029_a" rel="nofollow">A</a></a></h1>
<p><code>xoxooox</code> のようにオセロの並びが与えられるので, 隣合う<code>ox</code> を <code>xo</code> にする操作が最大何回行えるか求める.</p>
<p><code>oooox</code> の場合, <code>xoooo</code>となるまでに4回操作できる.<br>
<code>ooooxx</code> の場合, まず右から二つ目の<code>x</code>を↑の様に動かしてから<code>xoooo + x</code>とみるとそれぞれの<code>x</code>に対する操作は独立.<br>
なので各<code>x</code>の左側にある<code>o</code>の数の和を求めればいい.</p>
<h2 id="解答"><a href="#解答">解答</a></h2>
<div class="remark-highlight"><pre class="language-rust"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token keyword">mut</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token function">read_one</span><span class="token punctuation">::</span><span class="token operator">&#x3C;</span><span class="token class-name">String</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">chars</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">::</span><span class="token operator">&#x3C;</span><span class="token class-name">Vec</span><span class="token operator">&#x3C;</span><span class="token keyword">char</span><span class="token operator">>></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> <span class="token keyword">mut</span> cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">..</span>s<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'B'</span> <span class="token punctuation">{</span> cnt <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">if</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'W'</span> <span class="token punctuation">{</span> ans <span class="token operator">+=</span> cnt<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> ans<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token punctuation">}</span>
</code></pre></div>
<p>上の解答はWAになります()<br>
Rustの数値リテラルにおける型推論のデフォルトは<code>i32</code>のため, <code>s.len() &#x3C; O(10^5)</code>の制約ではオーバーフローしうる.</p>
<p>5分で解答してWA食らって正直全く分からなかった.これに気付くまで25分.<br>
流石に初歩過ぎるので反省.</p>
<h1 id="b"><a href="#b"><a href="https://beta.atcoder.jp/contests/agc029/tasks/agc029_b" rel="nofollow">B</a></a></h1>
<p><code>3 11 14 5 13</code> のように数列が与えられる. この中から和が<code>2^k</code>の形になるようにペアをつくるとき, 最大いくつ作れるか.</p>
<p>↑の例だと, ペアは<code>(3, 5), (3, 13), (5, 11)</code> の3通り考えられる. 複数回使うことは出来ないので, 2部グラフの最大マッチングか? <code>n &#x3C;= 2 * 10^5</code>からできる候補なら計算量<code>O(NM)</code>でも間に合うのか? などと考えていた(無事TLE).</p>
<p>まずソートして, 各<code>a_i</code>に対しそれより大きい最小の<code>2^k</code>を求める.<br>
<code>2^k - a_i</code>が数列の中に存在するかどうかbinary search等で求めてペアの候補とする.</p>
<p>ペアの候補は, 大きいものから順に選択していけば最大となる.</p>
<h2 id="解答-1"><a href="#解答-1">解答</a></h2>
<div class="remark-highlight"><pre class="language-rust"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token function">read_one</span><span class="token punctuation">::</span><span class="token operator">&#x3C;</span><span class="token keyword">usize</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> <span class="token keyword">mut</span> an <span class="token operator">=</span> <span class="token function">read</span><span class="token punctuation">::</span><span class="token operator">&#x3C;</span><span class="token keyword">usize</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    an<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token keyword">let</span> <span class="token keyword">mut</span> graph <span class="token operator">=</span> <span class="token class-name">Vec</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> <span class="token keyword">mut</span> bn <span class="token operator">=</span> an<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">..</span>n <span class="token punctuation">{</span>
        <span class="token keyword">let</span> x <span class="token operator">=</span> bn<span class="token punctuation">.</span><span class="token function">binary_search</span><span class="token punctuation">(</span><span class="token operator">&#x26;</span>an<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 自身がペア対象にならないように一旦</span>
        bn<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        <span class="token keyword">let</span> <span class="token keyword">mut</span> ceil <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> ceil <span class="token operator">&#x3C;=</span> an<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">{</span>
            ceil <span class="token operator">*=</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
 
        <span class="token keyword">match</span> bn<span class="token punctuation">.</span><span class="token function">binary_search</span><span class="token punctuation">(</span><span class="token operator">&#x26;</span><span class="token punctuation">(</span>ceil <span class="token operator">-</span> an<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Ok</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> graph<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            _ <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 自身を戻す</span>
        bn<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> an<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/* 最大マッチングWA</span>
<span class="token comment">    let n = graph.len();</span>
<span class="token comment">    let mut dinitz = Dinitz::new(n * 2 + 2);</span>
<span class="token comment">    for (a, b) in graph {</span>
<span class="token comment">        dinitz.add_edge(a, b, 1);</span>
<span class="token comment">        dinitz.add_edge(b, a, 1);</span>
<span class="token comment">    }</span>
<span class="token comment">    println!("{:?}", dinitz.max_flow(n * 2, n * 2 + 1));</span>
<span class="token comment">    */</span>
<span class="token punctuation">}</span>
</code></pre></div>
<h2 id="所感"><a href="#所感">所感</a></h2>
<p>Aのミスで800位くらい落ちてて草も生えない.<br>
Bは2部マッチングを勉強したあとだったのでそれに引っ張られた.<br>
精進の量がたりてないので300~500埋めをやろう.</p></div></article><div class="CommitLogs_commit_logs__5HqJt" role="log"><h2>Commits</h2><details><summary class="CommitLogs_summary__ZlqPh"><span class="CommitLogs_commit__date__m2ycj">2021-01-30 22:18:17</span><span class="CommitLogs_commit__hash__wzS9A">35b550ae</span><span class="CommitLogs_commit__message__q7MGV">copy md</span></summary><div><div class="remark-highlight"><pre data-file="35b550ae.patch" class="language-git language-diff"><code class="language-git"><span class="token commit-sha1">commit 35b550ae83af4efaeadf33471c8ca8a32c1079c8</span>
Author: koka &#x26;<a href="mailto:lt;koka.code@gmail.com" class="token email-link">lt;koka.code@gmail.com</a>&#x26;gt;
Date:   Sat Jan 30 22:18:17 2021 +0900

  copy md

diff --git a/_posts/2018-12-15-agc029.md b/_posts/2018-12-15-agc029.md
new file mode 100644
index 0000000..1b81973
<span class="token deleted">--- /dev/null</span>
<span class="token inserted">+++ b/_posts/2018-12-15-agc029.md</span>
<span class="token coord">@@ -0,0 +1,102 @@</span>
<span class="token inserted">+---</span>
<span class="token inserted">+title: AGC029</span>
<span class="token inserted">+date: 2018-12-15</span>
<span class="token inserted">+categories:</span>
<span class="token inserted">+- Competitive Programming</span>
<span class="token inserted">+tags:</span>
<span class="token inserted">+  - AtCoder</span>
<span class="token inserted">+description: 考察</span>
<span class="token inserted">+---</span>
<span class="token inserted">+</span>
<span class="token inserted">+</span>
<span class="token inserted">+AtCoder Grand Contest 29の参加記録。</span>
<span class="token inserted">+</span>
<span class="token inserted">+# [A](https://beta.atcoder.jp/contests/agc029/tasks/agc029_a)</span>
<span class="token inserted">+</span>
<span class="token inserted">+`xoxooox` のようにオセロの並びが与えられるので, 隣合う`ox` を `xo` にする操作が最大何回行えるか求める.  </span>
<span class="token inserted">+</span>
<span class="token inserted">+`oooox` の場合, `xoooo`となるまでに4回操作できる.  </span>
<span class="token inserted">+`ooooxx` の場合, まず右から二つ目の`x`を↑の様に動かしてから`xoooo + x`とみるとそれぞれの`x`に対する操作は独立.  </span>
<span class="token inserted">+なので各`x`の左側にある`o`の数の和を求めればいい.</span>
<span class="token inserted">+</span>
<span class="token inserted">+## 解答</span>
<span class="token inserted">+</span>
<span class="token inserted">+\```rust</span>
<span class="token inserted">+fn main() {</span>
<span class="token inserted">+    let mut ans = 0;</span>
<span class="token inserted">+    let s = read_one::&#x26;lt;String&#x26;gt;().chars().collect::&#x26;lt;Vec&#x26;lt;char&#x26;gt;&#x26;gt;();</span>
<span class="token inserted">+    let mut cnt = 0;</span>
<span class="token inserted">+    for i in 0..s.len() {</span>
<span class="token inserted">+        if s[i] == 'B' { cnt += 1; }</span>
<span class="token inserted">+        if s[i] == 'W' { ans += cnt; }</span>
<span class="token inserted">+    }</span>
<span class="token inserted">+    println!("{}", ans);</span>
<span class="token inserted">+ </span>
<span class="token inserted">+}</span>
<span class="token inserted">+\```</span>
<span class="token inserted">+</span>
<span class="token inserted">+上の解答はWAになります()  </span>
<span class="token inserted">+Rustの数値リテラルにおける型推論のデフォルトは`i32`のため, `s.len() &#x26;lt; O(10^5)`の制約ではオーバーフローしうる.</span>
<span class="token inserted">+</span>
<span class="token inserted">+5分で解答してWA食らって正直全く分からなかった.これに気付くまで25分.  </span>
<span class="token inserted">+流石に初歩過ぎるので反省.</span>
<span class="token inserted">+</span>
<span class="token inserted">+</span>
<span class="token inserted">+# [B](https://beta.atcoder.jp/contests/agc029/tasks/agc029_b)</span>
<span class="token inserted">+</span>
<span class="token inserted">+`3 11 14 5 13` のように数列が与えられる. この中から和が`2^k`の形になるようにペアをつくるとき, 最大いくつ作れるか.  </span>
<span class="token inserted">+</span>
<span class="token inserted">+↑の例だと, ペアは`(3, 5), (3, 13), (5, 11)` の3通り考えられる. 複数回使うことは出来ないので, 2部グラフの最大マッチングか? `n &#x26;lt;= 2 * 10^5`からできる候補なら計算量`O(NM)`でも間に合うのか? などと考えていた(無事TLE).</span>
<span class="token inserted">+</span>
<span class="token inserted">+まずソートして, 各`a_i`に対しそれより大きい最小の`2^k`を求める.  </span>
<span class="token inserted">+`2^k - a_i`が数列の中に存在するかどうかbinary search等で求めてペアの候補とする.  </span>
<span class="token inserted">+</span>
<span class="token inserted">+</span>
<span class="token inserted">+ペアの候補は, 大きいものから順に選択していけば最大となる.</span>
<span class="token inserted">+</span>
<span class="token inserted">+</span>
<span class="token inserted">+## 解答</span>
<span class="token inserted">+</span>
<span class="token inserted">+\```rust</span>
<span class="token inserted">+fn main() {</span>
<span class="token inserted">+    let n = read_one::&#x26;lt;usize&#x26;gt;();</span>
<span class="token inserted">+    let mut an = read::&#x26;lt;usize&#x26;gt;();</span>
<span class="token inserted">+    an.sort();</span>
<span class="token inserted">+ </span>
<span class="token inserted">+    let mut graph = Vec::new();</span>
<span class="token inserted">+    let mut bn = an.clone();</span>
<span class="token inserted">+ </span>
<span class="token inserted">+    for i in 0..n {</span>
<span class="token inserted">+        let x = bn.binary_search(&#x26;an[i]).unwrap();</span>
<span class="token inserted">+        // 自身がペア対象にならないように一旦</span>
<span class="token inserted">+        bn.remove(x);</span>
<span class="token inserted">+ </span>
<span class="token inserted">+        let mut ceil = 2;</span>
<span class="token inserted">+        while ceil &#x26;lt;= an[i] {</span>
<span class="token inserted">+            ceil *= 2;</span>
<span class="token inserted">+        }</span>
<span class="token inserted">+ </span>
<span class="token inserted">+        match bn.binary_search(&#x26;(ceil - an[i])) {</span>
<span class="token inserted">+            Ok(n) =&#x26;gt; { graph.push((i, n)); },</span>
<span class="token inserted">+            _ =&#x26;gt; {}</span>
<span class="token inserted">+        }</span>
<span class="token inserted">+        // 自身を戻す</span>
<span class="token inserted">+        bn.insert(x, an[i]);</span>
<span class="token inserted">+    }</span>
<span class="token inserted">+</span>
<span class="token inserted">+    /* 最大マッチングWA</span>
<span class="token inserted">+    let n = graph.len();</span>
<span class="token inserted">+    let mut dinitz = Dinitz::new(n * 2 + 2);</span>
<span class="token inserted">+    for (a, b) in graph {</span>
<span class="token inserted">+        dinitz.add_edge(a, b, 1);</span>
<span class="token inserted">+        dinitz.add_edge(b, a, 1);</span>
<span class="token inserted">+    }</span>
<span class="token inserted">+    println!("{:?}", dinitz.max_flow(n * 2, n * 2 + 1));</span>
<span class="token inserted">+    */</span>
<span class="token inserted">+}</span>
<span class="token inserted">+\```</span>
<span class="token inserted">+</span>
<span class="token inserted">+## 所感</span>
<span class="token inserted">+Aのミスで800位くらい落ちてて草も生えない.  </span>
<span class="token inserted">+Bは2部マッチングを勉強したあとだったのでそれに引っ張られた.  </span>
<span class="token inserted">+精進の量がたりてないので300~500埋めをやろう.</span>
</code></pre></div></div></details></div><div class="Comments_comment__S1sQU" role="comment"><h2 class="Comments_title__494X3">Comments</h2><div id="github-comment-container"></div></div></div><aside class="slug_aside__Ow2nH"><nav class="Toc_toc__nav__MM10v" role="navigation"><ul class="Toc_toc__f9CQa"></ul></nav></aside></div></main><footer class="Footer_footer__UaG1g"><small>Code snippets licensed under MIT, unless otherwise noted.</small></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"slug":"2018-12-15-agc029","title":"AGC029","categories":["Competitive Programming"],"image":"https://koka831.github.io/img/icon.png","tags":["AtCoder"],"content":"\u003cp\u003eAtCoder Grand Contest 29の参加記録。\u003c/p\u003e\n\u003ch1 id=\"a\"\u003e\u003ca href=\"#a\"\u003e\u003ca href=\"https://beta.atcoder.jp/contests/agc029/tasks/agc029_a\" rel=\"nofollow\"\u003eA\u003c/a\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003e\u003ccode\u003exoxooox\u003c/code\u003e のようにオセロの並びが与えられるので, 隣合う\u003ccode\u003eox\u003c/code\u003e を \u003ccode\u003exo\u003c/code\u003e にする操作が最大何回行えるか求める.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eoooox\u003c/code\u003e の場合, \u003ccode\u003exoooo\u003c/code\u003eとなるまでに4回操作できる.\u003cbr\u003e\n\u003ccode\u003eooooxx\u003c/code\u003e の場合, まず右から二つ目の\u003ccode\u003ex\u003c/code\u003eを↑の様に動かしてから\u003ccode\u003exoooo + x\u003c/code\u003eとみるとそれぞれの\u003ccode\u003ex\u003c/code\u003eに対する操作は独立.\u003cbr\u003e\nなので各\u003ccode\u003ex\u003c/code\u003eの左側にある\u003ccode\u003eo\u003c/code\u003eの数の和を求めればいい.\u003c/p\u003e\n\u003ch2 id=\"解答\"\u003e\u003ca href=\"#解答\"\u003e解答\u003c/a\u003e\u003c/h2\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e ans \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e s \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread_one\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eString\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003echars\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ecollect\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eVec\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003echar\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e cnt \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003es\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003elen\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e s\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token char\"\u003e'B'\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e cnt \u003cspan class=\"token operator\"\u003e+=\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e s\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token char\"\u003e'W'\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e ans \u003cspan class=\"token operator\"\u003e+=\u003c/span\u003e cnt\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token macro property\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"{}\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ans\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n \n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e上の解答はWAになります()\u003cbr\u003e\nRustの数値リテラルにおける型推論のデフォルトは\u003ccode\u003ei32\u003c/code\u003eのため, \u003ccode\u003es.len() \u0026#x3C; O(10^5)\u003c/code\u003eの制約ではオーバーフローしうる.\u003c/p\u003e\n\u003cp\u003e5分で解答してWA食らって正直全く分からなかった.これに気付くまで25分.\u003cbr\u003e\n流石に初歩過ぎるので反省.\u003c/p\u003e\n\u003ch1 id=\"b\"\u003e\u003ca href=\"#b\"\u003e\u003ca href=\"https://beta.atcoder.jp/contests/agc029/tasks/agc029_b\" rel=\"nofollow\"\u003eB\u003c/a\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003e\u003ccode\u003e3 11 14 5 13\u003c/code\u003e のように数列が与えられる. この中から和が\u003ccode\u003e2^k\u003c/code\u003eの形になるようにペアをつくるとき, 最大いくつ作れるか.\u003c/p\u003e\n\u003cp\u003e↑の例だと, ペアは\u003ccode\u003e(3, 5), (3, 13), (5, 11)\u003c/code\u003e の3通り考えられる. 複数回使うことは出来ないので, 2部グラフの最大マッチングか? \u003ccode\u003en \u0026#x3C;= 2 * 10^5\u003c/code\u003eからできる候補なら計算量\u003ccode\u003eO(NM)\u003c/code\u003eでも間に合うのか? などと考えていた(無事TLE).\u003c/p\u003e\n\u003cp\u003eまずソートして, 各\u003ccode\u003ea_i\u003c/code\u003eに対しそれより大きい最小の\u003ccode\u003e2^k\u003c/code\u003eを求める.\u003cbr\u003e\n\u003ccode\u003e2^k - a_i\u003c/code\u003eが数列の中に存在するかどうかbinary search等で求めてペアの候補とする.\u003c/p\u003e\n\u003cp\u003eペアの候補は, 大きいものから順に選択していけば最大となる.\u003c/p\u003e\n\u003ch2 id=\"解答-1\"\u003e\u003ca href=\"#解答-1\"\u003e解答\u003c/a\u003e\u003c/h2\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rust\"\u003e\u003ccode class=\"language-rust\"\u003e\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e n \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread_one\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e an \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eusize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    an\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003esort\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n \n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e graph \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eVec\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e bn \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e an\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eclone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n \n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e..\u003c/span\u003en \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e x \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e bn\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ebinary_search\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x26;\u003c/span\u003ean\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eunwrap\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token comment\"\u003e// 自身がペア対象にならないように一旦\u003c/span\u003e\n        bn\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eremove\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n \n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e ceil \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ewhile\u003c/span\u003e ceil \u003cspan class=\"token operator\"\u003e\u0026#x3C;=\u003c/span\u003e an\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            ceil \u003cspan class=\"token operator\"\u003e*=\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n \n        \u003cspan class=\"token keyword\"\u003ematch\u003c/span\u003e bn\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ebinary_search\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eceil \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e an\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token class-name\"\u003eOk\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003en\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e graph\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003epush\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n            _ \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token comment\"\u003e// 自身を戻す\u003c/span\u003e\n        bn\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003einsert\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e an\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token comment\"\u003e/* 最大マッチングWA\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e    let n = graph.len();\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e    let mut dinitz = Dinitz::new(n * 2 + 2);\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e    for (a, b) in graph {\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e        dinitz.add_edge(a, b, 1);\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e        dinitz.add_edge(b, a, 1);\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e    }\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e    println!(\"{:?}\", dinitz.max_flow(n * 2, n * 2 + 1));\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e    */\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"所感\"\u003e\u003ca href=\"#所感\"\u003e所感\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eAのミスで800位くらい落ちてて草も生えない.\u003cbr\u003e\nBは2部マッチングを勉強したあとだったのでそれに引っ張られた.\u003cbr\u003e\n精進の量がたりてないので300~500埋めをやろう.\u003c/p\u003e","description":"考察","commits":[{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"35b550ae.patch\" class=\"language-git language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 35b550ae83af4efaeadf33471c8ca8a32c1079c8\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2018-12-15-agc029.md b/_posts/2018-12-15-agc029.md\nnew file mode 100644\nindex 0000000..1b81973\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2018-12-15-agc029.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,102 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: AGC029\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2018-12-15\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Competitive Programming\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tags:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+  - AtCoder\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+description: 考察\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+AtCoder Grand Contest 29の参加記録。\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# [A](https://beta.atcoder.jp/contests/agc029/tasks/agc029_a)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`xoxooox` のようにオセロの並びが与えられるので, 隣合う`ox` を `xo` にする操作が最大何回行えるか求める.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`oooox` の場合, `xoooo`となるまでに4回操作できる.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`ooooxx` の場合, まず右から二つ目の`x`を↑の様に動かしてから`xoooo + x`とみるとそれぞれの`x`に対する操作は独立.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+なので各`x`の左側にある`o`の数の和を求めればいい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## 解答\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn main() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut ans = 0;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let s = read_one::\u0026#x26;lt;String\u0026#x26;gt;().chars().collect::\u0026#x26;lt;Vec\u0026#x26;lt;char\u0026#x26;gt;\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut cnt = 0;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for i in 0..s.len() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        if s[i] == 'B' { cnt += 1; }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        if s[i] == 'W' { ans += cnt; }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    println!(\"{}\", ans);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+上の解答はWAになります()  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Rustの数値リテラルにおける型推論のデフォルトは`i32`のため, `s.len() \u0026#x26;lt; O(10^5)`の制約ではオーバーフローしうる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+5分で解答してWA食らって正直全く分からなかった.これに気付くまで25分.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+流石に初歩過ぎるので反省.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+# [B](https://beta.atcoder.jp/contests/agc029/tasks/agc029_b)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`3 11 14 5 13` のように数列が与えられる. この中から和が`2^k`の形になるようにペアをつくるとき, 最大いくつ作れるか.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+↑の例だと, ペアは`(3, 5), (3, 13), (5, 11)` の3通り考えられる. 複数回使うことは出来ないので, 2部グラフの最大マッチングか? `n \u0026#x26;lt;= 2 * 10^5`からできる候補なら計算量`O(NM)`でも間に合うのか? などと考えていた(無事TLE).\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+まずソートして, 各`a_i`に対しそれより大きい最小の`2^k`を求める.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`2^k - a_i`が数列の中に存在するかどうかbinary search等で求めてペアの候補とする.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ペアの候補は, 大きいものから順に選択していけば最大となる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## 解答\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```rust\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+fn main() {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let n = read_one::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut an = read::\u0026#x26;lt;usize\u0026#x26;gt;();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    an.sort();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut graph = Vec::new();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut bn = an.clone();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for i in 0..n {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let x = bn.binary_search(\u0026#x26;an[i]).unwrap();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        // 自身がペア対象にならないように一旦\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        bn.remove(x);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        let mut ceil = 2;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        while ceil \u0026#x26;lt;= an[i] {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            ceil *= 2;\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        match bn.binary_search(\u0026#x26;(ceil - an[i])) {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            Ok(n) =\u0026#x26;gt; { graph.push((i, n)); },\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+            _ =\u0026#x26;gt; {}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        // 自身を戻す\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        bn.insert(x, an[i]);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    /* 最大マッチングWA\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let n = graph.len();\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    let mut dinitz = Dinitz::new(n * 2 + 2);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    for (a, b) in graph {\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        dinitz.add_edge(a, b, 1);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+        dinitz.add_edge(b, a, 1);\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    }\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    println!(\"{:?}\", dinitz.max_flow(n * 2, n * 2 + 1));\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+    */\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## 所感\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Aのミスで800位くらい落ちてて草も生えない.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Bは2部マッチングを勉強したあとだったのでそれに引っ張られた.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+精進の量がたりてないので300~500埋めをやろう.\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2018-12-15","updatedAt":"2021-01-30"}},"__N_SSG":true},"page":"/archives/[slug]","query":{"slug":"2018-12-15-agc029"},"buildId":"D-2dGZGk4pQqdWzPnxE9C","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>